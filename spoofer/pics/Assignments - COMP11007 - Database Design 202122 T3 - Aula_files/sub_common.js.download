/*! For license information please see sub_common.js.LICENSE.txt */
(window.LearnosityAmd=window.LearnosityAmd||[]).push([[0],{132:function(t,r,a){"use strict";a.d(r,"a",(function(){return i18nTemplate}));var l=a(0),S=a.n(l);function i18nTemplate(t,r){return S.a.isEmpty(t)?"":(S()(r).forEach((function(r,a){var l="{{".concat(a,"}}");t=t.replace(l,r)})),t)}},138:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(10),E=(a(42),a(35));function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=_getPrototypeOf(t);if(r){var S=_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=["exactMatch","partialMatch","partialMatchV2"],j=function isDefaultValidResponseValue(t){return 0===S.a.filter(t,(function(t){return t||0===t})).length},D=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(ClozeScorer,t);var r=_createSuper(ClozeScorer);function ClozeScorer(){return _classCallCheck(this,ClozeScorer),r.apply(this,arguments)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(ClozeScorer,[{key:"reset",value:function reset(t){var r=JSON.stringify(t),a=this.flags||this.cachedFlags;if(this.serializedData!==r){t.question.validation&&t.question.validation.scoring_type||(t=O.a.normalizeParameters(t));var l=getOptions(t.question,a);try{this.scoringData=function getScoringData(t,r){var a=t.question.validation,l=[];if(!function canValidateResponse(t){if(!1===S.a.getNested(t,"validation.automarkable"))return!1;var r=t.validation||t||{};return!S.a.isEmpty(r)&&(S.a.isArray(r.valid_responses)||S.a.isObject(r.valid_response)&&!j(r.valid_response.value))}(t.question))return{automarkable:!1};t.question.equiv_literal_legacy&&(t=O.a.processCompatibility(t));if(t.response=t.response||{},a&&a.scoring_type){if(!S.a.contains(L,a.scoring_type))throw new O.a.InvalidScoringTypeException(t.question.type,a.scoring_type);return a.valid_response&&l.push(a.valid_response),a.alt_responses&&(l=l.concat(a.alt_responses)),function processResponsesCurrentScoringFormat(t,r,a){var l={score:1,penaltyScore:0,rounding:"floor"};return O.a.scoreArray(t,r,l,a)}(t,l,r)}return S.a.isArray(t.question.valid_responses)?function processLegacyResponses1233(t,r){var a,l,E=t.question,L=t.response&&t.response.value||[],j=E.valid_responses,D=[];r=getOptions(E,{stripWhiteSpaceForMath:!0}),S.a.each(L,(function(t,E){var L,q,B=j[E],G=!1;S.a.each(B,(function(a){a.value&&S.a.isNumber(a.score)&&(O.a.stringCompare(t,a.value,r)?(q=a.score,G=!0):q=q||0,(S.a.isUndefined(L)||a.score>L)&&(L=a.score))})),a=O.a.addIfDefined(a,q),l=O.a.addIfDefined(l,L),D.push(G)})),L.length||S.a.each(j,(function(t,r){var a;S.a.each(t,(function(t){S.a.isNumber(t.score)&&(S.a.isUndefined(a)||t.score>a)&&(a=t.score)})),l=O.a.addIfDefined(l,a)}));return{score:a,responsesValid:D,maxScore:l,isValid:D.length?S.a.all(D):void 0}}(t,r):function processLegacyResponsesPre2140(t,r){var a,l=t.question,E=t.response||{};l.validation=l.validation||{};var L,j,D=l.validation.valid_responses,q=E.value||[],B=Math.abs(S.a.isNumber(l.validation.penalty_score)?l.validation.penalty_score:0),G=function getResponseScoreArray(t){var r,a=parseFloat(t.validation.valid_score),l=t.validation.valid_responses,O=[];if(a=isNaN(a)?1:a,S.a.isArray(t.validation.valid_score))O=t.validation.valid_score;else for(var E=0;E<l.length;E++){r=[];for(var L=0;L<l[E].length;L++)r.push(a);O.push(r)}return O}(l),X=[],Z=0;S.a.each(q,(function(t,l){var E=D[l],j=0,q=!1;if(!S.a.isUndefined(t)&&null!==t&&""!==t&&S.a.isArray(E))for(var Z=0;Z<E.length;Z++){if(O.a.stringCompare(t,E[Z],r)){j=G[l][Z],a=E,q=!0;break}j=-1*B}X.push(q),L=(S.a.isUndefined(L)?0:L)+j})),S.a.each(G,(function(t){Z+=S.a.max(t)})),q.length&&!1===l.validation.partial_scoring&&L!==Z&&(L=0);q.length&&X.length&&(j=!1===l.validation.partial_scoring?S.a.all(X):S.a.any(X));return{score:L,responsesValid:X,suggestedResponse:a,maxScore:Z,isValid:j}}(t,r)}(t,l),O.a.normalizeScores(this.scoringData,t)}catch(t){this.scoringData={error:t}}this.serializedData=r}return this.cachedFlags=a,this}},{key:"flags",get:function get(){}}]),ClozeScorer}(E.a);function getOptions(t,r){var a={caseSensitive:!!t.case_sensitive,removeWhitespace:!!t.is_math&&r.stripWhiteSpaceForMath,matchAllPossibleResponses:!(!t.validation||!t.validation.match_all_possible_responses)};return delete r.stripWhiteSpaceForMath,S.a.extend(r,a)}r.a=D},141:function(t,r,a){"use strict";a.d(r,"a",(function(){return l})),a.d(r,"f",(function(){return S})),a.d(r,"e",(function(){return O})),a.d(r,"d",(function(){return E})),a.d(r,"c",(function(){return L})),a.d(r,"g",(function(){return j})),a.d(r,"b",(function(){return D}));var l={bold:{type:"button",icon:"lrn-icon-bold",command:"bold"},italic:{type:"button",icon:"lrn-icon-italic",command:"italic"},underline:{type:"button",icon:"lrn-icon-underline",command:"underline"},orderedList:{type:"button",icon:"lrn-icon-list-numbered",command:"insertOrderedList"},unorderedList:{type:"button",icon:"lrn-icon-list-bulleted",command:"insertUnorderedList"},removeFormat:{type:"button",icon:"lrn-icon-remove-format",command:"removeFormat"},alignLeft:{type:"button",icon:"lrn-icon-align-left",command:"alignLeftStyle"},alignCenter:{type:"button",icon:"lrn-icon-align-center",command:"alignCenterStyle"},alignRight:{type:"button",icon:"lrn-icon-align-right",command:"alignRightStyle"},alignJustify:{type:"button",icon:"lrn-icon-align-justify",command:"alignJustifyStyle"},superscript:{type:"button",icon:"lrn-icon-superscript",command:"superscript"},subscript:{type:"button",icon:"lrn-icon-subscript",command:"subscript"},insertHorizontalRule:{type:"button",icon:"lrn-icon-hr",command:"insertHorizontalRule"},indentIncrease:{type:"button",icon:"lrn-icon-indent-increase",command:"increaseIndent"},indentDecrease:{type:"button",icon:"lrn-icon-indent-decrease",command:"decreaseIndent"},textDirectionLtr:{type:"button",icon:"lrn-icon-text-direction-ltr",command:"textDirectionLtr"},textDirectionRtl:{type:"button",icon:"lrn-icon-text-direction-rtl",command:"textDirectionRtl"},blockquote:{type:"button",icon:"lrn-icon-blockquote",command:"insertBlockQuote"},table:{type:"createTable",icon:"lrn-icon-table"},editTable:{type:"editTable",icon:"lrn-icon-edit-table"},image:{type:"insertImage",icon:"lrn-icon-image",icons:{edit:"lrn-icon-image-edit",preview:"lrn-icon-image-preview",delete:"lrn-icon-image-delete"}},undo:{type:"button",icon:"lrn-icon-undo",command:"undo"},redo:{type:"button",icon:"lrn-icon-redo",command:"redo"},charactermap:{type:"charactermap"},characterMathMap:{type:"characterMathMap"},"|":{type:"divider"},formulaEditor:{type:"formulaEditor",icon:"lrn-icon-formula"}},S=12,O={SMALL:"small",MEDIUM:"medium",LARGE:"large",FULL_SIZE:"fullSize"},E={SMALL:200,MEDIUM:525,LARGE:1024,FULL_SIZE:3024},L={CREATE_FORMULA:"createFormula",EDIT_FORMULA:"editFormula"},j={FORMULA_EDITOR:"editFormula"},D=["image/jpg","image/jpeg","image/png","image/gif","image/bmp",".jfif"]},151:function(t,r,a){"use strict";var l=a(126),S=a.n(l);function Icon(t){var r=t.icon;return r?S.a.createElement("span",{className:"lrn_icon  ".concat(r),"aria-hidden":"true"}):null}function ScreenReader(t){var r=t.label;return r?S.a.createElement("span",{className:"sr-only"},"  ",r):null}r.a={Divider:function Divider(){return S.a.createElement("div",{className:"lrn-divider"})},Button:function Button(t){var r=t.disabled,a=t.isActive,l=t.name,O=t.icon,E=t.label,L=t.activeClassName,j=t.children,D=t.getRef,q=t.onMouseEnter,B=t.onMouseLeave,G=t.onMouseDown,X=t.onClick,Z=t.tabIndex,$="lrn_btn  lrn-editor-toolbar-button-".concat(l,"  ").concat(a?L:"","  ").concat(t.className||"");return S.a.createElement("button",{ref:function ref(t){return D&&D(t)},type:"button",className:$,"aria-label":E,"aria-pressed":a,disabled:r,onMouseEnter:function onMouseEnter(){return q(E)},onMouseLeave:B,onMouseDown:function mouseDownHandler(t){G&&G(),t.preventDefault()},onClick:function clickHandler(t){X&&X(),t.preventDefault()},tabIndex:Z},S.a.createElement(Icon,{icon:O}),S.a.createElement(ScreenReader,{label:E}),j)}}},152:function(t,r,a){"use strict";var l=a(126),S=a.n(l),O=a(185);a(187);r.a=function Modal(t){var r=t.afterRender,a=t.children,l=t.title,E=t.parentNode,L=t.modalIsOpen,j=t.onRequestClose,D=t.preventFocusWhenAppear,q="lrn-wysihtml-modal  ".concat(t.className||"");return S.a.createElement(O.a,{afterRender:r,preventFocusWhenAppear:D,isOpen:L,parentNode:E,className:"lrn-wysihtml-floating-modal",onRequestClose:j,shouldUpdatePosition:!1},S.a.createElement("div",{className:q,style:{opacity:1}},S.a.createElement("div",{className:"lrn-wysihtml-modal-dialog",role:"dialog",style:{opacity:1}},S.a.createElement("div",{className:"lrn-wysihtml-modal-title"},l),S.a.createElement("button",{type:"button",className:"lrn_btn lrn_btn_close",title:"Close","data-lrn-action":"close",onClick:j},S.a.createElement("span",{className:"sr-only"},"Close")),S.a.createElement("div",{className:"lrn-wysihtml-modal-content"},a))))}},154:function(t,r,a){"use strict";a.d(r,"a",(function(){return trapFocus}));var l=a(0),S=a.n(l),O=a(1),E=a.n(O),L=a(7),j=a.n(L),D=["a[href]",'input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","area[href]","iframe","object","embed"].join();function trapFocus(t,r){var a=document.activeElement,l=E()(t).find(D).filter(":visible"),O=S.a.first(l),L=S.a.last(l);if(l.length){var q=function handler(t){9===t.keyCode&&(t.shiftKey?document.activeElement===O&&(t.preventDefault(),L.focus()):document.activeElement===L&&(t.preventDefault(),O.focus()))};return(r&&S.a.isFunction(r.focus)?r:O).focus(),t.addEventListener("keydown",q),t.setAttribute("role","dialog"),j.a.isSafari||t.setAttribute("aria-modal","true"),function restore(r){t.removeEventListener("keydown",q),t.removeAttribute("role"),t.removeAttribute("aria-modal"),(r&&S.a.isFunction(r.focus)?r:a).focus()}}}},162:function(t,r,a){"use strict";var l=a(5),S=a.n(l),O=a(0),E=a.n(O),L=a(51),j=["toggle"],D=["Left","Right","Backspace","÷","×","-","+","="];switch(L.a.getOs()){case"osx":j=["shift","opt"];break;case"windows":case"unix":case"linux":j=["shift","alt"]}var q=S.a.Model.extend({keysForToggle:j,keyForCtrlToggle:"ctrl",ariaHiddenSymbols:D,defaults:{type:"write"},initialize:function initialize(){this.createDisplayableShortcut(),this.on("change:shortcut",this.createDisplayableShortcut,this)},createDisplayableShortcut:function createDisplayableShortcut(){var t=E.a.clone(this.get("shortcut"));"toggle"===E.a.first(t)&&(t=E.a.union(this.keysForToggle,E.a.rest(t,1))),"ctrl"===E.a.first(t)&&(t=E.a.union(["ctrl"],E.a.rest(t))),t&&t[0]===this.get("title")&&(t=[]),this.set("displayableShortcut",t)},renderLabelAsLatex:function renderLabelAsLatex(){var t=this.get("label_latex");return E.a.isBoolean(t)?t:this.get("label").indexOf("\\")>-1},isPlaceholder:function isPlaceholder(){return""===this.get("id")},isFunctional:function isFunctional(){return!("addmatrixcol"===this.get("name")||"addmatrixrow"===this.get("name"))&&"keystroke"===this.get("type")},hasOwnStyle:function hasOwnStyle(){return!!this.get("style")},isAria:function isAria(t){return E.a.contains(D,t)}});r.a=S.a.Collection.extend({model:q,get:function get(t){return S.a.Collection.prototype.get.apply(this,arguments)||this.find((function(r){return E.a.contains(r.get("aliases"),t)}))},add:function add(t){this.isUnique(t)&&S.a.Collection.prototype.add.apply(this,arguments)},isUnique:function isUnique(t){var r=t.aliases&&E.a.union(t.aliases,t.id)||[];return!this.any((function(a){return t.id===a.id||E.a.intersection(r,a.get("aliases")).length}))},getShortcutsMap:function getShortcutsMap(){var t={};return this.each((function(r){var a=r.get("shortcut");"toggle"===E.a.first(a)&&(t[a[1]]=r)})),t},getGroups:function getGroups(){var t=E.a.unique(this.pluck("group")),r=this;return E.a.map(t,(function(t){return r.where({group:t})}))},getFirstInEachGroup:function getFirstInEachGroup(){return E.a.map(this.getGroups(),E.a.first)}})},167:function(t,r,a){"use strict";a.d(r,"a",(function(){return j}));var l=a(0),S=a.n(l),O=a(3),E=a(13);function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}var L="spokenmathWorker";var j=new(function(){function SingletonWorker(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,SingletonWorker),this._loading=!1,this._collections=[],this._resolveCollections=this._resolveCollections.bind(this),this.getPostMessage=r.getPostMessage.bind(this),this.processReceivedMessage=r.processReceivedMessage.bind(this)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(SingletonWorker,[{key:"process",value:function process(t){var r=this,a=this._collections;return new O.default((function(l){a.push({data:t,resolve:l}),r._loading||r._loadWorker()}))}},{key:"_loadWorker",value:function _loadWorker(){var t=this;this._loading=!0,function loadWorker(t){return new O.default((function(r){E.a.getExposedExternalBundle(t)().then((function(t){r(t)}))}))}(L).then((function(r){var a=new r,l=t._collections,O=S.a.pluck(l,"data");a.postMessage(t.getPostMessage(O)),a.addEventListener("message",(function(r){var S=r.data;a.terminate(),t._loading=!1,t._resolveCollections(t.processReceivedMessage(S)),l.length&&t._loadWorker()}))}))}},{key:"_resolveCollections",value:function _resolveCollections(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=this._collections;t.length&&r.length;){var a=r.shift(),l=a.resolve;l(t.shift())}}}]),SingletonWorker}())(L,{getPostMessage:function getPostMessage(t){return{latexes:t}},processReceivedMessage:function processReceivedMessage(t){return t.value}})},172:function(t,r,a){"use strict";var l=a(1),S=a.n(l),O=a(0),E=a.n(O),L=function ScaleCompensator(t,r){var a=this;this.id=E.a.uniqueId("lrn_scale_compensator_"),this.$el=t,this.opts=r,this.scale=E.a.debounce((function(){var t=E.a.bind(a.scaleAndPosition,a);window.requestAnimationFrame?window.requestAnimationFrame(t):t()}),r.debounceTime)};E.a.extend(L.prototype,{start:function start(t){return S()(window).on("resize."+this.id+" orientationchange."+this.id+" scroll."+this.id,this.scale),this},stop:function stop(){S()(window).off("."+this.id)},scaleAndPosition:function scaleAndPosition(){var t=document.documentElement.clientWidth,r=document.documentElement.clientHeight,a=window.innerWidth,l=window.innerHeight,S=a/t,O="scale("+S+") translateX("+window.pageXOffset/S+"px) translateY("+-(r-(window.pageYOffset+l))/S+"px)";S>.99?(this.$el.removeClass("lrn_scalable"),O=""):this.$el.addClass("lrn_scalable"),this.setTransform(O),this.opts.onUpdate(S)},setTransform:function setTransform(t){return this.$el.css({transform:t,"-moz-transform":t,"-o-transform":t,"-webkit-transform":t,"-ms-transform":t}),this},destroy:function destroy(){this.stop(),this.setTransform("").$el.removeClass("lrn_scalable"),this.$el=this.opts=null}}),r.a=L},173:function(t,r,a){"use strict";var l=a(5),S=a.n(l),O=a(126),E=a.n(O),L=a(129),j=a.n(L),D=a(157);function _extends(){return(_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var q=function(){function CustomDropdown(t,r){var a=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,CustomDropdown),_defineProperty(this,"on",S.a.Events.on),_defineProperty(this,"once",S.a.Events.once),_defineProperty(this,"off",S.a.Events.off),_defineProperty(this,"trigger",S.a.Events.trigger),_defineProperty(this,"_selectedIndex",-1),_defineProperty(this,"_value",null),_defineProperty(this,"_onChange",(function(t){var r=t.index,l=t.value;a._selectedIndex=r,a._value=l,a.trigger("change",{value:l,selectedIndex:r})})),_defineProperty(this,"_onBlur",(function(){a.trigger("blur")})),_defineProperty(this,"_onUpdateComplete",(function(){a.trigger("updateComplete")})),this.el=t,this.menuOptions=r,this.options=l,this._render()}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(CustomDropdown,[{key:"open",value:function open(t){this.component.open(t)}},{key:"close",value:function close(){this.component.close()}},{key:"isOpen",value:function isOpen(){return this.component.isOpen()}},{key:"_render",value:function _render(){var t=this.menuOptions,r=this.options;this.component=j.a.render(E.a.createElement(D.a,_extends({},r,{containerClass:"lrn_theme_primary",menuOptions:t,onChange:this._onChange,onBlur:this._onBlur,updateComplete:this._onUpdateComplete,selectedIndex:this.selectedIndex})),this.el)}},{key:"selectedIndex",get:function get(){return this._selectedIndex},set:function set(t){this._selectedIndex=t,this.component.setSelectedIndex(t)}},{key:"value",get:function get(){return this._value}}]),CustomDropdown}();r.a=q},197:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(18),E={jpg:{jpg:"image/jpeg",jpeg:"image/jpeg",jfif:"image/jpeg"},png:"image/png",gif:"image/gif",bmp:"image/bmp",pdf:"application/pdf",csv:"text/csv",rtf:"application/rtf",txt:"text/plain",xps:"application/vnd.ms-xpsdocument",ms_word:{doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroenabled.12",dotm:"application/vnd.ms-word.template.macroenabled.12"},ms_excel:{xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12"},ms_powerpoint:{ppt:"application/vnd.ms-powerpoint",pps:"application/vnd.ms-powerpoint",pot:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",potm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppsm:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"},ms_publisher:{pub:"application/vnd.ms-publisher"},open_office:{odf:"application/vnd.oasis.opendocument.formula",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet",odp:"application/vnd.oasis.opendocument.presentation"},video:{mp4:"video/mp4",mov:"video/quicktime",webm:"video/webm",avi:"video/avi",asf:"video/x-ms-asf",wmv:"video/x-ms-wmv"},zip:"application/zip",matlab:{m:"text/plain",fig:"application/octet-stream",mat:"application/octet-stream"},altera_quartus:{bdf:"text/plain",bsf:"text/plain"},verilog:{sv:"text/plain"},c:"text/plain",h:"text/plain",s:"text/plain",v:"text/plain",cpp:"text/plain",assembly:{asm:"text/plain"}},L={createBasePath:function createBasePath(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new Date(t.get("security").getTimestamp()),l=a.getUTCFullYear(),S=new Date(Date.UTC(l,0,1)),O=Math.ceil((a-S)/864e5),E=t.get("consumer"),L=E.get("id"),j=t.get("user_id"),D=r?"userupload/":"";return"".concat(D).concat(L,"/questionresponse/").concat(l,"/").concat(O,"/").concat(L,"_").concat(j)},createFullPath:function createFullPath(t,r,a,l){var S=this.createBasePath(t,l),E=O.a.v4(),L=this.getValidExtension(a);return"".concat(S,"_").concat(r,"/").concat(E,".").concat(L)},getValidExtension:function getValidExtension(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=this.getFlattenedExtensions(),a=t.lastIndexOf(".")+1,l=a>0?t.slice(a).toLowerCase():"";return r[l]?l:""},getFlattenedExtensions:function getFlattenedExtensions(){var t={};return S.a.mapObject(E,(function buildExtensionMime(r,a){S.a.isString(r)?t[a]=r:S.a.isObject(r)&&S.a.mapObject(r,buildExtensionMime)})),t},getExtensions:function getExtensions(t){var r=E[t],a=[];return S.a.isString(r)?a.push(t):S.a.isObject(r)&&(a=S.a.keys(r)),a},getMimeTypeByExtension:function getMimeTypeByExtension(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=this.getFlattenedExtensions(),a=r[t.toLowerCase()];return a||""}};r.a=L},199:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(178);r.a=function getOrderedListBasedOnQuestion(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(!r.shuffle_options)return S.a.deepClone(t);if(!S.a.isString(a))throw new Error("getOrderedListBasedOnQuestion requires a seed");return Object(O.a)({seed:a,exclusions:t,questionMetadata:r.metadata,originalOrder:t})}},202:function(t,r,a){"use strict";a.d(r,"d",(function(){return getSpellCheckValue})),a.d(r,"a",(function(){return getAutoCapitalizeValue})),a.d(r,"b",(function(){return getAutoCompleteValue})),a.d(r,"c",(function(){return getAutoCorrectValue}));var l=a(0),S=a.n(l);function getSpellCheckValue(t){return S.a.isBoolean(t)?t:!!S.a.isString(t)&&"true"===t}function getAutoCapitalizeValue(t){return defaultCheck(t)}function getAutoCompleteValue(t){return defaultCheck(t)}function getAutoCorrectValue(t){return defaultCheck(t)}function defaultCheck(t){return S.a.isString(t)?"true"===t?"on":"off":S.a.isBoolean(t)&&t?"on":"off"}},203:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(5),E=a.n(O),L=a(205),j=(a(3),a(9),a(6)),D=a(197),q="".concat(j.a.apiHost,"/asset/view"),B="".concat(j.a.apiHost,"/asset/viewProcessed"),G={uploading:"uploading",failed:"failed",complete:"complete"};r.a=E.a.Model.extend({UPLOAD_STATUS:G,initialize:function initialize(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.file,l=r.eventBus,O=r.activity,E=r.securityObject,L=r.hasVideoSupport,j=r.hasVideoRecordingSupport,D=r.assetExtension,q=r.assetMimeType,B=r.assetPath,X=r.responseId;if(this.options=r,this.eventBus=l,this.activity=O,this.securityToken=this._uriEncodeObject(E),this.responseId=X,this.hasVideoSupport=L,this.hasVideoRecordingSupport=j,this.set("id",S.a.uniqueId()),!S.a.isUndefined(a)&&this.validateFile(a)){if(this.file=a,this.set({name:a.name,originalName:a.name,extension:D,size:a.size,mimetype:q||a.type,status:G.uploading,hasUploaded:this.hasUploaded(),description:"",hasFailed:!1,hasNotifiedFailure:!0,assetPath:B}),(j||L)&&this.isVideoFile()){var Z=B.substr(0,B.lastIndexOf(".")),$=this.get("name").substr(0,this.get("name").lastIndexOf("."));this.set({assetProcessedPath:"".concat(Z,".").concat("mp4"),extension:"mp4",name:"".concat($,".").concat("mp4")})}this.uploadAndHandle()}else this.set({status:G.complete,hasUploaded:!0});this.set("colorClass",this.getIconColorClass(this.get("extension")))},validateFile:function validateFile(t){return t instanceof File||t instanceof Blob&&!!t.name},hasUploaded:function hasUploaded(){return this.get("status")===G.complete},upload:function upload(){return L.a.upload({file:this.file,activity:this.activity,responseId:this.responseId,extension:this.get("extension"),mimeType:this.get("mimetype"),assetPath:this.get("assetPath"),assetProcessedPath:this.get("assetProcessedPath"),hasVideoSupport:this.hasVideoSupport})},uploadAndHandle:function uploadAndHandle(){var t=this;return this.upload().then((function(){t.handleUploadSuccess()})).catch((function(){t.handleUploadFail()}))},abortUpload:function abortUpload(){L.a.abort(this.get("assetPath"))},isSubmitPractice:function isSubmitPractice(){return this.options.activity.get("type")===this.activity.TYPE.SUBMIT_PRACTICE},isVideoFile:function isVideoFile(){var t=D.a.getExtensions("video"),r=this.get("extension");return S.a.contains(t,r)},handleUploadSuccess:function handleUploadSuccess(){var t=this.options.onUploadSuccess;this.set({status:G.complete,hasUploaded:!0,hasNotifiedFailure:!0}),S.a.isUndefined(this.eventBus)||this.eventBus.trigger("fileUploaded",this),t&&t()},handleUploadFail:function handleUploadFail(){var t=this.options.onUploadError;this.set({status:G.failed,hasFailed:!0,hasNotifiedFailure:!1}),S.a.isUndefined(this.eventBus)||this.eventBus.trigger("fileUploadFailed",this),t&&t()},getViewUrl:function getViewUrl(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={assetPath:this.get("assetPath")},a=q;this.get("assetProcessedPath")&&(r.assetProcessedPath=this.get("assetProcessedPath"),r.assetOriginalName=this.get("originalName"),a=B),t&&(r.assetName=this.get("name"));var l=this._uriEncodeObject(r);return"".concat(a,"?action=get&security=").concat(this.securityToken,"&usrequest=").concat(l)},retryUpload:function retryUpload(){this.get("hasFailed")&&(this.set({hasFailed:!1,status:G.uploading}),this.uploadAndHandle())},clearFailNotification:function clearFailNotification(){this.set("hasNotifiedFailure",!0)},getIconColorClass:function getIconColorClass(t){var r="default";switch(t){case"png":case"gif":case"pdf":case"csv":case"rtf":case"txt":case"xps":r=t;break;case"jpg":case"jpeg":r="jpg";break;case"doc":case"docx":case"dot":case"dotx":case"docm":case"dotm":r="word";break;case"xls":case"xlsx":case"xlt":case"xltm":case"xlsm":r="excel";break;case"ppt":case"pps":case"pot":case"pptx":case"pptm":case"potx":case"potm":case"ppsx":case"ppsm":r="powerpoint";break;case"pub":r="publisher";break;case"odf":case"odt":case"ods":case"odp":r="open-office";break;case"mp4":case"mov":case"avi":r="video"}return"".concat("lrn-file-").concat(r)},updateDescription:function updateDescription(t){this.set({description:t})},_uriEncodeObject:function _uriEncodeObject(t){return encodeURIComponent(JSON.stringify(t))}})},205:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=(a(240),a(3)),E=(a(18),a(9));function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}var L=function(){function S3(){var t=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,S3),this.promise=new O.default((function(r,a){t.resolve=r,t.reject=a}))}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(S3,[{key:"request",value:function request(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.send(t),this.promise}},{key:"handleSuccess",value:function handleSuccess(t){t.target.status<400?this.resolve(t):this.handleFailure(t)}},{key:"handleFailure",value:function handleFailure(t){this.reject(t.target.status)}},{key:"send",value:function send(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=new FormData,l=r.data.data.file,O="".concat(r.data.data.name,".").concat(r.data.data.extension),E=new XMLHttpRequest,L=l.slice(0,l.size,l.type),j=0;S.a.each(r.formInputs,(function(t,r){a.append(r,t)})),a.append("file",L,O),E.addEventListener("load",(function(r){t.handleSuccess(r)})),E.addEventListener("error",(function(r){t.handleFailure(r)})),E.upload.addEventListener("progress",(function(t){j=t.loaded})),E.open(r.formAttributes.method,r.formAttributes.action),E.send(a),r.onSendStart&&r.onSendStart({abort:function abort(){return E.abort()},getUploadedBytes:function getUploadedBytes(){return j}})}}]),S3}(),j=a(7),D=(a.n(j).a.isMicrosoft,[]),q=[],B=!1,G=[],X={MAX_ATTEMPTS:3,RETRY_DELAY:8e3,upload:function upload(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.validate(r);var a=r.activity,l=r.extension,S=r.file,E=r.assetPath,L=r.mimeType,j=a.get("security"),D={extension:l,file:S,assetPath:E,mimeType:L};return new O.default((function(r,a){var l={security:j.getRequestParameters(),data:D,success:function success(){t.removeFromQueue(l),t.resumeQueue(),r(D)},failure:function failure(r){t.removeFromQueue(l),t.resumeQueue(),a(r)}};t.addToQueue(l)}))},validate:function validate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.file)throw new Error("FileUpload missing file");if(!S.a.isObject(t.activity))throw new Error("FileUpload missing activity");if(!S.a.isString(t.responseId))throw new Error("FileUpload missing responseId");if(!S.a.isString(t.extension))throw new Error("FileUpload missing file extension")},addToQueue:function addToQueue(t){if(this.getQueueItem(t.data.assetPath))throw new Error("Attempting to add duplicate assetPath to upload queue: ".concat(t.data.assetPath));G.push({config:t,isProcessing:!1,attempts:0}),this.processQueue()},abort:function abort(t){var r=this.getQueueItem(t);if(r){var a=r.config.s3Upload;a&&a.abort(),this.removeFromQueue(r),r.isProcessing&&this.resumeQueue()}},removeFromQueue:function removeFromQueue(t){clearTimeout(t.retryTimeoutId),G=S.a.filter(G,(function(r){return t.data.assetPath!==r.config.data.assetPath}))},resumeQueue:function resumeQueue(){B=!1,this.processQueue()},processQueue:function processQueue(){if(!B){var t=S()(G).find((function(t){return!t.isProcessing}));t&&this.processQueueItem(t)}},processQueueItem:function processQueueItem(t){var r=this,a=t.config,l=a.data,O=l.assetPath,L=l.mimeType;S.a.contains(G,t)&&(B=!0,t.isProcessing=!0,t.attempts++,E.a.request({url:"/asset/uploadform",security:a.security,action:E.a.ACTION.GET,data:{assetPath:O,mimeType:L},success:function success(a){r.handleTokenSuccess(t,a)},failure:function failure(){r.handleFailure(t)}}))},handleTokenSuccess:function handleTokenSuccess(t,r){var a=this,l=t.config;if(S.a.contains(G,t)){var O=new L;S.a.getNested(r,"response.data")?O.request({formAttributes:r.response.data.formAttributes,formInputs:r.response.data.formInputs,data:l,onSendStart:function onSendStart(t){l.s3Upload=t}}).then((function(){l.success()})).catch((function(){a.handleFailure(t)})):this.handleFailure(t)}},handleFailure:function handleFailure(t){var r=this;t.attempts<this.MAX_ATTEMPTS?(clearTimeout(t.retryTimeoutId),t.retryTimeoutId=setTimeout((function(){return r.processQueueItem(t)}),this.RETRY_DELAY)):t.config.failure.call(null,"Could not upload after ".concat(this.MAX_ATTEMPTS," attempts"))},isSafeToUnload:function isSafeToUnload(){var t=S.a.find(G,(function(t){return t.isProcessing}));return!B&&!t},isAssetPathInQueue:function isAssetPathInQueue(t){return S.a.some(G,(function(r){return r.config.data.assetPath===t}))},getQueueItem:function getQueueItem(t){return S()(G).find((function(r){return t===r.config.data.assetPath}))},getUploadStatus:function getUploadStatus(){var t=0,r=0;return S.a.each(q,(function(a){a.each((function(a){r+=a.get("size"),a.get("hasUploaded")&&(t+=a.get("size"))}))})),G.forEach((function(r){var a=r.config.s3Upload;a&&(t+=a.getUploadedBytes())})),{uploadComplete:this.isSafeToUnload(),totalBytes:r,bytesUploaded:t}},hookToActivity:function hookToActivity(t,r){S.a.contains(q,r)||q.push(r),S.a.isEmpty(t)||S.a.contains(D,t)||(t.hooks.unload.push(this.isSafeToUnload),t.hooks.saveProgress.push(S.a.bind(this.getUploadStatus,this)),D.push(t))}};r.a=X},208:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=["syntax","argument"],E=["stringMatch"];String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),r.a={processSpec:function processSpec(t){var r,a,l;if(S.a.isObject(t)&&"equivSyntax"===t.method)return S.a.isObject(t.options)&&S.a.isString(t.options.syntax)&&""!==t.options.syntax||!t.value?("\\number",l={method:"equivSyntax",value:""},a=t.options.syntax||"\\number",l.value="\\format{"+a,S.a.isNumber(t.options.argument)&&(l.value+="{"+t.options.argument+"}"),l.value+="}",S.a.isBoolean(t.options.ignoreText)&&(l.options={ignoreText:t.options.ignoreText}),l):t;for(r=0;r<O.length;r++)S.a.isObject(t.options)&&!S.a.isUndefined(t.options[O[r]])&&delete t.options[O[r]];return t},useMathCore:function useMathCore(t){return!(S.a.isObject(t)&&-1!==S.a.indexOf(E,t.method))},validate:function validate(t,r){var a,l,O,E,L,j={errorCode:0,location:void 0,message:"Normal completion",result:!1};return S.a.isObject(t)&&S.a.isString(r)&&"stringMatch"===t.method&&S.a.isString(t.value)&&(a=t.value.replace(/\\\s/g," "),l=r.replace(/\\\s/g," "),E=!S.a.isObject(t.options)||S.a.isObject(t.options)&&!1!==t.options.ignoreLeadingAndTrailingSpaces,L=!S.a.isObject(t.options)||S.a.isObject(t.options)&&!1!==t.options.treatMultipleSpacesAsOne,O=S.a.isObject(t.options)&&!0===t.options.inverseResult,E&&(a=a.trim(),l=l.trim()),L&&(a=a.replace(/\s+/g," "),l=l.replace(/\s+/g," ")),j.result=a===l,O&&(j.result=!j.result)),j}}},209:function(t,r,a){"use strict";a.d(r,"a",(function(){return applySelectiveFontBoost}));var l=a(7),S=a.n(l);function applySelectiveFontBoost(t,r){t&&!r&&S.a.isWindows&&[].slice.call(t.querySelectorAll(".mq-math-mode span")).filter((function(t){return"−"===t.textContent})).forEach((function(t){t.style.fontSize="120%"}))}},211:function(t,r,a){"use strict";a(5);var l=a(0),S=a.n(l),O=a(14),E=a.n(O),L=a(52),j=a(233),D=a.n(j),q=a(138);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=_getPrototypeOf(t);if(r){var S=_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(ClozeAssociationScorer,t);var r=_createSuper(ClozeAssociationScorer);function ClozeAssociationScorer(){return _classCallCheck(this,ClozeAssociationScorer),r.apply(this,arguments)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(ClozeAssociationScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ClozeAssociationScorer}(q.a);function clozeinlinetext_scoring_typeof(t){return(clozeinlinetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function clozeinlinetext_scoring_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function clozeinlinetext_scoring_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function clozeinlinetext_scoring_setPrototypeOf(t,r){return(clozeinlinetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function clozeinlinetext_scoring_createSuper(t){var r=function clozeinlinetext_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=clozeinlinetext_scoring_getPrototypeOf(t);if(r){var S=clozeinlinetext_scoring_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return clozeinlinetext_scoring_possibleConstructorReturn(this,a)}}function clozeinlinetext_scoring_possibleConstructorReturn(t,r){return!r||"object"!==clozeinlinetext_scoring_typeof(r)&&"function"!=typeof r?function clozeinlinetext_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function clozeinlinetext_scoring_getPrototypeOf(t){return(clozeinlinetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=function(t){!function clozeinlinetext_scoring_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&clozeinlinetext_scoring_setPrototypeOf(t,r)}(ClozeInlinetextScorer,t);var r=clozeinlinetext_scoring_createSuper(ClozeInlinetextScorer);function ClozeInlinetextScorer(){return clozeinlinetext_scoring_classCallCheck(this,ClozeInlinetextScorer),r.apply(this,arguments)}return function clozeinlinetext_scoring_createClass(t,r,a){return r&&clozeinlinetext_scoring_defineProperties(t.prototype,r),a&&clozeinlinetext_scoring_defineProperties(t,a),t}(ClozeInlinetextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!0}}}]),ClozeInlinetextScorer}(q.a);function clozedropdown_scoring_typeof(t){return(clozedropdown_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function clozedropdown_scoring_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function clozedropdown_scoring_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function clozedropdown_scoring_setPrototypeOf(t,r){return(clozedropdown_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function clozedropdown_scoring_createSuper(t){var r=function clozedropdown_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=clozedropdown_scoring_getPrototypeOf(t);if(r){var S=clozedropdown_scoring_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return clozedropdown_scoring_possibleConstructorReturn(this,a)}}function clozedropdown_scoring_possibleConstructorReturn(t,r){return!r||"object"!==clozedropdown_scoring_typeof(r)&&"function"!=typeof r?function clozedropdown_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function clozedropdown_scoring_getPrototypeOf(t){return(clozedropdown_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=function(t){!function clozedropdown_scoring_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&clozedropdown_scoring_setPrototypeOf(t,r)}(ClozeDropdownScorer,t);var r=clozedropdown_scoring_createSuper(ClozeDropdownScorer);function ClozeDropdownScorer(){return clozedropdown_scoring_classCallCheck(this,ClozeDropdownScorer),r.apply(this,arguments)}return function clozedropdown_scoring_createClass(t,r,a){return r&&clozedropdown_scoring_defineProperties(t.prototype,r),a&&clozedropdown_scoring_defineProperties(t,a),t}(ClozeDropdownScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1,strictEquality:!0,trimWhiteSpace:!0}}}]),ClozeDropdownScorer}(q.a);function clozetext_scoring_typeof(t){return(clozetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function clozetext_scoring_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function clozetext_scoring_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function clozetext_scoring_setPrototypeOf(t,r){return(clozetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function clozetext_scoring_createSuper(t){var r=function clozetext_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=clozetext_scoring_getPrototypeOf(t);if(r){var S=clozetext_scoring_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return clozetext_scoring_possibleConstructorReturn(this,a)}}function clozetext_scoring_possibleConstructorReturn(t,r){return!r||"object"!==clozetext_scoring_typeof(r)&&"function"!=typeof r?function clozetext_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function clozetext_scoring_getPrototypeOf(t){return(clozetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z=function(t){!function clozetext_scoring_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&clozetext_scoring_setPrototypeOf(t,r)}(ClozeTextScorer,t);var r=clozetext_scoring_createSuper(ClozeTextScorer);function ClozeTextScorer(){return clozetext_scoring_classCallCheck(this,ClozeTextScorer),r.apply(this,arguments)}return function clozetext_scoring_createClass(t,r,a){return r&&clozetext_scoring_defineProperties(t.prototype,r),a&&clozetext_scoring_defineProperties(t,a),t}(ClozeTextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!0}}}]),ClozeTextScorer}(q.a);function imageclozeassociation_scoring_typeof(t){return(imageclozeassociation_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function imageclozeassociation_scoring_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function imageclozeassociation_scoring_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function imageclozeassociation_scoring_setPrototypeOf(t,r){return(imageclozeassociation_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function imageclozeassociation_scoring_createSuper(t){var r=function imageclozeassociation_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=imageclozeassociation_scoring_getPrototypeOf(t);if(r){var S=imageclozeassociation_scoring_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return imageclozeassociation_scoring_possibleConstructorReturn(this,a)}}function imageclozeassociation_scoring_possibleConstructorReturn(t,r){return!r||"object"!==imageclozeassociation_scoring_typeof(r)&&"function"!=typeof r?function imageclozeassociation_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function imageclozeassociation_scoring_getPrototypeOf(t){return(imageclozeassociation_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $=function(t){!function imageclozeassociation_scoring_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&imageclozeassociation_scoring_setPrototypeOf(t,r)}(ImageClozeAssociationScorer,t);var r=imageclozeassociation_scoring_createSuper(ImageClozeAssociationScorer);function ImageClozeAssociationScorer(){return imageclozeassociation_scoring_classCallCheck(this,ImageClozeAssociationScorer),r.apply(this,arguments)}return function imageclozeassociation_scoring_createClass(t,r,a){return r&&imageclozeassociation_scoring_defineProperties(t.prototype,r),a&&imageclozeassociation_scoring_defineProperties(t,a),t}(ImageClozeAssociationScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeAssociationScorer}(q.a);function imageclozedropdown_scoring_typeof(t){return(imageclozedropdown_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function imageclozedropdown_scoring_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function imageclozedropdown_scoring_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function imageclozedropdown_scoring_setPrototypeOf(t,r){return(imageclozedropdown_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function imageclozedropdown_scoring_createSuper(t){var r=function imageclozedropdown_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=imageclozedropdown_scoring_getPrototypeOf(t);if(r){var S=imageclozedropdown_scoring_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return imageclozedropdown_scoring_possibleConstructorReturn(this,a)}}function imageclozedropdown_scoring_possibleConstructorReturn(t,r){return!r||"object"!==imageclozedropdown_scoring_typeof(r)&&"function"!=typeof r?function imageclozedropdown_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function imageclozedropdown_scoring_getPrototypeOf(t){return(imageclozedropdown_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Q=function(t){!function imageclozedropdown_scoring_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&imageclozedropdown_scoring_setPrototypeOf(t,r)}(ImageClozeDropdownScorer,t);var r=imageclozedropdown_scoring_createSuper(ImageClozeDropdownScorer);function ImageClozeDropdownScorer(){return imageclozedropdown_scoring_classCallCheck(this,ImageClozeDropdownScorer),r.apply(this,arguments)}return function imageclozedropdown_scoring_createClass(t,r,a){return r&&imageclozedropdown_scoring_defineProperties(t.prototype,r),a&&imageclozedropdown_scoring_defineProperties(t,a),t}(ImageClozeDropdownScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeDropdownScorer}(q.a);function imageclozetext_scoring_typeof(t){return(imageclozetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function imageclozetext_scoring_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function imageclozetext_scoring_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function imageclozetext_scoring_setPrototypeOf(t,r){return(imageclozetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function imageclozetext_scoring_createSuper(t){var r=function imageclozetext_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=imageclozetext_scoring_getPrototypeOf(t);if(r){var S=imageclozetext_scoring_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return imageclozetext_scoring_possibleConstructorReturn(this,a)}}function imageclozetext_scoring_possibleConstructorReturn(t,r){return!r||"object"!==imageclozetext_scoring_typeof(r)&&"function"!=typeof r?function imageclozetext_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function imageclozetext_scoring_getPrototypeOf(t){return(imageclozetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ee=function(t){!function imageclozetext_scoring_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&imageclozetext_scoring_setPrototypeOf(t,r)}(ImageClozeTextScorer,t);var r=imageclozetext_scoring_createSuper(ImageClozeTextScorer);function ImageClozeTextScorer(){return imageclozetext_scoring_classCallCheck(this,ImageClozeTextScorer),r.apply(this,arguments)}return function imageclozetext_scoring_createClass(t,r,a){return r&&imageclozetext_scoring_defineProperties(t.prototype,r),a&&imageclozetext_scoring_defineProperties(t,a),t}(ImageClozeTextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeTextScorer}(q.a),te=a(4),ne=a(158);r.a=L.a.extend({imageTemplate:D.a,RESPONSE_MARKER_REGEXP:"{{response}}",initialize:function initialize(){L.a.prototype.initialize.apply(this,arguments),this.updateValidationObject()},validateStartup:function validateStartup(){L.a.prototype.validateStartup.call(this),this.get("question").template&&(this.get("question").template=E.a.sanitizeHTML(this.get("question").template))},processResponseValue:function processResponseValue(t){this.hasResponse()||this.set({response:{value:[],type:this.RESPONSE_TYPE.ARRAY}},{silent:!0}),this.get("response").value=t},isDefaultValidResponseValue:function isDefaultValidResponseValue(t){return 0===S.a.filter(t,(function(t){return t||0===t})).length},getScorerClass:function getScorerClass(){var t,r=this.TYPE;switch(this.get("type")){case r.CLOZETEXT:t=Z;break;case r.CLOZEASSOCIATION:t=B;break;case r.CLOZEDROPDOWN:t=X;break;case r.CLOZEINLINETEXT:t=G;break;case r.IMAGECLOZEASSOCIATION:t=$;break;case r.IMAGECLOZEDROPDOWN:t=Q;break;case r.IMAGECLOZETEXT:t=ee}return t},validateResponse:function validateResponse(){var t=this.getScorer(),r=t.error();if(!r)return t.validateIndividualResponses();if("MathQuestionException"!==r.name)throw r;"user"!==r.location&&te.a.exception({code:10019,detail:r.message,i18n:this.activity.get("i18n")})},isImageCloze:function isImageCloze(){var t=this.TYPE;return S.a.include([t.IMAGECLOZETEXT,t.IMAGECLOZEASSOCIATION,t.IMAGECLOZEDROPDOWN,t.IMAGECLOZEFORMULA,t.IMAGECLOZECHEMISTRY],this.get("type"))},getDynamicShuffleSeed:function getDynamicShuffleSeed(){return new ne.a(this).getDynamicSeed()},getContentTemplate:function getContentTemplate(){if(this.isImageCloze()){var t=D.a,r=this.get("question"),a={img_alt:!!r.img_alt&&r.img_alt,img_title:!!r.img_title&&r.img_title,img_src:r.img_src,response_positions:r.response_positions,response_container:r.response_container,padding:!!r.padding&&r.padding,question_type:this.get("type")};return r.image&&(r.image.src&&(a.img_src=r.image.src),r.image.alt&&(a.img_alt=r.image.alt),r.image.title&&(a.img_title=r.image.title)),t({displayLogic:a})}return this.get("question").template},getImageClozeAriaLabels:function getImageClozeAriaLabels(){if(this.isImageCloze())return S.a.isUndefined(this._ariaLabels)&&(this._ariaLabels=S.a.map(this.get("question").aria_labels,(function(t){return S.a.escape(t)}))),this._ariaLabels},updateValidationObject:function updateValidationObject(){var t=this.get("question");if(t.hasOwnProperty("valid_responses")){var r,a,l,O=[],E=[],L=!0;S.a.each(t.valid_responses,(function(t,j){O[j]=[],E[j]=[],S.a.each(t,(function(t,D){a=S.a.isUndefined(t.value)?null:t.value,null!==(l=S.a.isUndefined(t.score)?null:t.score)&&(l=parseInt(l,10)),O[j].push(a),E[j].push(l),S.a.isUndefined(r)?r=l:L&=r===l}))})),delete t.valid_responses,t.validation={valid_responses:O},r=L?r:E,S.a.isNull(r)||(t.validation.valid_score=r),this.set({question:t},{silent:!0}),this.trackEvent("Updated pre v1.24.0 question object.")}},getCorrectByIndex:function getCorrectByIndex(t){if(this.canValidateResponse())return this.getValidResponse().value[t]},isVerticalTopContainer:function isVerticalTopContainer(){return S.a.isUndefined(this._verticalTop)&&(this._verticalTop=!!this.isImageCloze()&&!!S.a.getNested(this.get("question"),"response_container.vertical_top")),this._verticalTop},getIgnoreLeadingAndTrailingSpaces:function getIgnoreLeadingAndTrailingSpaces(){var t=this.get("question").ignore_leading_and_trailing_spaces;return!S.a.isBoolean(t)||t}})},232:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(5),E=a.n(O),L=a(203);r.a=E.a.Collection.extend({model:L.a,comparator:"name",ATTRS_FOR_RESPONSE:["name","description","originalName","extension","size","assetPath","assetProcessedPath"],getResponseValueFormat:function getResponseValueFormat(){var t=this,r=this.where({hasUploaded:!0});return S()(r).map((function(r){return r.pick(t.ATTRS_FOR_RESPONSE)}))}})},233:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn_imagecloze_container"'+(null==(__t=displayLogic.padding?' style="padding: '+displayLogic.padding+'px"':"")?"":__t)+' ><img draggable="false"',displayLogic.img_alt&&(__p+='alt="'+(null==(__t=displayLogic.img_alt)?"":_.escape(__t))+'"'),__p+="",displayLogic.img_title&&(__p+='title="'+(null==(__t=displayLogic.img_title)?"":_.escape(__t))+'"'),__p+='class="lrn_imagecloze_image"src="'+(null==(__t=displayLogic.img_src)?"":_.escape(__t))+'">',_.each(displayLogic.response_positions,(function(t){__p+='<div class="lrn_imagecloze_response" style="left:'+(null==(__t=t.x)?"":__t)+"%;top:"+(null==(__t=t.y)?"":__t)+"%;",displayLogic.response_container&&"imageclozeassociation"===displayLogic.question_type&&(__p+="",displayLogic.response_container.hasOwnProperty("height")&&(__p+="height:"+(null==(__t=displayLogic.response_container.height)?"":__t)+";"),__p+=""),__p+='">{{response}}</div>'})),__p+="</div>";return __p}},239:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(205),E=a(203),L=a(232),j=a(197),D=a(258);function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);r&&(l=l.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.push.apply(a,l)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function _defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var q=-90,B=-180,G=-270;function getImageConversionOrientation(t){return t===q?8:t===B?3:t===G?6:void 0}function ImageUploader(t){this.activity=t.activity,this.modelId=t.modelId,this.responseId=t.responseId,this.eventBus=t.eventBus,this.compression=t.compression,this.assets=new L.a,O.a.hookToActivity(this.activity,this.assets)}S.a.extend(ImageUploader.prototype,{compressImage:function compressImage(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=S.a.extend(this.compression,r);var a=.001*Math.min(t.size,r.size),l=parseInt(a-Math.max(.1*a,1),10),O=_objectSpread(_objectSpread({},r),{},{size:Math.abs(l),orientation:getImageConversionOrientation(r.rotation)});return delete O.rotation,D.compressAccurately(t,O).then((function(r){return r.name=t.name,r.lastModified=t.lastModified,r.lastModifiedDate=t.lastModifiedDate,r}))},upload:function upload(t){var r=j.a.createFullPath(this.activity,this.modelId,t.name,!0),a=j.a.getValidExtension(t.name),l=j.a.getMimeTypeByExtension(a);return this.assets.add({file:t},{assetPath:r,assetExtension:a,assetMimeType:l,activity:this.activity,responseId:this.responseId,eventBus:this.eventBus,securityObject:this.getSecurityObject()})},resume:function resume(t){return this.assets.add({assetPath:t},{securityObject:this.getSecurityObject()})},getSecurityObject:function getSecurityObject(){return this.activity.get("security").getRequestParameters()},currentUploadsCount:function currentUploadsCount(){return this.assets.where({status:E.a.prototype.UPLOAD_STATUS.uploading}).length}}),r.a=ImageUploader},240:function(t,r,a){"use strict";r.a={encode:function base64_encode(t){var r,a,l,S,O,E,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j=0,D=0,q="",B=[];if(!t)return t;do{r=(O=t.charCodeAt(j++)<<16|t.charCodeAt(j++)<<8|t.charCodeAt(j++))>>18&63,a=O>>12&63,l=O>>6&63,S=63&O,B[D++]=L.charAt(r)+L.charAt(a)+L.charAt(l)+L.charAt(S)}while(j<t.length);return q=B.join(""),((E=t.length%3)?q.slice(0,E-3):q)+"===".slice(E||3)},decode:function base64_decode(t){var r,a,l,S,O,E,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j=0,D=0,q=[];if(!t)return t;t+="";do{r=(E=L.indexOf(t.charAt(j++))<<18|L.indexOf(t.charAt(j++))<<12|(S=L.indexOf(t.charAt(j++)))<<6|(O=L.indexOf(t.charAt(j++))))>>16&255,a=E>>8&255,l=255&E,q[D++]=64===S?String.fromCharCode(r):64===O?String.fromCharCode(r,a):String.fromCharCode(r,a,l)}while(j<t.length);return q.join("")}}},242:function(t,r,a){"use strict";a.d(r,"a",(function(){return mathAccessibility}));var l=a(0),S=a.n(l);function mathAccessibility(t,r){t.processAccessibility=S.a.wrap(t.processAccessibility,(function(r,a){(a=a||{}).getSourceText=function(t){return t.find(".lrn-spokenmath").text()},r.call(t,a)})),t.activity.get("state")===t.activity.STATE.REVIEW&&(t.processAccessibility=S.a.wrap(t.processAccessibility,(function(a,l){var O=r(),E=0;S.a.each(O,(function(r){var S=r.mathEvents;t.listenToOnce(S,S.EVENT.EDITOR_SPOKENMATH_UPDATED,(function(){++E===O.length&&a.call(t,l)}))}))})))}},244:function(t,r,a){"use strict";var l=a(1),S=a.n(l),O=a(0),E=a.n(O),L=a(53),j=a(312),D=a.n(j),q=a(243),B=a.n(q),G=a(11),X=a(24),Z=(a(7),L.a.extend({template:D.a,responseMarkerRegExp:void 0,responseValue:[],showingValidationUI:!1,previousResponseValue:[],readOnly:!1,validGap:11,pointLeftRightGap:1.4,pointerWidth:20,pointerTopBottomHeight:25,pointerLeftRightHeight:36,pointerHeight:"10px",RESPONSE_CONTAINER_DEFAULT_DATA:{defaultData:{bottom:"0px",width:"96px",height:"2.3em"},imageclozeassociation:{width:"20px"},imageclozedropdown:{width:"50px"}},responseContainerDefaultInputType:"text",responseContainerInputTypes:["text","number"],incorrectAnswerBubbleTemplate:B.a,initialize:function initialize(){var t,r;L.a.prototype.initialize.call(this),this.jqNamespace=".lrn-cloze-".concat(this.cid),this.events=E.a.extend({},Z.prototype.events,this.events),this.activity=this.options.activity,this.i18n=this.activity.get("i18n"),this.responseMarkerRegExp=new RegExp(this.model.RESPONSE_MARKER_REGEXP,"g"),t=this.model.getContentTemplate().match(this.responseMarkerRegExp),this.responseValue=[],this.responseValue.length=t?t.length:0;for(var a=0;a<this.responseValue.length;a++)this.responseValue[a]=null;this.activity.get("state")===this.activity.STATE.RESUME&&this.model.hasResponse()&&(this.responseValue=this.model.getResponseValue()||[]),this.responseContainerDefaultData=E.a.extend({},this.RESPONSE_CONTAINER_DEFAULT_DATA.defaultData),(r=this.RESPONSE_CONTAINER_DEFAULT_DATA[this.model.get("type")])&&E.a.extend(this.responseContainerDefaultData,r),this.readOnly=this.activity.get("state")===this.activity.STATE.REVIEW||this.activity.get("state")===this.activity.STATE.PREVIEW,this.displayLogic={},this.addRenderingLogic(),this.render(),this.initialisationCompleted()},render:function render(t){var r,a=this.model,l=this,O=a.get("question"),L=a.isVerticalTopContainer();function resizeImage(){var t=function setWidth(){return Object(X.a)(l.$el,(function(){l.setImageWidth()}))};t(),l.isListeningToWindowResize||(S()(window).on("resize"+l.jqNamespace,t),l.isListeningToWindowResize=!0)}function resizeImageOnLoad(){var t=l.$(".lrn_imagecloze_image");t.prop("complete")?resizeImage():t.on("load",resizeImage)}return r=t||this.template({questionResponse:a,displayLogic:this.displayLogic,labels:this.i18n.labels}),this.renderViewContent(r,this.extraClasses),this.displayLogic.isReviewState&&this.renderValidatableUI(),this.$el.toggleClass("lrn_cloze_vertical_top_none",!L),this.displayLogic.isMath&&a.isImageCloze()&&E.a.hasProperty(O,"ui_style.possibility_list_position")&&("left"===O.ui_style.possibility_list_position||"right"===O.ui_style.possibility_list_position)?this.mathquillRendering()?(this.renderMathquill(),resizeImageOnLoad()):G.a.once(G.a.EVENT.RENDERED,resizeImageOnLoad):resizeImageOnLoad(),this},setImageWidth:function setImageWidth(){var t=this.$(".lrn_imagecloze_image"),r=this.$(".lrn_possibilityList"),a=this.$(".lrn_imagecloze_container"),l=this.$(".lrn_cloze_response_container"),S=this.$(".lrn_response_input"),O=this.$(".lrn_response_innerbody");l.add(O).add(a).add(t).css({maxWidth:"",width:""});var L,j,D,q,B,G,X=2*parseFloat(S.css("padding-left"),10)||0,Z=O.innerWidth(),$=r.length,Q=this.getScaledWidth(t.width());return t.css({width:Q}),l.css({"max-width":Z,display:"block"}),$&&(j=r.css("position"),r.css("position","absolute"),D=this.model.get("question"),G=E.a.hasProperty(D,"ui_style.possibility_list_position")&&("left"===D.ui_style.possibility_list_position||"right"===D.ui_style.possibility_list_position),L=this.$(".lrn_response_innerbody"),q=S.outerWidth(),B=0,r.css("position",j),G&&(B=r.outerWidth()),l.css({width:this.getScaledWidth(q+B+X)}),L.css({"max-width":Z,width:this.getScaledWidth(q+B+X)})),a.css({width:t.width()}),Q},getScaledWidth:function getScaledWidth(t){return this.displayLogic.imageScale?t/this.model.FONTSIZE_MAP[this.model.FONTSIZE.NORMAL]+"em":t},addRenderingLogic:function addRenderingLogic(){L.a.prototype.addRenderingLogic.call(this);var t=this,r=this.model.get("question"),a=this.activity.get("state")===this.activity.STATE.REVIEW;this.displayLogic.readOnly=a||this.activity.get("state")===this.activity.STATE.PREVIEW,this.displayLogic.multipleResponses=this.responseValue&&this.responseValue.length>1,this.displayLogic.isMath=!!r.is_math,E.a.isObject(this.displayLogic.responseContainer)||(this.displayLogic.responseContainer={}),this.displayLogic.responseContainer.inputType=this.responseContainerDefaultInputType,E.a.isObject(r.response_container)&&(r.response_container.hasOwnProperty("width")&&(this.displayLogic.responseContainer.width=r.response_container.width,r.response_container.width.indexOf("%")>0&&(this.displayLogic.responseContainer.fluid_width=!0)),r.response_container.hasOwnProperty("height")&&(this.displayLogic.responseContainer.height=r.response_container.height,r.response_container.height.indexOf("%")>0&&(this.displayLogic.responseContainer.fluid_height=!0)),r.response_container.hasOwnProperty("placeholder")&&(this.displayLogic.responseContainer.placeholder=r.response_container.placeholder,this.displayLogic.responseContainer.showPlaceholder=!E.a.isEmpty(r.response_container.placeholder)&&!this.displayLogic.readOnly),r.response_container.hasOwnProperty("pointer")&&(this.displayLogic.responseContainer.pointer=r.response_container.pointer),r.response_container.hasOwnProperty("wordwrap")&&(this.displayLogic.responseContainer.wordwrap=r.response_container.wordwrap),E.a.contains(this.responseContainerInputTypes,r.response_container.input_type)&&(this.displayLogic.responseContainer.inputType=r.response_container.input_type)),r.image&&(this.displayLogic.imageScale=r.image.scale),this.extraClasses="lrn_cloze";var l=this.model.getContentTemplate(),S=-1;l=l.replace(this.responseMarkerRegExp,(function(){return S++,t.getResponseInputHTML(S,t.getPointerVars(S))})),this.displayLogic.processedTemplate=l,this.displayLogic.extraContentHTML=this.getExtraContentHTML()},getResponseInputHTML:function getResponseInputHTML(t){return"{replacedInput"+t+"}"},getExtraContentHTML:function getExtraContentHTML(){return null},showCorrectAnswer:function showCorrectAnswer(){this.showCorrectAnswerList()},showCorrectAnswersHover:function showCorrectAnswersHover(){throw new Error("Unimplemented function showCorrectAnswersHover for question type:"+this.model.get("type"))},getResponseContainerFor:function getResponseContainerFor(t){var r=this.model.get("question"),a=E.a.extend({},this.displayLogic.responseContainer);return E.a.isArray(r.response_containers)&&E.a.isObject(r.response_containers[t])&&(E.a.extend(a,r.response_containers[t]),E.a.contains(this.responseContainerInputTypes,r.response_containers[t].input_type)&&(a.inputType=r.response_containers[t].input_type),a.showPlaceholder=!E.a.isEmpty(a.placeholder)&&!this.displayLogic.readOnly),a},getImageClozeAriaLabelFor:function getImageClozeAriaLabelFor(t){var r=this.model.getImageClozeAriaLabels();if(E.a.isArray(r))return r[t]},getPointerVars:function getPointerVars(t){if(!this.model.isImageCloze())return{};var r=this.model.getFontSize(),a=this.getResponseContainerFor(t),l=this.getPixel(a.width||this.responseContainerDefaultData.width,r),S=this.getPixel(a.height||this.responseContainerDefaultData.height,r),O=this.getPixel(a.height||this.responseContainerDefaultData.bottom,r),E=(this.getPixel(this.pointerHeight,r),{position:a.pointer});switch(this.model.get("type")===this.model.TYPE.IMAGECLOZEDROPDOWN&&(this.validGap=0),this.model.get("type")===this.model.TYPE.IMAGECLOZETEXT&&(this.responseContainerDefaultHeight="24px"),a.pointer){case"top":E.top=S/2+this.getPointLeftRightGap()+"px",E.left=this.getEm(-1*(Math.ceil((l-this.pointerWidth)/2)+2));break;case"right":E.right=this.pointerWidth/2+this.getPointLeftRightGap()+"px",E.top=this.getEm(-1*Math.floor((S-this.pointerLeftRightHeight)/2));break;case"bottom":E.bottom=O+this.getPointLeftRightGap()/2+"px",E.left=this.getEm(-1*(Math.ceil((l-this.pointerWidth)/2)+2));break;case"left":E.left=this.pointerWidth*this.pointLeftRightGap+this.getPointLeftRightGap()+"px",E.top=this.getEm(-1*Math.floor((S-this.pointerLeftRightHeight)/2));break;default:E={}}return E},getPointLeftRightGap:function getPointLeftRightGap(){if(!this._pointLeftRightGap){var t=this.model.getFontSize();this._pointLeftRightGap=this.pointLeftRightGap*t}return this._pointLeftRightGap},getPixel:function getPixel(t,r){var a=(t=t.toString()).substr(-2),l=parseFloat(t.substr(0,t.length-2));return"em"===a?l*r:l},getEm:function getEm(t,r,a){var l=t/(a?this.model.FONTSIZE_MAP.normal:this.model.getFontSize());return r?l:l+"em"},remove:function remove(){S()(window).off(this.jqNamespace),L.a.prototype.remove.call(this)}}));r.a=Z},245:function(t,r,a){"use strict";var l,S,O,E;if("object"==typeof performance&&"function"==typeof performance.now){var L=performance;r.unstable_now=function(){return L.now()}}else{var j=Date,D=j.now();r.unstable_now=function(){return j.now()-D}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var q=null,B=null,w=function(){if(null!==q)try{var t=r.unstable_now();q(!0,t),q=null}catch(t){throw setTimeout(w,0),t}};l=function(t){null!==q?setTimeout(l,0,t):(q=t,setTimeout(w,0))},S=function(t,r){B=setTimeout(t,r)},O=function(){clearTimeout(B)},r.unstable_shouldYield=function(){return!1},E=r.unstable_forceFrameRate=function(){}}else{var G=window.setTimeout,X=window.clearTimeout;if("undefined"!=typeof console){var Z=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof Z&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var $=!1,Q=null,ee=-1,te=5,ne=0;r.unstable_shouldYield=function(){return r.unstable_now()>=ne},E=function(){},r.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<t?Math.floor(1e3/t):5};var re=new MessageChannel,oe=re.port2;re.port1.onmessage=function(){if(null!==Q){var t=r.unstable_now();ne=t+te;try{Q(!0,t)?oe.postMessage(null):($=!1,Q=null)}catch(t){throw oe.postMessage(null),t}}else $=!1},l=function(t){Q=t,$||($=!0,oe.postMessage(null))},S=function(t,a){ee=G((function(){t(r.unstable_now())}),a)},O=function(){X(ee),ee=-1}}function H(t,r){var a=t.length;t.push(r);e:for(;;){var l=a-1>>>1,S=t[l];if(!(void 0!==S&&0<I(S,r)))break e;t[l]=r,t[a]=S,a=l}}function J(t){return void 0===(t=t[0])?null:t}function K(t){var r=t[0];if(void 0!==r){var a=t.pop();if(a!==r){t[0]=a;e:for(var l=0,S=t.length;l<S;){var O=2*(l+1)-1,E=t[O],L=O+1,j=t[L];if(void 0!==E&&0>I(E,a))void 0!==j&&0>I(j,E)?(t[l]=j,t[L]=a,l=L):(t[l]=E,t[O]=a,l=O);else{if(!(void 0!==j&&0>I(j,a)))break e;t[l]=j,t[L]=a,l=L}}}return r}return null}function I(t,r){var a=t.sortIndex-r.sortIndex;return 0!==a?a:t.id-r.id}var ie=[],ae=[],se=1,le=null,ce=3,ue=!1,pe=!1,de=!1;function T(t){for(var r=J(ae);null!==r;){if(null===r.callback)K(ae);else{if(!(r.startTime<=t))break;K(ae),r.sortIndex=r.expirationTime,H(ie,r)}r=J(ae)}}function U(t){if(de=!1,T(t),!pe)if(null!==J(ie))pe=!0,l(V);else{var r=J(ae);null!==r&&S(U,r.startTime-t)}}function V(t,a){pe=!1,de&&(de=!1,O()),ue=!0;var l=ce;try{for(T(a),le=J(ie);null!==le&&(!(le.expirationTime>a)||t&&!r.unstable_shouldYield());){var E=le.callback;if("function"==typeof E){le.callback=null,ce=le.priorityLevel;var L=E(le.expirationTime<=a);a=r.unstable_now(),"function"==typeof L?le.callback=L:le===J(ie)&&K(ie),T(a)}else K(ie);le=J(ie)}if(null!==le)var j=!0;else{var D=J(ae);null!==D&&S(U,D.startTime-a),j=!1}return j}finally{le=null,ce=l,ue=!1}}var fe=E;r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(t){t.callback=null},r.unstable_continueExecution=function(){pe||ue||(pe=!0,l(V))},r.unstable_getCurrentPriorityLevel=function(){return ce},r.unstable_getFirstCallbackNode=function(){return J(ie)},r.unstable_next=function(t){switch(ce){case 1:case 2:case 3:var r=3;break;default:r=ce}var a=ce;ce=r;try{return t()}finally{ce=a}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=fe,r.unstable_runWithPriority=function(t,r){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var a=ce;ce=t;try{return r()}finally{ce=a}},r.unstable_scheduleCallback=function(t,a,E){var L=r.unstable_now();switch("object"==typeof E&&null!==E?E="number"==typeof(E=E.delay)&&0<E?L+E:L:E=L,t){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return t={id:se++,callback:a,priorityLevel:t,startTime:E,expirationTime:j=E+j,sortIndex:-1},E>L?(t.sortIndex=E,H(ae,t),null===J(ie)&&t===J(ae)&&(de?O():de=!0,S(U,E-L))):(t.sortIndex=j,H(ie,t),pe||ue||(pe=!0,l(V))),t},r.unstable_wrapCallback=function(t){var r=ce;return function(){var a=ce;ce=r;try{return t.apply(this,arguments)}finally{ce=a}}}},258:function(t,r,a){const l=a(0);t.exports=function(t){var r={};function n(a){if(r[a])return r[a].exports;var l=r[a]={i:a,l:!1,exports:{}};return t[a].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=t,n.c=r,n.d=function(t,r,a){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var l in t)n.d(a,l,function(r){return t[r]}.bind(null,l));return a},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="",n(n.s=0)}([function(t,r,a){"use strict";var S;function o(t){return["image/png","image/jpeg","image/gif"].some((function(r){return r===t}))}function u(t,r,a){return void 0===r&&(r=.92),void 0===a&&(a=S.JPEG),function(t,r,a,l){return new(a||(a=Promise))((function(S,O){function i(t){try{c(l.next(t))}catch(t){O(t)}}function u(t){try{c(l.throw(t))}catch(t){O(t)}}function c(t){var r;t.done?S(t.value):(r=t.value,r instanceof a?r:new a((function(t){t(r)}))).then(i,u)}c((l=l.apply(t,r||[])).next())}))}(this,void 0,void 0,(function(){return function(t,r){var a,l,S,O,E={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return O={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function u(O){return function(L){return function(O){if(a)throw new TypeError("Generator is already executing.");for(;E;)try{if(a=1,l&&(S=2&O[0]?l.return:O[0]?l.throw||((S=l.return)&&S.call(l),0):l.next)&&!(S=S.call(l,O[1])).done)return S;switch(l=0,S&&(O=[2&O[0],S.value]),O[0]){case 0:case 1:S=O;break;case 4:return E.label++,{value:O[1],done:!1};case 5:E.label++,l=O[1],O=[0];continue;case 7:O=E.ops.pop(),E.trys.pop();continue;default:if(!((S=(S=E.trys).length>0&&S[S.length-1])||6!==O[0]&&2!==O[0])){E=0;continue}if(3===O[0]&&(!S||O[1]>S[0]&&O[1]<S[3])){E.label=O[1];break}if(6===O[0]&&E.label<S[1]){E.label=S[1],S=O;break}if(S&&E.label<S[2]){E.label=S[2],E.ops.push(O);break}S[2]&&E.ops.pop(),E.trys.pop();continue}O=r.call(t,E)}catch(t){O=[6,t],l=0}finally{a=S=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,L])}}}(this,(function(l){return o(a)||(a=S.JPEG),[2,t.toDataURL(a,r)]}))}))}function c(t,r,a){return void 0===r&&(r=.92),void 0===a&&(a=S.JPEG),new Promise((function(l){return t.toBlob((function(t){return l(t)}),a,r)}))}function f(t,r){return function(t,r,a,l){return new(a||(a=Promise))((function(S,O){function i(t){try{c(l.next(t))}catch(t){O(t)}}function u(t){try{c(l.throw(t))}catch(t){O(t)}}function c(t){var r;t.done?S(t.value):(r=t.value,r instanceof a?r:new a((function(t){t(r)}))).then(i,u)}c((l=l.apply(t,r||[])).next())}))}(this,void 0,void 0,(function(){var a,l,S,O,E;return function(t,r){var a,l,S,O,E={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return O={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function u(O){return function(L){return function(O){if(a)throw new TypeError("Generator is already executing.");for(;E;)try{if(a=1,l&&(S=2&O[0]?l.return:O[0]?l.throw||((S=l.return)&&S.call(l),0):l.next)&&!(S=S.call(l,O[1])).done)return S;switch(l=0,S&&(O=[2&O[0],S.value]),O[0]){case 0:case 1:S=O;break;case 4:return E.label++,{value:O[1],done:!1};case 5:E.label++,l=O[1],O=[0];continue;case 7:O=E.ops.pop(),E.trys.pop();continue;default:if(!((S=(S=E.trys).length>0&&S[S.length-1])||6!==O[0]&&2!==O[0])){E=0;continue}if(3===O[0]&&(!S||O[1]>S[0]&&O[1]<S[3])){E.label=O[1];break}if(6===O[0]&&E.label<S[1]){E.label=S[1],S=O;break}if(S&&E.label<S[2]){E.label=S[2],E.ops.push(O);break}S[2]&&E.ops.pop(),E.trys.pop();continue}O=r.call(t,E)}catch(t){O=[6,t],l=0}finally{a=S=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,L])}}}(this,(function(L){for(a=t.split(","),l=a[0].match(/:(.*?);/)[1],S=atob(a[1]),O=S.length,E=new Uint8Array(O);O--;)E[O]=S.charCodeAt(O);return o(r)&&(l=r),[2,new Blob([E],{type:l})]}))}))}function h(t){return new Promise((function(r,a){var l=new Image;l.onload=function(){return r(l)},l.onerror=function(){return a(new Error("dataURLtoImage(): dataURL is illegal"))},l.src=t}))}function d(t,r){var a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download=r||Date.now().toString(36),document.body.appendChild(a);var l=document.createEvent("MouseEvents");l.initEvent("click",!1,!1),a.dispatchEvent(l),document.body.removeChild(a)}function p(t){return new Promise((function(r){var a=new FileReader;a.onloadend=function(t){return r(t.target.result)},a.readAsDataURL(t)}))}a.r(r),a.d(r,"canvastoDataURL",(function(){return u})),a.d(r,"canvastoFile",(function(){return c})),a.d(r,"dataURLtoFile",(function(){return f})),a.d(r,"dataURLtoImage",(function(){return h})),a.d(r,"downloadFile",(function(){return d})),a.d(r,"filetoDataURL",(function(){return p})),a.d(r,"imagetoCanvas",(function(){return g})),a.d(r,"urltoBlob",(function(){return v})),a.d(r,"urltoImage",(function(){return m})),a.d(r,"compress",(function(){return k})),a.d(r,"compressAccurately",(function(){return I})),a.d(r,"EImageType",(function(){return S})),function(t){t.PNG="image/png",t.JPEG="image/jpeg",t.GIF="image/gif"}(S||(S={}));var b=function(){return(b=l.extend||function(t){for(var r,a=1,l=arguments.length;a<l;a++)for(var S in r=arguments[a])Object.prototype.hasOwnProperty.call(r,S)&&(t[S]=r[S]);return t}).apply(this,arguments)};function g(t,r){return void 0===r&&(r={}),function(t,r,a,l){return new(a||(a=Promise))((function(S,O){function i(t){try{c(l.next(t))}catch(t){O(t)}}function u(t){try{c(l.throw(t))}catch(t){O(t)}}function c(t){var r;t.done?S(t.value):(r=t.value,r instanceof a?r:new a((function(t){t(r)}))).then(i,u)}c((l=l.apply(t,r||[])).next())}))}(this,void 0,void 0,(function(){var a,l,S,O,E,L,j;return function(t,r){var a,l,S,O,E={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return O={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function u(O){return function(L){return function(O){if(a)throw new TypeError("Generator is already executing.");for(;E;)try{if(a=1,l&&(S=2&O[0]?l.return:O[0]?l.throw||((S=l.return)&&S.call(l),0):l.next)&&!(S=S.call(l,O[1])).done)return S;switch(l=0,S&&(O=[2&O[0],S.value]),O[0]){case 0:case 1:S=O;break;case 4:return E.label++,{value:O[1],done:!1};case 5:E.label++,l=O[1],O=[0];continue;case 7:O=E.ops.pop(),E.trys.pop();continue;default:if(!((S=(S=E.trys).length>0&&S[S.length-1])||6!==O[0]&&2!==O[0])){E=0;continue}if(3===O[0]&&(!S||O[1]>S[0]&&O[1]<S[3])){E.label=O[1];break}if(6===O[0]&&E.label<S[1]){E.label=S[1],S=O;break}if(S&&E.label<S[2]){E.label=S[2],E.ops.push(O);break}S[2]&&E.ops.pop(),E.trys.pop();continue}O=r.call(t,E)}catch(t){O=[6,t],l=0}finally{a=S=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,L])}}}(this,(function(D){for(L in a=b({},r),l=document.createElement("canvas"),S=l.getContext("2d"),a)Object.prototype.hasOwnProperty.call(a,L)&&(a[L]=Number(a[L]));switch(a.scale?(j=a.scale>0&&a.scale<10?a.scale:1,E=t.width*j,O=t.height*j):(E=a.width||a.height*t.width/t.height||t.width,O=a.height||a.width*t.height/t.width||t.height),[5,6,7,8].some((function(t){return t===a.orientation}))?(l.height=E,l.width=O):(l.height=O,l.width=E),a.orientation){case 3:S.rotate(180*Math.PI/180),S.drawImage(t,-l.width,-l.height,l.width,l.height);break;case 6:S.rotate(90*Math.PI/180),S.drawImage(t,0,-l.width,l.height,l.width);break;case 8:S.rotate(270*Math.PI/180),S.drawImage(t,-l.height,0,l.height,l.width);break;case 2:S.translate(l.width,0),S.scale(-1,1),S.drawImage(t,0,0,l.width,l.height);break;case 4:S.translate(l.width,0),S.scale(-1,1),S.rotate(180*Math.PI/180),S.drawImage(t,-l.width,-l.height,l.width,l.height);break;case 5:S.translate(l.width,0),S.scale(-1,1),S.rotate(90*Math.PI/180),S.drawImage(t,0,-l.width,l.height,l.width);break;case 7:S.translate(l.width,0),S.scale(-1,1),S.rotate(270*Math.PI/180),S.drawImage(t,-l.height,0,l.height,l.width);break;default:S.drawImage(t,0,0,l.width,l.height)}return[2,l]}))}))}function v(t){return fetch(t).then((function(t){return t.blob()}))}function m(t){return new Promise((function(r,a){var l=new Image;l.onload=function(){return r(l)},l.onerror=function(){return a(new Error("urltoImage(): Image failed to load, please check the image URL"))},l.src=t}))}var x=function(t,r,a,l){return new(a||(a=Promise))((function(S,O){function i(t){try{c(l.next(t))}catch(t){O(t)}}function u(t){try{c(l.throw(t))}catch(t){O(t)}}function c(t){var r;t.done?S(t.value):(r=t.value,r instanceof a?r:new a((function(t){t(r)}))).then(i,u)}c((l=l.apply(t,r||[])).next())}))},P=function(t,r){var a,l,S,O,E={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return O={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function u(O){return function(L){return function(O){if(a)throw new TypeError("Generator is already executing.");for(;E;)try{if(a=1,l&&(S=2&O[0]?l.return:O[0]?l.throw||((S=l.return)&&S.call(l),0):l.next)&&!(S=S.call(l,O[1])).done)return S;switch(l=0,S&&(O=[2&O[0],S.value]),O[0]){case 0:case 1:S=O;break;case 4:return E.label++,{value:O[1],done:!1};case 5:E.label++,l=O[1],O=[0];continue;case 7:O=E.ops.pop(),E.trys.pop();continue;default:if(!((S=(S=E.trys).length>0&&S[S.length-1])||6!==O[0]&&2!==O[0])){E=0;continue}if(3===O[0]&&(!S||O[1]>S[0]&&O[1]<S[3])){E.label=O[1];break}if(6===O[0]&&E.label<S[1]){E.label=S[1],S=O;break}if(S&&E.label<S[2]){E.label=S[2],E.ops.push(O);break}S[2]&&E.ops.pop(),E.trys.pop();continue}O=r.call(t,E)}catch(t){O=[6,t],l=0}finally{a=S=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,L])}}};function k(t,r){return void 0===r&&(r={}),x(this,void 0,void 0,(function(){var a,O,E,L;return P(this,(function(j){switch(j.label){case 0:if(!(t instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");return"object"!=typeof r&&(r=l.extend({quality:r})),r.quality=Number(r.quality),l.isNaN(r.quality)?[2,t]:[4,p(t)];case 1:return a=j.sent(),O=a.split(",")[0].match(/:(.*?);/)[1],E=S.JPEG,o(r.type)&&(E=r.type,O=r.type),[4,h(a)];case 2:return[4,g(j.sent(),l.extend({},r))];case 3:return[4,u(j.sent(),r.quality,E)];case 4:return[4,f(j.sent(),O)];case 5:return(L=j.sent()).size>t.size?[2,t]:[2,L]}}))}))}function I(t,r){return void 0===r&&(r={}),x(this,void 0,void 0,(function(){var a,O,E,L,j,D,q,B,G,X,Z,$;return P(this,(function(Q){switch(Q.label){case 0:if(!(t instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");return"object"!=typeof r&&(r=l.extend({size:r})),r.size=Number(r.size),l.isNaN(r.size)||1024*r.size>t.size?[2,t]:(r.accuracy=Number(r.accuracy),(!r.accuracy||r.accuracy<.8||r.accuracy>.99)&&(r.accuracy=.95),a={max:r.size*(2-r.accuracy)*1024,accurate:1024*r.size,min:r.size*r.accuracy*1024},[4,p(t)]);case 1:return O=Q.sent(),E=O.split(",")[0].match(/:(.*?);/)[1],L=S.JPEG,o(r.type)&&(L=r.type,E=r.type),[4,h(O)];case 2:return[4,g(Q.sent(),l.extend({},r))];case 3:j=Q.sent(),D=.75,q=.5,G=[null,null],X=1,Q.label=4;case 4:return X<=7?[4,u(j,q,L)]:[3,7];case 5:if(B=Q.sent(),Z=B.length*D,7===X)return(a.max<Z||a.min>Z)&&(B=function(){for(var t=0,r=0,a=arguments.length;r<a;r++)t+=arguments[r].length;var l=Array(t),S=0;for(r=0;r<a;r++)for(var O=arguments[r],E=0,L=O.length;E<L;E++,S++)l[S]=O[E];return l}([B],G).filter((function(t){return t})).sort((function(t,r){return Math.abs(t.length*D-a.accurate)-Math.abs(r.length*D-a.accurate)}))[0]),[3,7];if(a.max<Z)G[1]=B,q-=Math.pow(.5,X+1);else{if(!(a.min>Z))return[3,7];G[0]=B,q+=Math.pow(.5,X+1)}Q.label=6;case 6:return X++,[3,4];case 7:return[4,f(B,E)];case 8:return($=Q.sent()).size>t.size?[2,t]:[2,$]}}))}))}}])},263:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn_bubble lrn_charactermap"><div class="lrn_charactermap_title">'+(null==(__t=labels.characterMapTitle)?"":__t)+"</div>",_.each(characters,(function(t,r){__p+='<button class="lrn_btn_grid lrn_characterbutton" type="button" unselectable="on" tabindex="0" data-character-btn-index="'+(null==(__t=r)?"":__t)+'">'+(null==(__t=t)?"":__t)+"</button>"})),__p+="</div>";return __p}},269:function(t,r,a){"use strict";a(1);var l=a(0),S=a.n(l),O=a(8).a.extend({DEFAULT_FORMATTING_OPTIONS:["bold","italic","underline","|","unorderedList","orderedList"],SHOW_WORD_LIMITS:{ALWAYS:"always",ON:"on-limit",OFF:"off"},MAX_WORD_LENGTH:1e4,processResponseValue:function processResponseValue(t){this.hasResponse()||this.set({response:{value:"",wordCount:0,type:this.RESPONSE_TYPE.STRING}},{silent:!0}),this.get("response").value=this.sanitizeValue(t.value),this.get("response").wordCount=t.wordCount},getFormattingOptions:function getFormattingOptions(){if(!this._formattingOptions){var t=this.get("question").formatting_options;S.a.isArray(t)||(t=this.DEFAULT_FORMATTING_OPTIONS);var r=this.getCharacterMap(),a=t.indexOf("charactermap");S.a.isArray(r)||!1!==r?a<0&&t.push("charactermap"):!1===r&&a>=0&&Array.prototype.splice.call(t,a,1),this._formattingOptions=t}return this._formattingOptions},getMaxLength:function getMaxLength(){if(!this._maxLength){var t=this.get("question").max_length;(!S.a.isNumber(t)||t<0||t>this.MAX_WORD_LENGTH)&&(t=this.MAX_WORD_LENGTH),this._maxLength=t}return this._maxLength},getWordCount:function getWordCount(){return this.hasResponse()?this.get("response").wordCount:0},getShowWordCount:function getShowWordCount(){if(S.a.isUndefined(this._showWordCount)){var t=this.get("question").show_word_count;this._showWordCount=!S.a.isBoolean(t)||t}return this._showWordCount},getPlaceholder:function getPlaceholder(){return this.get("question").placeholder},getBrowserSpellCheck:function getBrowserSpellCheck(){if(S.a.isUndefined(this._spellCheck)){var t=this.get("question").spellcheck;this._spellCheck=S.a.isBoolean(t)?t:"false"!==t}return this._spellCheck},disableAutoLink:function disableAutoLink(){return this.activity.get("disable_auto_link")||S.a.getNested(this.get("question"),"disable_auto_link")},getCharacterMap:function getCharacterMap(){if(S.a.isUndefined(this._characterMap)){var t=this.get("question"),r=t.character_map,a=S.a.isArray(t.formatting_options)?t.formatting_options:[],l=(S.a.isUndefined(r)||S.a.isArray(r)&&!r.length)&&a.indexOf("charactermap")>=0;this._characterMap=!!l||!(!S.a.isArray(r)&&!S.a.isBoolean(r))&&r}return this._characterMap},getShowWordLimit:function getShowWordLimit(){if(S.a.isUndefined(this._showWordLimit)){var t=this.get("question").show_word_limit,r=this.SHOW_WORD_LIMITS;this._showWordLimit=S.a.contains(r,t)?t:r.ALWAYS}return this._showWordLimit},getUIStyle:function getUIStyle(){return S.a.isUndefined(this._uiStyle)&&(this._uiStyle=S.a.getNested(this.get("question"),"ui_style")||{}),this._uiStyle},isMaxLengthDefined:function isMaxLengthDefined(){return S.a.isUndefined(this._isMaxLengthDefined)&&(this._isMaxLengthDefined=!!this.get("question").max_length),this._isMaxLengthDefined},wordCountExceeded:function wordCountExceeded(){return this.getWordCount()>this.getMaxLength()},hasAllowedResponse:function hasAllowedResponse(){return!(this.hasResponse()&&!this.get("question").submit_over_limit&&this.wordCountExceeded())}});r.a=O},275:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(35),E=a(10);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=_getPrototypeOf(t);if(r){var S=_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=["exactMatch"],j=function isDefaultValidResponseValue(t){return 0===S.a.filter(t,(function(t){return t&&(t.value||t.method||0===t.value)})).length},D=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(MathScorer,t);var r=_createSuper(MathScorer);function MathScorer(){return _classCallCheck(this,MathScorer),r.apply(this,arguments)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(MathScorer,[{key:"reset",value:function reset(t,r){var a=JSON.stringify(t);if(r=r||this.cachedValidateSingleSpec,this.serializedData!==a){try{this.scoringData=function getScoringData(t,r){if(!function canValidateResponse(t){if(!1===S.a.getNested(t,"validation.automarkable"))return!1;var r=t.validation||t;return!(S.a.isEmpty(r)||!(r.valid_responses||r.valid_response&&!j(r.valid_response.value)))}(t.question))return{automarkable:!1};t.response=t.response||{};var a,l,O=t.response&&t.response.value,D=[];t.question.equiv_literal_legacy&&(t=E.a.processCompatibility(t));if(l=!!t.question.validation.allow_negative_scores,t.response=t.response||{},t.question.validation.scoring_type){if(!S.a.contains(L,t.question.validation.scoring_type))throw new E.a.InvalidScoringTypeException(t.question.type,t.question.validation.scoring_type);t.question.validation.valid_response&&D.push(t.question.validation.valid_response),t.question.validation.alt_responses&&(D=D.concat(t.question.validation.alt_responses)),a=Math.abs(S.a.isNumber(t.question.validation.penalty)?t.question.validation.penalty:0)}else D=t.question.validation&&t.question.validation.valid_responses||[];var q=E.a.validateMathLists(O,D,r,1,a);void 0===q.scoreWithFullPenalty?q.score=null:q.score=l?q.scoreWithFullPenalty:Math.max(0,q.scoreWithFullPenalty);return q}(t,r),E.a.normalizeScores(this.scoringData,t)}catch(t){this.scoringData={error:t}}this.serializedData=a}return this.cachedValidateSingleSpec=r,this}}]),MathScorer}(O.a);r.a=D},277:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(533),E=a.n(O);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var L=function(){function Fraction(t,r,a){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Fraction),this.integer=isNaN(parseFloat(a))?0:parseFloat(a),this.numerator=0,this.denominator=null,(t||r)&&this.set(t,r)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(Fraction,[{key:"normalize",value:function normalize(t){var r,a,l,S,O=this.denominator?this.denominator:1;if(!0===t?(l=this.numerator,S=O):(a=Fraction.gcd(this.numerator,O),l=this.numerator/a,S=O/a),Math.abs(l)>=Math.abs(S)){if(1===S)return this.integer+=l,this.numerator=0,this.denominator=null,this;r=l<0?-Math.floor(-l/S):Math.floor(l/S),this.integer<0?this.integer-=r:this.integer+=r,l-=r*S}return this.set(l,S)}},{key:"clone",value:function clone(){return new Fraction(this)}},{key:"set",value:function set(t,r){if(t instanceof Fraction)this.integer=t.integer,this.numerator=t.numerator,this.denominator=t.denominator;else if(S.a.isUndefined(t)||S.a.isNull(t)||S.a.isUndefined(r)||S.a.isNull(r))if(S.a.isUndefined(r)||S.a.isNull(r))if(S.a.isString(t)){var a=Fraction.IMPROPER_REG_EXP.exec(t),l=Fraction.MIXED_REG_EXP.exec(t);l&&4===l.length?(this.integer=parseInt(l[1],10),this.numerator=parseInt(l[2],10),this.denominator=parseInt(l[3],10)):a&&3===a.length?(this.numerator=parseInt(a[1],10),this.denominator=parseInt(a[2],10)):(this.integer=parseFloat(t),this.numerator=0,this.denominator=null)}else S.a.isNumber(t)?(this.integer=t,this.numerator=0,this.denominator=null):(this.integer=0,this.numerator=0,this.denominator=null);else S.a.isUndefined(r)||S.a.isNull(r)?(this.integer=0,this.numerator=0,this.denominator=null):(this.integer=0,this.numerator=0,(S.a.isNumber(r)||S.a.isString(r))&&(this.denominator=parseInt(r,10),this.denominator||(this.denominator=null)));else(S.a.isNumber(t)||S.a.isString(t))&&(this.numerator=parseInt(t,10)),(S.a.isNumber(r)||S.a.isString(r))&&(this.denominator=parseInt(r,10)),this.denominator||(this.denominator=null);return this.setCorrectSign(),this}},{key:"convertToDenominator",value:function convertToDenominator(t){var r,a,l=this.denominator?this.denominator:1,O=this.numerator,E=this.integer;return S.a.isNumber(t)||(t=(a=new Fraction(t)).denominator?a.denominator:1),S.a.isNumber(t)&&l!==t&&(r=t/l,0===(O=this.numerator*r)&&(O=E*t,E=0)),new Fraction(O,t,E)}},{key:"add",value:function add(t){var r,a,l,S;return t=new Fraction(t),r=this.getImproperFraction(),a=t.getImproperFraction(),l=Fraction.lcm(r.denominator?r.denominator:1,a.denominator?a.denominator:1),(S=new Fraction(l/(r.denominator?r.denominator:1)*r.numerator+l/(a.denominator?a.denominator:1)*a.numerator,l)).normalize(!0),S}},{key:"subtract",value:function subtract(t){return t=new Fraction(t),this.add(t.multiply(-1))}},{key:"inverse",value:function inverse(){var t=this.getImproperFraction();return new Fraction(t.denominator,t.numerator)}},{key:"multiply",value:function multiply(t){var r,a;return t=new Fraction(t),r=this.getImproperFraction(),a=t.getImproperFraction(),new Fraction(r.numerator*a.numerator,(r.denominator?r.denominator:0)*(a.denominator?a.denominator:0))}},{key:"divide",value:function divide(t){return t=new Fraction(t),this.multiply(t.inverse())}},{key:"getProperFraction",value:function getProperFraction(){var t=new Fraction(this);return t.normalize(!0),new Fraction(t.integer<0&&t.numerator>0?-t.numerator:t.numerator,this.denominator)}},{key:"getImproperFraction",value:function getImproperFraction(){var t,r;return this.numerator&&this.denominator?(t=this.integer<0?this.integer*this.denominator-this.numerator:this.integer*this.denominator+this.numerator,r=this.denominator):this.denominator?(r=this.denominator,this.integer&&(t=this.integer*this.denominator)):this.integer&&(t=this.integer,r=1),new Fraction(t,r)}},{key:"getSimpleFraction",value:function getSimpleFraction(){return new Fraction(this.integer<0?-this.numerator:this.numerator,this.denominator)}},{key:"toInteger",value:function toInteger(){return~~this.toDecimal()}},{key:"toDecimal",value:function toDecimal(){return this.denominator&&0!==this.denominator?this.integer&&this.integer<0?this.integer-this.numerator/this.denominator:this.numerator/this.denominator+this.integer:this.integer}},{key:"setCorrectSign",value:function setCorrectSign(){this.numerator&&this.numerator<0&&this.denominator&&this.denominator<0?(this.numerator=-this.numerator,this.denominator=-this.denominator):this.integer&&this.integer<0&&this.numerator&&this.numerator<0?this.numerator=-this.numerator:this.integer&&this.integer<0&&this.denominator&&this.denominator<0?this.denominator=-this.denominator:this.numerator&&this.numerator<0?this.integer&&(this.integer=-this.integer,this.numerator=-this.numerator):this.denominator&&this.denominator<0&&(this.integer?(this.integer=-this.integer,this.denominator=-this.denominator):(this.numerator=-this.numerator,this.denominator=-this.denominator))}},{key:"toSimpleString",value:function toSimpleString(){var t=0;return 0===this.integer&&0===this.numerator&&null===this.denominator?"0":!this.integer||this.numerator||this.denominator?(this.integer&&this.denominator&&(t=this.integer<0?-this.integer*this.denominator:this.integer*this.denominator),this.numerator&&(t+=this.numerator),this.denominator?(this.integer<0?"-":"")+t+"/"+this.denominator:""):""+this.integer}},{key:"toSimpleHtml",value:function toSimpleHtml(t,r){var a={integer:"",simpleFraction:this.getImproperFraction(),allowZeroNumerator:!0};return this.toMixedHtml(t,a,r)}},{key:"toMixedParams",value:function toMixedParams(){var t=this.getSimpleFraction();return 0===t.toDecimal()?t=null:this.integer<0&&(t=t.multiply(-1)),{integer:this.integer,simpleFraction:t,allowZeroNumerator:!1}}},{key:"toMixedString",value:function toMixedString(){var t=this.toMixedParams(),r=(t.integer?t.integer:"")+(t.simpleFraction?" "+t.simpleFraction.toSimpleString():"");return r?r.trim():"0"}},{key:"toMixedHtml",value:function toMixedHtml(t,r,a){var l,S,O,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fraction.fractionClass,L="",j="";return j=(r=r||this.toMixedParams()).integer,r.simpleFraction?(S=r.simpleFraction.numerator,O=r.simpleFraction.denominator):(S=0,O=0),S<0&&(S=-S,""===j||0===j?j="-":j>0&&(j=-j)),0!==S?(L+=S,O&&(L+="<hr/>"+O)):r.allowZeroNumerator&&O&&(L+="0<hr/>"+O),t&&(j=t+" "+j),""===L&&""===j&&(j=0),l={fractionClass:E,proper:L,integer:0===j&&""!==L?"":""+j},!0===a?l:Fraction.mixedFractionTemplate(l)}}]),Fraction}();_defineProperty(L,"IMPROPER_REG_EXP",/(\-?\d+)\s*\/\s*([1-9]\d*)/),_defineProperty(L,"MIXED_REG_EXP",/(\-?\d+)\s+(\d+)\s*\/\s*([1-9]\d*)/),_defineProperty(L,"fractionClass","lrn-numberline-fraction"),_defineProperty(L,"mixedFractionTemplate",E.a),_defineProperty(L,"gcd",(function(t,r){return r?L.gcd(r,t%r):t})),_defineProperty(L,"lcm",(function(t,r){var a=L.gcd(t,r);return Math.abs(t)/a*Math.abs(r)})),_defineProperty(L,"isNumber",(function(t){return!isNaN(parseFloat(t))&&isFinite(t)})),_defineProperty(L,"isFraction",(function(t){var r=L.IMPROPER_REG_EXP.exec(t),a=L.MIXED_REG_EXP.exec(t);return!!(a&&4===a.length||r&&3===r.length)})),_defineProperty(L,"isMixedFraction",(function(t){var r=L.MIXED_REG_EXP.exec(t);return!(!r||4!==r.length)})),_defineProperty(L,"isParsable",(function(t){return L.isNumber(t)||L.isFraction(t)})),_defineProperty(L,"areEqual",(function(t,r){return t.toDecimal()===r.toDecimal()})),_defineProperty(L,"areIdentical",(function(t,r){return t.numerator===r.numerator&&t.denominator===r.denominator&&t.integer===r.integer})),_defineProperty(L,"decimalToFraction",(function(t){if(t===parseInt(t))return{top:parseInt(t),bottom:1,display:parseInt(t)+"/1"};var r=-1!==t.toString().indexOf(".")?t.toString().replace(/\d+[.]/,""):0,a=Math.pow(10,r.toString().replace("-","").length);t>=1?r=+r+Math.floor(t)*a:t<=-1&&(r=+r+Math.ceil(t)*a);var l=Math.abs(L.gcd(r,a));return{top:r/l,bottom:a/l}})),r.a=L},278:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(153),E=a(126),L=a.n(E),j=a(130),D=a(128),q=a(127),B=a.n(q),G=a(148),X=a(141),Z=a(151),$=a(192);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=_getPrototypeOf(t);if(r){var S=_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(t):r}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function modalWithToggle(t){return function(r){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(_temp,r);var a=_createSuper(_temp);function _temp(){var t;_classCallCheck(this,_temp);for(var r=arguments.length,l=new Array(r),S=0;S<r;S++)l[S]=arguments[S];return _defineProperty(_assertThisInitialized(t=a.call.apply(a,[this].concat(l))),"state",{modalIsOpen:!1}),_defineProperty(_assertThisInitialized(t),"closeModal",(function(){(0,t.props.onModal)(null),t.setState({modalIsOpen:!1})})),_defineProperty(_assertThisInitialized(t),"toggleModal",(function(){var r=t.props.onModal,a=!t.state.modalIsOpen;r(a),t.setState({modalIsOpen:a})})),t}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(_temp,[{key:"render",value:function render(){var r=this.props,a=this.state,l=r.isActive,S=r.visible,O=r.onApply,E=r.getContainer,j=a.modalIsOpen,D=B()({hide:!S});return L.a.createElement(L.a.Fragment,null,L.a.createElement(Z.a.Button,_extends({},r,{isActive:l,className:D,onClick:this.toggleModal})),L.a.createElement(t,_extends({},r,{relativeNode:E,modalIsOpen:j,onRequestClose:this.closeModal,onApply:O})))}}]),_temp}(L.a.Component)}var Q=a(152);function create_typeof(t){return(create_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function create_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function create_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function create_setPrototypeOf(t,r){return(create_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function create_createSuper(t){var r=function create_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=create_getPrototypeOf(t);if(r){var S=create_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return create_possibleConstructorReturn(this,a)}}function create_possibleConstructorReturn(t,r){return!r||"object"!==create_typeof(r)&&"function"!=typeof r?create_assertThisInitialized(t):r}function create_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function create_getPrototypeOf(t){return(create_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function create_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var ee=function(t){!function create_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&create_setPrototypeOf(t,r)}(CreateTableModal,t);var r=create_createSuper(CreateTableModal);function CreateTableModal(){var t;create_classCallCheck(this,CreateTableModal);for(var a=arguments.length,l=new Array(a),S=0;S<a;S++)l[S]=arguments[S];return create_defineProperty(create_assertThisInitialized(t=r.call.apply(r,[this].concat(l))),"state",{cols:3,rows:2}),create_defineProperty(create_assertThisInitialized(t),"onChange",(function(r,a){t.setState(create_defineProperty({},r,a))})),create_defineProperty(create_assertThisInitialized(t),"onApply",(function(r){var a=t.props,l=a.onApply,S=a.onRequestClose,O=t.state;l({cols:O.cols,rows:O.rows}),S(),r.preventDefault()})),create_defineProperty(create_assertThisInitialized(t),"onCloseWithoutApply",(function(){var r=t.props,a=r.onApply,l=r.onRequestClose;a(null),l()})),t}return function create_createClass(t,r,a){return r&&create_defineProperties(t.prototype,r),a&&create_defineProperties(t,a),t}(CreateTableModal,[{key:"render",value:function render(){var t=this,r=this.props,a=r.i18n,l=r.relativeNode,S=r.modalIsOpen,O=r.responseId,E=a.labels.editor.modals,j=this.state,D=j.cols,q=j.rows,B=D>0&&q>0&&D<100&&q<100;return L.a.createElement(Q.a,{getRef:function getRef(r){return t.el=r},title:E.tableTitle,parentNode:l,modalIsOpen:S,onRequestClose:this.onCloseWithoutApply},L.a.createElement("div",{className:"lrn_clearfix"},L.a.createElement("div",{className:"lrn-wysihtml-modal-section"},L.a.createElement("label",{htmlFor:"".concat(O,"-table-columns")},L.a.createElement("span",{className:"lrn-label-title"},E.columns),L.a.createElement("input",{type:"number",id:"".concat(O,"-table-columns"),className:"lrn-editor-input",defaultValue:D,min:"1",max:"99",onChange:function onChange(r){return t.onChange("cols",r.target.value)}}))),L.a.createElement("div",{className:"lrn-wysihtml-modal-section"},L.a.createElement("label",{htmlFor:"".concat(O,"-table-rows")},L.a.createElement("span",{className:"lrn-label-title"},E.rows),L.a.createElement("input",{type:"number",id:"".concat(O,"-table-rows"),className:"lrn-editor-input",defaultValue:q,min:"1",max:"99",onChange:function onChange(r){return t.onChange("rows",r.target.value)}})))),L.a.createElement("hr",null),L.a.createElement("div",{className:"lrn-wysihtml-modal-controls"},L.a.createElement("button",{className:"lrn_btn lrn_btn_blue","data-lrn-action":"apply",onClick:this.onApply,disabled:!B,type:"button"},E.apply)))}}]),CreateTableModal}(L.a.Component);function edit_typeof(t){return(edit_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function edit_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function edit_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function edit_setPrototypeOf(t,r){return(edit_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function edit_createSuper(t){var r=function edit_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=edit_getPrototypeOf(t);if(r){var S=edit_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return edit_possibleConstructorReturn(this,a)}}function edit_possibleConstructorReturn(t,r){return!r||"object"!==edit_typeof(r)&&"function"!=typeof r?edit_assertThisInitialized(t):r}function edit_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function edit_getPrototypeOf(t){return(edit_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function edit_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var te=function(t){!function edit_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&edit_setPrototypeOf(t,r)}(EditTableModal,t);var r=edit_createSuper(EditTableModal);function EditTableModal(){var t;edit_classCallCheck(this,EditTableModal);for(var a=arguments.length,l=new Array(a),S=0;S<a;S++)l[S]=arguments[S];return edit_defineProperty(edit_assertThisInitialized(t=r.call.apply(r,[this].concat(l))),"onApply",(function(r,a){var l=t.props,S=l.onApply,O=l.onRequestClose;S(a),O(),r.preventDefault()})),t}return function edit_createClass(t,r,a){return r&&edit_defineProperties(t.prototype,r),a&&edit_defineProperties(t,a),t}(EditTableModal,[{key:"render",value:function render(){var t=this,r=this.props,a=r.i18n,l=r.relativeNode,S=r.modalIsOpen,O=r.onRequestClose,E=a.labels.editor.modals;return L.a.createElement(Q.a,{getRef:function getRef(r){return t.el=r},title:E.tableTitle,parentNode:l,className:"lrn-wysihtml-modal-table-edit",modalIsOpen:S,onRequestClose:O},L.a.createElement("div",{className:"lrn_clearfix"},L.a.createElement("div",{className:"lrn-wysihtml-modal-section"},L.a.createElement("div",null,L.a.createElement("span",{className:"lrn-label-title"},E.columns)),L.a.createElement("ul",null,L.a.createElement("li",null,L.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(r){return t.onApply(r,{type:"addTableCells",params:"before"})}},E.insertColumnBefore)),L.a.createElement("li",null,L.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(r){return t.onApply(r,{type:"addTableCells",params:"after"})}},E.insertColumnAfter)),L.a.createElement("li",null,L.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(r){return t.onApply(r,{type:"deleteTableCells",params:"column"})}},E.deleteColumn)))),L.a.createElement("div",{className:"lrn-wysihtml-modal-section"},L.a.createElement("div",null,L.a.createElement("span",{className:"lrn-label-title"},E.rows)),L.a.createElement("ul",null,L.a.createElement("li",null,L.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(r){return t.onApply(r,{type:"addTableCells",params:"above"})}},E.insertRowAbove)),L.a.createElement("li",null,L.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(r){return t.onApply(r,{type:"addTableCells",params:"below"})}},E.insertRowBelow)),L.a.createElement("li",null,L.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(r){return t.onApply(r,{type:"deleteTableCells",params:"row"})}},E.deleteRow))))),L.a.createElement("hr",null),L.a.createElement("div",{className:"lrn-wysihtml-modal-controls"},L.a.createElement("button",{type:"button",className:"lrn_btn  lrn_btn_danger",onMouseDown:function onMouseDown(r){return t.onApply(r,{type:"deleteTable"})}},E.deleteTable)))}}]),EditTableModal}(L.a.Component),ne={CreateTableButton:modalWithToggle(ee),EditTableButton:modalWithToggle(te)},re=a(297),oe=a.n(re),ie=a(214),ae=a(132);function imagePropsUtil_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function generateImageAttributes(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{className:"class"},a=t.url,l=t.size,S=t.naturalWidth,O=t.naturalHeight,E=imagePropsUtil_defineProperty({src:a,width:getImageWidthFromSize(l,S,O)},r.className,B()(imagePropsUtil_defineProperty({},"lrn-size-".concat(l),!!l)));return t.assetPath&&(E["data-asset-path"]=t.assetPath),E}function getImageWidthFromSize(t,r,a){var l,S=r<a,O=S?a:r;((l=t===X.e.SMALL?Math.min(O,X.d.SMALL):t===X.e.MEDIUM?Math.min(O,X.d.MEDIUM):t===X.e.LARGE?Math.min(O,X.d.LARGE):Math.min(O,X.d.FULL_SIZE))||(l=0),S)&&(l=parseInt(l*(r/a),10));return l}var se=a(256);function editor_extends(){return(editor_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],l=!0,S=!1,O=void 0;try{for(var E,L=t[Symbol.iterator]();!(l=(E=L.next()).done)&&(a.push(E.value),!r||a.length!==r);l=!0);}catch(t){S=!0,O=t}finally{try{l||null==L.return||L.return()}finally{if(S)throw O}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=t[a];return l}function ImageSizeSelection(t){var r=t.naturalWidth,a=t.naturalHeight,l=t.labels,O=t.size,E=t.responseId,j=function getAvailableSizes(t,r){var a=t<r?r:t;if(a<=X.d.SMALL)return null;var l=[X.e.SMALL];return a>X.d.MEDIUM&&l.push(X.e.MEDIUM),a>X.d.LARGE&&l.push(X.e.LARGE),l.push(X.e.FULL_SIZE),l}(r,a);if(!j)return null;var D=S.a.mapObject(l.imageSize,(function(t,l){return function getImageSizeLabel(t){var r=t.label,a=t.size,l=t.naturalWidth,S=t.naturalHeight,O=l/S,E=getImageWidthFromSize(a,l,S)||l,L=parseInt(E/O,10);return Object(ae.a)(r,{width:E,height:L})}({label:t,size:l,naturalWidth:r,naturalHeight:a})}));return L.a.createElement("div",{className:"lrn-image-properties"},L.a.createElement("div",{className:"lrn-image-properties-inner"},L.a.createElement("label",{htmlFor:"".concat(E,"-image-size")},L.a.createElement("span",{className:"lrn-label-title lrn-display-block"},l.imageSize.title),L.a.createElement("select",{id:"".concat(E,"-image-size"),value:O,className:"lrn-editor-input",onChange:function onChange(l){return function onSizeChange(l){t.onChange({size:l,width:getImageWidthFromSize(l,r,a)})}(l.target.value)},onBlur:S.a.noop},S.a.map(j,(function(t){return L.a.createElement("option",{key:t,value:t},D[t])}))))))}function ZoomableImage(t){var r=t.naturalWidth,a=t.naturalHeight,l=t.containerDimensions.height,S=r>l&&a>l,O=_slicedToArray(Object(E.useState)(!1),2),j=O[0],D=O[1],q={onClick:function onClick(){return D(S&&!j)}},G=generateImageAttributes(t,{className:"className"});return G.className=B()({"lrn-img-zoom-in":S&&j,"lrn-img-zoom-out":S&&!j},G.className),L.a.createElement("img",editor_extends({alt:""},q,G))}function ImageEditor(t){var r=t.children,a=Object(E.useRef)(null),l=_slicedToArray(Object(E.useState)(0),2),S=l[0],O=l[1];return Object(E.useLayoutEffect)((function(){a.current&&a.current.clientHeight!==S&&O(a.current.clientHeight)})),L.a.createElement("div",null,L.a.createElement("div",{className:"lrn-image-uploader-preview",ref:a},L.a.createElement(ZoomableImage,editor_extends({containerDimensions:{height:S}},t))),r,L.a.createElement(ImageSizeSelection,t))}var le=a(317),ce={fileDialog:a.n(le).a},ue=a(21),pe={LONGTEXTV2_UPDATE_WORD_COUNT:"longtextv2:update:wordcount",LONGTEXTV2_UPDATE_WORD_COUNT_EXCEEDED:"longtextv2:update:wordcountexceeded",LONGTEXTV2_UPDATE_WORD_LIMIT_VISIBILITY:"longtextv2:update:wordlimitvisibility",LONGTEXTV2_DISABLE_EDITOR:"longtextv2:disable:editor"};var de={actionTypes:pe,compressImage:function compressImage(t,r){return function(a,l,S){return S.dataService.compressImage(t,r)}},uploadImage:function actions_uploadImage(t,r){return function(a,l,S){return S.dataService.uploadImage(t,r)}},updateValue:function updateValue(t){return function(r,a,l){var S=l.dataService.getResponse();if((S&&S.value)!==(t=l.dataService.formatValue(t))){r({type:pe.LONGTEXTV2_UPDATE_WORD_COUNT,payload:{value:t}});var O=a().longTextV2.footer.wordCount;r(ue.a.updateResponseValue({value:t,wordCount:O}));var E=l.dataService.getWordCountExceeded();r({type:pe.LONGTEXTV2_UPDATE_WORD_COUNT_EXCEEDED,payload:{value:E}});var L=l.dataService.getWordLimitVisibility();r({type:pe.LONGTEXTV2_UPDATE_WORD_LIMIT_VISIBILITY,payload:{value:L}})}}},disableEditor:function disableEditor(t){return{type:pe.LONGTEXTV2_DISABLE_EDITOR,payload:{value:t}}}};function uploadModal_typeof(t){return(uploadModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);r&&(l=l.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.push.apply(a,l)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){uploadModal_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function uploadModal_extends(){return(uploadModal_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function uploadModal_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function uploadModal_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function uploadModal_setPrototypeOf(t,r){return(uploadModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function uploadModal_createSuper(t){var r=function uploadModal_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=uploadModal_getPrototypeOf(t);if(r){var S=uploadModal_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return uploadModal_possibleConstructorReturn(this,a)}}function uploadModal_possibleConstructorReturn(t,r){return!r||"object"!==uploadModal_typeof(r)&&"function"!=typeof r?uploadModal_assertThisInitialized(t):r}function uploadModal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uploadModal_getPrototypeOf(t){return(uploadModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uploadModal_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var fe={url:null,width:0,naturalWidth:0,naturalHeight:0,size:X.e.FULL_SIZE,rotation:0,loading:!1,error:null,warning:null},he=function(t){!function uploadModal_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&uploadModal_setPrototypeOf(t,r)}(UploadImageModal,t);var r=uploadModal_createSuper(UploadImageModal);function UploadImageModal(){var t;uploadModal_classCallCheck(this,UploadImageModal);for(var a=arguments.length,l=new Array(a),O=0;O<a;O++)l[O]=arguments[O];return uploadModal_defineProperty(uploadModal_assertThisInitialized(t=r.call.apply(r,[this].concat(l))),"file",null),uploadModal_defineProperty(uploadModal_assertThisInitialized(t),"state",S.a.extend({},fe)),uploadModal_defineProperty(uploadModal_assertThisInitialized(t),"reset",(function(){t.setState(fe)})),uploadModal_defineProperty(uploadModal_assertThisInitialized(t),"cleanUpAndClose",(function(){t.file=null,t.props.onRequestClose(),t.reset()})),uploadModal_defineProperty(uploadModal_assertThisInitialized(t),"onImageRotationClick",(function(){var r=uploadModal_assertThisInitialized(t),a=r.file,l=r.state,S=r.props,O=l.rotation;return O>-270?O-=90:O=0,t.setState({loading:!0}),S.compressImage(a,{rotation:O}).then(ie.c).then((function(r){t.setState({loading:!1,url:r.src,width:r.width,naturalWidth:r.width,naturalHeight:r.height,rotation:O})}))})),uploadModal_defineProperty(uploadModal_assertThisInitialized(t),"startImageSelection",(function(){t.uploadAborted=!1,ce.fileDialog({multiple:!1,accept:X.b}).then((function(r){t.processSelectedImage(r[0])}))})),uploadModal_defineProperty(uploadModal_assertThisInitialized(t),"onImageEditorChanged",(function(r){var a=r.width,l=r.size;t.setState({width:a,size:l})})),uploadModal_defineProperty(uploadModal_assertThisInitialized(t),"onCancelButtonClicked",(function(){t.uploadAborted=!0,t.cleanUpAndClose()})),uploadModal_defineProperty(uploadModal_assertThisInitialized(t),"onUploadButtonClicked",(function(r){var a=t.state,l=a.rotation,S=a.naturalWidth,O=t.props.uploadImage,E={rotation:l};return S>X.d.FULL_SIZE&&(E.width=X.d.FULL_SIZE),r.preventDefault(),r.stopPropagation(),t.setState({loading:!0}),O(t.file,E).then((function(r){t.uploadAborted||t.insertImage(r)})).catch((function(){t.showProcessingImageError()}))})),t}return function uploadModal_createClass(t,r,a){return r&&uploadModal_defineProperties(t.prototype,r),a&&uploadModal_defineProperties(t,a),t}(UploadImageModal,[{key:"componentDidUpdate",value:function componentDidUpdate(t){var r=this.props,a=r.modalIsOpen,l=r.selectedFile;t.selectedFile!==l&&(this.file=null,this.uploadAborted=!1,l&&a&&this.processSelectedImage(l))}},{key:"render",value:function render(){var t=this,r=this.props,a=r.i18n,l=r.relativeNode,O=r.responseId,E=r.modalIsOpen,j=this.state,D=j.url,q=j.loading,B=j.warning,G=j.error,X=!(!E||!(this.file||q||G||B)),Z=a.labels.editor.modals;return L.a.createElement(Q.a,{className:"lrn-full-width",getRef:function getRef(r){return t.el=r},title:Z.imageTitle,parentNode:l,modalIsOpen:X,onRequestClose:this.onCancelButtonClicked},L.a.createElement("div",{className:"lrn-image-editor-wrapper"},this.getMessage(),G&&L.a.createElement("div",{className:"lrn-config-btn-upload-wrapper"},L.a.createElement("button",{className:"btn lrn_btn_blue lrn-imageupload-config-btn-upload",type:"button",onClick:this.startImageSelection},Z.uploadText)),D&&L.a.createElement(ImageEditor,uploadModal_extends({},this.state,{labels:Z,responseId:O,onChange:this.onImageEditorChanged}),L.a.createElement("button",{className:"lrn_btn lrn-btn-outline image-editor-replace-btn",onClick:this.startImageSelection,disabled:q},L.a.createElement("span",{className:"lrn-icon-image image-editor-replace-span"}),Z.imageReplace),L.a.createElement("button",{className:"lrn_btn lrn-btn-outline image-editor-rotate-btn",onClick:this.onImageRotationClick,disabled:q},L.a.createElement("span",{className:"lrn-icon-image-rotation image-editor-rotate-span"}),Z.imageRotate)),q&&L.a.createElement("div",{className:"lrn-loader-wrapper"},L.a.createElement(se.a,null))),L.a.createElement("hr",null),L.a.createElement("div",{className:"lrn-wysihtml-modal-controls"},L.a.createElement("button",{className:"lrn_btn lrn_btn_blue image-editor-upload-button","data-lrn-action":"upload",onClick:this.onUploadButtonClicked,disabled:S.a.isEmpty(D)||q,type:"button"},Z.upload),L.a.createElement("button",{className:"lrn_btn",onClick:this.onCancelButtonClicked,type:"button"},Z.cancel)))}},{key:"getMessage",value:function getMessage(){var t=this.state,r=t.error,a=t.warning;if(!r&&!a)return null;var l=this.props.i18n.labels.editor.messages,S=r?"error":"warning",O=r?l.failedLoadingImage:l.imageHasBeenOptimized;return L.a.createElement(oe.a,{className:"upload-modal-message",type:S,iconClassMapping:{warning:"lrn-icon-warning",error:"lrn-icon-info"},ariaHidden:!0},O)}},{key:"showProcessingImageError",value:function showProcessingImageError(){this.file=null,this.uploadAborted=!1,this.setState({loading:!1,url:null,error:!0})}},{key:"processSelectedImage",value:function processSelectedImage(t){var r,a=this;return this.setState({loading:!0,error:!1}),Object(ie.c)(t).then((function(a){return r=a.width,t})).then((function processImage(){return a.shouldCompress(t,r)?(a.setState({warning:a.shouldShowWarning(t,r)}),r>X.d.FULL_SIZE&&(l={width:X.d.FULL_SIZE}),a.props.compressImage(t,{rotation:0,compressOptions:l})):(a.setState({warning:null,error:null}),Promise.resolve(t));var l})).then((function(t){return a.file=t,Object(ie.c)(t)})).then((function(t){return a.setState({loading:!1,url:t.src,width:t.width,naturalWidth:t.width,naturalHeight:t.height,rotation:0})})).catch((function(){a.showProcessingImageError()}))}},{key:"insertImage",value:function insertImage(t){var r=t.url,a=t.assetPath;(0,this.props.onApply)(generateImageAttributes(_objectSpread(_objectSpread({},this.state),{},{url:r,assetPath:a}))),this.cleanUpAndClose()}},{key:"shouldCompress",value:function shouldCompress(t,r){return t.size>this.props.maxFileSize||r>X.d.FULL_SIZE}},{key:"shouldShowWarning",value:function shouldShowWarning(t,r){return t.size>this.props.warningFileSize||r>X.d.FULL_SIZE}}]),UploadImageModal}(L.a.PureComponent),me=D.b((function(t){return{maxFileSize:t.longTextV2.maxFileSize,warningFileSize:t.longTextV2.warningFileSize}}),(function(t){return{compressImage:j.b(de.compressImage,t),uploadImage:j.b(de.uploadImage,t)}}))(he);function insertImageButton_extends(){return(insertImageButton_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function insertImageButton_slicedToArray(t,r){return function insertImageButton_arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function insertImageButton_iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],l=!0,S=!1,O=void 0;try{for(var E,L=t[Symbol.iterator]();!(l=(E=L.next()).done)&&(a.push(E.value),!r||a.length!==r);l=!0);}catch(t){S=!0,O=t}finally{try{l||null==L.return||L.return()}finally{if(S)throw O}}return a}(t,r)||function insertImageButton_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return insertImageButton_arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return insertImageButton_arrayLikeToArray(t,r)}(t,r)||function insertImageButton_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function insertImageButton_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=t[a];return l}function editorModal_typeof(t){return(editorModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function editorModal_extends(){return(editorModal_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function editorModal_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function editorModal_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function editorModal_setPrototypeOf(t,r){return(editorModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function editorModal_createSuper(t){var r=function editorModal_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=editorModal_getPrototypeOf(t);if(r){var S=editorModal_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return editorModal_possibleConstructorReturn(this,a)}}function editorModal_possibleConstructorReturn(t,r){return!r||"object"!==editorModal_typeof(r)&&"function"!=typeof r?editorModal_assertThisInitialized(t):r}function editorModal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function editorModal_getPrototypeOf(t){return(editorModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function editorModal_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var ge={url:null,align:"",width:0,naturalWidth:0,size:X.e.FULL_SIZE},ye={InsertImageButton:function InsertImageButton(t){var r=insertImageButton_slicedToArray(Object(E.useState)(!1),2),a=r[0],l=r[1],O=insertImageButton_slicedToArray(Object(E.useState)(null),2),j=O[0],D=O[1],q=t.isActive,G=t.visible,$=t.onApply,Q=t.getContainer,ee=t.onModal,te=t.editableElementSelector,ne=B()({hide:!G}),re=S.a.debounce((function(){D(null),ce.fileDialog({multiple:!1,accept:X.b}).then((function(t){ee(!0),l(!0),D(t[0])}))}),10,!0),oe=function(){var t=Q();if(t){var r=t.querySelector(te),a=r&&r.querySelectorAll("img");return!!(a&&a.length>=X.f)}return!1}();return L.a.createElement(L.a.Fragment,null,L.a.createElement(Z.a.Button,insertImageButton_extends({},t,{isActive:q,disabled:oe,className:ne,onClick:re})),L.a.createElement(me,insertImageButton_extends({},t,{selectedFile:j,relativeNode:Q,modalIsOpen:a,onRequestClose:function closeModal(){ee(null),D(null),l(!1)},onApply:$})))},EditImageButton:modalWithToggle(function(t){!function editorModal_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&editorModal_setPrototypeOf(t,r)}(ImageEditorModal,t);var r=editorModal_createSuper(ImageEditorModal);function ImageEditorModal(){var t;editorModal_classCallCheck(this,ImageEditorModal);for(var a=arguments.length,l=new Array(a),O=0;O<a;O++)l[O]=arguments[O];return editorModal_defineProperty(editorModal_assertThisInitialized(t=r.call.apply(r,[this].concat(l))),"state",S.a.extend({},ge)),editorModal_defineProperty(editorModal_assertThisInitialized(t),"cleanUpAndClose",(function(){t.setState(ge),t.props.onRequestClose()})),editorModal_defineProperty(editorModal_assertThisInitialized(t),"onImageEditorChanged",(function(r){var a=r.width,l=r.size;t.setState({width:a,size:l})})),editorModal_defineProperty(editorModal_assertThisInitialized(t),"onApply",(function(r){var a=t.props.onApply,l=generateImageAttributes(t.state);r.preventDefault(),r.stopPropagation(),a(l),t.cleanUpAndClose()})),t}return function editorModal_createClass(t,r,a){return r&&editorModal_defineProperties(t.prototype,r),a&&editorModal_defineProperties(t,a),t}(ImageEditorModal,[{key:"componentDidUpdate",value:function componentDidUpdate(){var t=this.props,r=t.image;t.modalIsOpen&&r&&this.state.url!==r.url&&this.setState(S.a.extend({},ge,r))}},{key:"render",value:function render(){var t=this,r=this.state.url,a=this.props,l=a.i18n,S=a.relativeNode,O=a.responseId,E=a.modalIsOpen,j=l.labels.editor.modals;return L.a.createElement(L.a.Fragment,null,L.a.createElement(Q.a,{className:"lrn-full-width",getRef:function getRef(r){return t.el=r},title:j.imageTitle,parentNode:S,modalIsOpen:E,onRequestClose:this.cleanUpAndClose},r&&L.a.createElement(L.a.Fragment,null,L.a.createElement(ImageEditor,editorModal_extends({},this.state,{labels:j,responseId:O,onChange:this.onImageEditorChanged})),L.a.createElement("hr",null),L.a.createElement("div",{className:"lrn-wysihtml-modal-controls"},L.a.createElement("button",{className:"lrn_btn lrn_btn_blue editor-modal-blue-button","data-lrn-action":"apply",onClick:this.onApply,type:"button"},j.apply),L.a.createElement("button",{className:"lrn_btn","data-lrn-action":"cancel",onClick:this.cleanUpAndClose,type:"button"},j.cancel)))))}}]),ImageEditorModal}(L.a.PureComponent))};function subToolbar_extends(){return(subToolbar_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}var _e=function getImageFromProps(t){var r=S.a.findWhere(t.activeActions,{action:"insertImage"}),a=r&&r.target;return a?function getImageProps(t){var r,a,l,S=t.naturalWidth,O=t.naturalHeight,E=t.width,L=t.src,j=t.className;return{naturalWidth:S,naturalHeight:O,url:L,width:E||0,size:(r=j,a="lrn-size-(\\S+)",l=new RegExp(a,"g").exec(r),(l&&l.length>=2?l[1]:"")||X.e.FULL_SIZE)}}(a):null};function ImageEditorSubControl(t){var r=t.image,a=t.i18n,l=t.onClick,S=t.onModal,O=a.labels.editor.toolbar,E=!!r;return L.a.createElement(L.a.Fragment,null,L.a.createElement(ye.EditImageButton,subToolbar_extends({},t,{name:"editImage",image:r,getImage:function getImage(){return r},icon:X.a.image.icons.edit,label:O.editImage,isActive:!1,visible:!0,disabled:!E,onApply:function onApply(t){return l({type:"insertImage",params:t})},onModal:function onModal(t){return S(t?"editImage":null)}})),L.a.createElement(Z.a.Button,subToolbar_extends({},t,{name:"preview",icon:X.a.image.icons.preview,label:O.previewImage,disabled:!E,onClick:function onClick(){return l({type:"previewImage",url:r.url})}})),L.a.createElement(Z.a.Button,subToolbar_extends({},t,{name:"delete",icon:X.a.image.icons.delete,label:O.deleteImage,disabled:!E,onClick:function onClick(){return l({type:"deleteImage"})}})))}function SubToolbar(t){var r=_e(t),a=B()({in:!!r},"lrn-sub-toolbar lrn-wysihtml-toolbar lrn-animation-dropdown");return L.a.createElement("div",{className:a},S.a.contains(t.formattingOptions,"image")&&L.a.createElement(ImageEditorSubControl,subToolbar_extends({},t,{image:r})))}var be=a(281),ve=a(31);function toolbar_typeof(t){return(toolbar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function toolbar_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function toolbar_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function toolbar_setPrototypeOf(t,r){return(toolbar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function toolbar_createSuper(t){var r=function toolbar_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=toolbar_getPrototypeOf(t);if(r){var S=toolbar_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return toolbar_possibleConstructorReturn(this,a)}}function toolbar_possibleConstructorReturn(t,r){return!r||"object"!==toolbar_typeof(r)&&"function"!=typeof r?toolbar_assertThisInitialized(t):r}function toolbar_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function toolbar_getPrototypeOf(t){return(toolbar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function toolbar_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return toolbar_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function toolbar_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return toolbar_arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return toolbar_arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function toolbar_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=t[a];return l}function toolbar_extends(){return(toolbar_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}var we="ArrowRight",Ce="ArrowLeft";function getControls(t,r){return S.a.reduce(t.formattingOptions,(function(a,l){var S=X.a[l],O=a.length,E={control:S,key:l,index:O,props:t,selectedIndex:r};if(S&&(a.push(getControl(E)),"table"===l)){var L={control:X.a.editTable,key:"editTable",index:O+1,props:t,selectedIndex:r};a.push(getControl(L))}return a}),[])}function getControl(t){var r=t.control,a=t.key,l=t.index,O=t.props,E=t.selectedIndex,j=O.i18n,D=O.isChemistry,q=O.disabled,B=O.activeModal,G=O.formulaEditorHorizontalLayout,X=O.formulaEditorNumberPad,Q=O.formulaEditorSymbols,ee=O.formulaEditorTextBlocks,te=O.modalData,re=O.activeActions,oe=O.onClick,ie=O.onModal,ae=O.onMouseEnter,se=O.onMouseLeave,le=O.characterMapModalClassName,ce=O.focusButtonInsideToolbar,ue=O.disableSpokenmathUserInputs,pe=j.labels.ariaLabel,de=r.icon,fe=r.type,he=j.labels.editor.toolbar[a],me=!!S.a.findWhere(re,{action:a}),ge="".concat(a).concat(l),_e=l===E?0:-1;switch(fe){case"divider":return L.a.createElement(Z.a.Divider,{key:ge,name:fe});case"button":return L.a.createElement(Z.a.Button,toolbar_extends({},O,{key:ge,name:a,icon:de,label:he,tabIndex:_e,isActive:me,disabled:q,onClick:function onClick(){return oe({type:a})}}));case"charactermap":var ve=O.characterMap,we=!0===ve?_toConsumableArray(j.labels.characterMapCharacters):ve;return L.a.createElement($.a.CharacterMapButton,{key:ge,label:j.labels.characterMapIcon,title:j.labels.characterMapTitle,disabled:q,characters:we,className:"lrn-wysihtml-toolbar",modalClassName:le,tabIndex:_e,recoverFocus:ce,onMouseEnter:function onMouseEnter(){return ae(j.labels.characterMapTitle)},onMouseLeave:se,onSelect:function onSelect(t){return oe({type:"characterMap",params:t})}});case"characterMathMap":var Ce=_toConsumableArray(j.labels.characterMapMathCharacters);return(L.a.createElement($.a.CharacterMapButton,{key:ge,label:j.labels.characterMapMathIcon,title:j.labels.characterMathMapTitle,onMouseEnter:function onMouseEnter(){return ae(j.labels.characterMathMapTitle)},onMouseLeave:se,disabled:q,characters:Ce,tabIndex:_e,recoverFocus:ce,className:"lrn-wysihtml-toolbar",modalClassName:le,onSelect:function onSelect(t){return oe({type:"characterMap",params:t})}}));case"createTable":var Se=S.a.findWhere(re,{action:"editTable"});return(L.a.createElement(ne.CreateTableButton,toolbar_extends({},O,{key:ge,name:a,icon:de,tabIndex:_e,label:he,disabled:q,visible:!Se,onApply:function onApply(t){return oe({type:"createTable",params:t})},onModal:function onModal(t){return ie(t?"createTable":null)}})));case"editTable":return L.a.createElement(ne.EditTableButton,toolbar_extends({},O,{key:ge,name:a,icon:de,tabIndex:_e,label:j.labels.editor.editTable,isActive:me,visible:me,disabled:q,onApply:function onApply(t){return oe({type:t.type,params:t.params})},onModal:function onModal(t){return ie(t?"editTable":null)}}));case"insertImage":return L.a.createElement(ye.InsertImageButton,{i18n:j,getContainer:O.getContainer,editableElementSelector:O.editableElementSelector,responseId:O.responseId,key:ge,name:"insertImage",icon:de,tabIndex:_e,label:he,visible:!0,onMouseEnter:ae,onMouseLeave:se,onApply:function onApply(t){return oe({type:"insertImage",params:t})},onModal:function onModal(t){return ie(t?"insertImage":null)}});case"formulaEditor":return L.a.createElement(be.a.FormulaEditorButton,{activeModal:B,className:"lrn-wysihtml-toolbar",disabled:q,getContainer:O.getContainer,disableSpokenmathUserInputs:ue,horizontalLayout:G,i18n:j,icon:de,isActive:me,isChemistry:D,key:ge,modalData:te,onApply:function onApply(t){return oe(t)},onModal:ie,onMouseEnter:function onMouseEnter(){return ae(pe.mathKeyboard.title)},onMouseLeave:se,tabIndex:_e,symbols:Q,textBlocks:ee,numberPad:X,title:pe.mathKeyboard.title});default:return null}}function lrnToolbar_extends(){return(lrnToolbar_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}var Se={WYSIHTML:function withWYSIHTML(t){return function(r){return r.isReviewState?null:L.a.createElement(t,lrnToolbar_extends({},r,{className:"lrn-wysihtml-toolbar",activeClassName:"wysihtml-command-active",role:"group"}))}}(function(t){!function toolbar_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&toolbar_setPrototypeOf(t,r)}(Toolbar,t);var r=toolbar_createSuper(Toolbar);function Toolbar(){var t;toolbar_classCallCheck(this,Toolbar);for(var a=arguments.length,l=new Array(a),S=0;S<a;S++)l[S]=arguments[S];return toolbar_defineProperty(toolbar_assertThisInitialized(t=r.call.apply(r,[this].concat(l))),"state",{index:0}),toolbar_defineProperty(toolbar_assertThisInitialized(t),"handleKeyDown",(function(r){r.stopPropagation();var a=r.key;if(a===Ce||a===we){var l=t.rovingTabIndex(a);t.setState({index:l})}})),toolbar_defineProperty(toolbar_assertThisInitialized(t),"rovingTabIndex",(function(r){for(var a=toolbar_assertThisInitialized(t),l=a.props,S=a.state,O=getControls(l,S.index),E=t.moveIndex(S.index,r,O.length);"divider"===O[E].props.name||"editTable"===O[E].props.name;)E=t.moveIndex(E,r,O.length);return E})),toolbar_defineProperty(toolbar_assertThisInitialized(t),"moveIndex",(function(t,r,a){var l=t,S=ve.a.getKeyDirection(r);return S===ve.a.direction.LEFT?l--:S===ve.a.direction.RIGHT&&l++,Math.max(Math.min(l,a-1),0)})),t}return function toolbar_createClass(t,r,a){return r&&toolbar_defineProperties(t.prototype,r),a&&toolbar_defineProperties(t,a),t}(Toolbar,[{key:"componentDidUpdate",value:function componentDidUpdate(t,r){this.state.index!==r.index&&this.props.focusButtonInsideToolbar()}},{key:"render",value:function render(){var t=this.props,r=this.state,a=t.i18n.labels.ariaLabel,l=getControls(t,r.index),S=B()({"lrn-toolbar-rtl":t.toolbarRtlEditingMode},t.className,"lrn_clearfix");return L.a.createElement("div",{className:"lrn-toolbar"},L.a.createElement("div",{ref:t.toolbarRef,onKeyDown:this.handleKeyDown,className:S,role:"toolbar","aria-label":a.longTextV2.toolbar},l),L.a.createElement(SubToolbar,t))}}]),Toolbar}(L.a.Component))};function preview_typeof(t){return(preview_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function preview_ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);r&&(l=l.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.push.apply(a,l)}return a}function preview_objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?preview_ownKeys(Object(a),!0).forEach((function(r){preview_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):preview_ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function preview_extends(){return(preview_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function preview_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function preview_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function preview_createClass(t,r,a){return r&&preview_defineProperties(t.prototype,r),a&&preview_defineProperties(t,a),t}function preview_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&preview_setPrototypeOf(t,r)}function preview_setPrototypeOf(t,r){return(preview_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function preview_createSuper(t){var r=function preview_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=preview_getPrototypeOf(t);if(r){var S=preview_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return preview_possibleConstructorReturn(this,a)}}function preview_possibleConstructorReturn(t,r){return!r||"object"!==preview_typeof(r)&&"function"!=typeof r?preview_assertThisInitialized(t):r}function preview_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function preview_getPrototypeOf(t){return(preview_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function preview_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Oe={fullSize:!1,scrollPosition:null,zoomable:!1,imageSizeText:""},Pe=function(t){preview_inherits(ImagePreview,t);var r=preview_createSuper(ImagePreview);function ImagePreview(){var t;preview_classCallCheck(this,ImagePreview);for(var a=arguments.length,l=new Array(a),S=0;S<a;S++)l[S]=arguments[S];return preview_defineProperty(preview_assertThisInitialized(t=r.call.apply(r,[this].concat(l))),"state",preview_objectSpread({},Oe)),preview_defineProperty(preview_assertThisInitialized(t),"onImageClick",(function(r){if(r.preventDefault(),r.stopPropagation(),t.state.fullSize)t.onToggleFullSize();else{var a=r.currentTarget.getBoundingClientRect(),l=(r.clientX-a.left)/a.width,S=(r.clientY-a.top)/a.height;t.setState({fullSize:!0},(function(){t.scrollToPosition(l,S)}))}})),preview_defineProperty(preview_assertThisInitialized(t),"validateImageSize",(function(){if(t.image&&t.imageWrapper){var r=t.props.labels,a=t.image,l=a.naturalWidth,S=a.naturalHeight,O=t.imageWrapper.getBoundingClientRect();t.setState({imageSizeText:Object(ae.a)(r.imagePreviewText,{width:l,height:S}),zoomable:l>O.width||S>O.height})}})),preview_defineProperty(preview_assertThisInitialized(t),"close",(function(){t.setState(Oe),t.props.onClose()})),preview_defineProperty(preview_assertThisInitialized(t),"onToggleFullSize",(function(){t.setState({fullSize:!t.state.fullSize})})),t}return preview_createClass(ImagePreview,[{key:"render",value:function render(){var t=this,r=this.props,a=this.state,l=r.url,S=r.labels,O=a.fullSize,E=a.zoomable,j=a.imageSizeText;if(!l)return null;var D=B()({"full-size":O,zoomable:E}),q=E?{onClick:this.onImageClick}:{};return L.a.createElement("div",{className:"lrn-image-preview"},L.a.createElement("div",{className:"lrn-image-preview-toolbar"},L.a.createElement("div",{className:"lrn-image-preview-size-label"},j),L.a.createElement("div",{className:"lrn-image-preview-control"},L.a.createElement("a",{className:"lrn_btn lrn-btn-outline snow-theme",href:l,target:"_blank"},S.openImageURL),E&&L.a.createElement("button",{className:"lrn_btn lrn-btn-outline snow-theme",onClick:this.onToggleFullSize,type:"button"},O?S.zoomOut:S.zoomIn)),L.a.createElement("div",{className:"close-button"},L.a.createElement("button",{className:"lrn_btn lrn-btn-outline snow-theme lrn-btn-close",type:"button",onClick:this.close},L.a.createElement("span",{className:"lrn-icon-clear"})))),L.a.createElement("div",{className:"lrn-image-wrapper-container"},L.a.createElement("div",{className:"lrn-image-wrapper",ref:function ref(r){return t.imageWrapper=r}},L.a.createElement("img",preview_extends({src:l,className:D,onLoad:this.validateImageSize,ref:function ref(r){return t.image=r},alt:S.imageTitle},q)))))}},{key:"scrollToPosition",value:function scrollToPosition(t,r){var a=this.image.getBoundingClientRect(),l=a.width,S=a.height,O=this.imageWrapper.getBoundingClientRect(),E=parseInt(t*l-O.width/2,10),L=parseInt(r*S-O.height/2,10);this.imageWrapper.scrollTop=L,this.imageWrapper.scrollLeft=E}}]),ImagePreview}(L.a.PureComponent),xe=function withImageClickDetection(t){return function(r){preview_inherits(_temp,r);var a=preview_createSuper(_temp);function _temp(){var t;preview_classCallCheck(this,_temp);for(var r=arguments.length,l=new Array(r),S=0;S<r;S++)l[S]=arguments[S];return preview_defineProperty(preview_assertThisInitialized(t=a.call.apply(a,[this].concat(l))),"state",{url:null}),preview_defineProperty(preview_assertThisInitialized(t),"onContainerClick",(function(r){r.preventDefault(),r.stopPropagation(),"IMG"===r.target.tagName&&(t.setState({url:r.target.src}),t.props.onOpen())})),preview_defineProperty(preview_assertThisInitialized(t),"onClose",(function(){t.setState({url:null}),t.props.onClose()})),t}return preview_createClass(_temp,[{key:"componentDidMount",value:function componentDidMount(){this.container=this.props.getContainer(),this.container.addEventListener("click",this.onContainerClick)}},{key:"componentDidUpdate",value:function componentDidUpdate(t,r){r.url!==this.state.url&&(this.state.url?this.container.removeEventListener("click",this.onContainerClick):this.container.addEventListener("click",this.onContainerClick))}},{key:"render",value:function render(){return L.a.createElement(t,preview_extends({},this.props,{url:this.state.url,onClose:this.onClose}))}}]),_temp}(L.a.PureComponent)}(Pe),Te=a(267);function Tooltip(t){var r=t.disabled,a=t.activeAction;return r?null:L.a.createElement("span",null,a)}function LengthIndicator(t){var r=t.wordCountExceeded,a="lrn_length_indicator  ".concat(r?"lrn_wordcount_warning_label":"");return L.a.createElement("span",{className:a}," ",L.a.createElement(WordCount,t),L.a.createElement(WordStatic,t),L.a.createElement(WordLimit,t),L.a.createElement(AccessibleCounter,t))}function WordCount(t){var r=t.wordCountVisible,a=t.wordCount;return r?L.a.createElement("span",{className:"lrn_word_count"},a):null}function AccessibleCounter(t){var r=t.textToAnnounce;return(L.a.createElement("span",{className:"sr-only","aria-live":"polite","aria-atomic":"true"},r))}function WordStatic(t){var r=t.wordStaticVisible,a=t.wordCountVisible,l=t.i18n.labels.word;return r&&a?L.a.createElement("span",{className:"lrn_static_words"},l):null}function WordLimit(t){var r=t.wordLimitVisible,a=t.wordCountVisible,l=t.wordMaxLength,S=a?" /":"",O=t.i18n.labels.wordLength,E="".concat(S," ").concat(l," ").concat(O);return r?L.a.createElement("span",{className:"lrn_word_limit"},E):null}var Ee=function Footer(t){return L.a.createElement("footer",{className:"lrn-toolbar-footer  lrn_clearfix"},L.a.createElement("div",{className:"lrn_toolbar_footer_left"},L.a.createElement(Tooltip,t)),L.a.createElement("div",{className:"lrn_toolbar_footer_right"},L.a.createElement(LengthIndicator,t)))};function longTextV2_typeof(t){return(longTextV2_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function longTextV2_extends(){return(longTextV2_extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function longTextV2_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function longTextV2_createClass(t,r,a){return r&&longTextV2_defineProperties(t.prototype,r),a&&longTextV2_defineProperties(t,a),t}function longTextV2_setPrototypeOf(t,r){return(longTextV2_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function longTextV2_createSuper(t){var r=function longTextV2_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=longTextV2_getPrototypeOf(t);if(r){var S=longTextV2_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return longTextV2_possibleConstructorReturn(this,a)}}function longTextV2_possibleConstructorReturn(t,r){return!r||"object"!==longTextV2_typeof(r)&&"function"!=typeof r?longTextV2_assertThisInitialized(t):r}function longTextV2_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function longTextV2_getPrototypeOf(t){return(longTextV2_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function longTextV2_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Ie=function(t){!function longTextV2_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&longTextV2_setPrototypeOf(t,r)}(LongTextV2,t);var r=longTextV2_createSuper(LongTextV2);function LongTextV2(t){var a;return function longTextV2_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,LongTextV2),longTextV2_defineProperty(longTextV2_assertThisInitialized(a=r.call(this,t)),"state",{toolbarActiveActions:[],toolbarRtlEditingMode:ve.a.isRtl(),footerActiveAction:null,isPreviewingImage:!1,previewingImageUrl:null,actionToDo:null,activeModal:null,modalData:null,container:null,textToAnnounce:""}),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"toolbarRef",L.a.createRef()),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"setContainerElement",(function(t){return a.el=t})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"getContainerElement",(function(){return a.el})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onImagePreviewOpened",(function(){return a.setState({isPreviewingImage:!0})})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onImagePreviewClosed",(function(){return a.setState({isPreviewingImage:!1,previewingImageUrl:null})})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"focusButtonInsideToolbar",(function(){var t=a.toolbarRef.current.querySelector("[tabIndex='0']");t&&t.focus()})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onToolbarControlHover",(function(t){a.setState({footerActiveAction:t})})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onToolbarActionToDo",(function(t){t&&"previewImage"===t.type?(a.setState({previewingImageUrl:t.url}),a.onImagePreviewOpened()):a.setState({actionToDo:t})})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onEditorActionDone",(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=r.type,O=S()([X.c.EDIT_FORMULA,X.c.CREATE_FORMULA]).contains(l);O&&a.props.renderMath(),a.setState(S.a.extend(getToolbarState(t),{actionToDo:null}))})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onEditorInteraction",(function(t){a.setState(getToolbarState(t))})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onEditorValueChange",(function(t){a.props.longTextV2Actions.updateValue(t),a.updateAriaLiveText()})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onMathWidgetPaste",(function(){a.props.renderMath()})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onMathWidgetSelect",(function(t){a.onModal(X.g.FORMULA_EDITOR,t)})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"updateAriaLiveText",(function(){var t=a.getWordLimitText();setTimeout((function(){return!a._unmounted&&a.setState({textToAnnounce:t})}),500)})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"getWordLimitText",(function(){var t=a.props.longTextV2.footer,r=t.wordCount,l=t.wordMaxLength,S=t.wordCountVisible,O=t.wordLimitVisible,E="of ".concat(l," allowed");return S?"".concat(r," words written ").concat(O?E:""):""})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onModal",(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a.setState({modalData:r,activeModal:t})})),a.onEditorValueChange=S.a.debounce(a.onEditorValueChange,500).bind(longTextV2_assertThisInitialized(a)),a.updateAriaLiveText=S.a.debounce(a.updateAriaLiveText,500),a}return longTextV2_createClass(LongTextV2,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!this._unmounted}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0}}]),longTextV2_createClass(LongTextV2,[{key:"render",value:function render(){var t=this,r=this.props,a=r.base,l=r.longTextV2,O=r.canInsertImage,E=a.isReviewState,j=a.isPreviewState,D=a.readOnly,q=a.disabled,X=a.i18n,Z=a.fontSizeClass,$=a.responseId,Q=l.wordCountExceeded,ee=l.disableAutoLink,te=this.state,ne=te.toolbarActiveActions,re=te.toolbarRtlEditingMode,oe=te.isPreviewingImage,ie=te.previewingImageUrl,ae=te.footerActiveAction,se=te.actionToDo,le=te.activeModal,ce=te.modalData,ue=te.container,pe=te.textToAnnounce,de=B()({lrn_texteditor_inactive:le,lrn_hide:oe},"lrn_texteditor"),fe=q||D,he="chemistryessayV2"===a.questionType,me=a.disableSpokenmathUserInputs,ge=l.toolbar.formattingOptions,ye=!S.a.contains(ge,"image"),_e=!S.a.contains(ge,"formulaEditor"),be=X.labels.longTextV2,ve=be.invalidExternalImageWarning,we=be.invalidExternalMathWarning;return L.a.createElement(G.a,{responsive:O},L.a.createElement("div",{className:"lrn_response_input_wrapper"},L.a.createElement("div",{className:de,ref:this.setContainerElement},L.a.createElement(Se.WYSIHTML,longTextV2_extends({},l.toolbar,{toolbarRtlEditingMode:re,isReviewState:E,isPreviewState:j,disableSpokenmathUserInputs:me,i18n:X,isChemistry:he,characterMapModalClassName:Z,disabled:fe||le,activeActions:ne,activeModal:le,modalData:ce,responseId:$,getContainer:function getContainer(){return ue},editableElementSelector:".".concat("lrn_longtextinput"),onMouseEnter:this.onToolbarControlHover,onMouseLeave:function onMouseLeave(){return t.onToolbarControlHover(null)},onClick:this.onToolbarActionToDo,onModal:this.onModal,focusButtonInsideToolbar:this.focusButtonInsideToolbar,toolbarRef:this.toolbarRef})),L.a.createElement(Te.a.WYSIHTML,longTextV2_extends({},l.lrnEditor,{isReviewState:E,readOnly:D,className:"lrn_longtextinput",disabled:fe,inactive:!!le,i18n:X,wordCountExceeded:Q,actionToDo:se,focusButtonInsideToolbar:this.focusButtonInsideToolbar,onInteraction:this.onEditorInteraction,onValueChange:this.onEditorValueChange,onActionDone:this.onEditorActionDone,onMathWidgetSelect:this.onMathWidgetSelect,onMathWidgetPaste:this.onMathWidgetPaste,disableAutoLink:ee,invalidExternalImageWarning:ve,invalidExternalMathWarning:we,stripExternalPastedImages:ye,stripExternalPastedMath:_e})),L.a.createElement(Ee,longTextV2_extends({},l.footer,{textToAnnounce:pe,i18n:X,disabled:fe,wordCountExceeded:Q,activeAction:ae}))),D&&L.a.createElement(xe,{labels:X.labels.editor.modals,getContainer:this.getContainerElement,onOpen:this.onImagePreviewOpened,onClose:this.onImagePreviewClosed}),!D&&O&&L.a.createElement(Pe,{url:ie,labels:X.labels.editor.modals,visible:oe,getContainer:this.getContainerElement,onOpen:this.onImagePreviewOpened,onClose:this.onImagePreviewClosed})))}},{key:"componentDidMount",value:function componentDidMount(){this.setState({container:this.el})}}]),LongTextV2}(L.a.Component);function getToolbarState(t){return{toolbarActiveActions:t,toolbarRtlEditingMode:S.a.isEmpty(t)?ve.a.isRtl():S.a.some(t,{action:"textDirectionRtl"})}}var Me=D.b((function(t){return{base:t.base,longTextV2:t.longTextV2,canInsertImage:S.a.contains(t.longTextV2.toolbar.formattingOptions,"image")}}),(function(t){return{longTextV2Actions:j.b(de,t),renderMath:j.b(ue.a.renderMathIfRequired,t)}}))(Ie),Ae=a(26),Le=a(218),Re=a(202),ke=a(257);function dataService_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=t[a];return l}function dataService_typeof(t){return(dataService_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dataService_defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var l=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=dataService_getPrototypeOf(t)););return t}(t,r);if(l){var S=Object.getOwnPropertyDescriptor(l,r);return S.get?S.get.call(a):S.value}})(t,r,a||t)}function dataService_setPrototypeOf(t,r){return(dataService_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function dataService_createSuper(t){var r=function dataService_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,l=dataService_getPrototypeOf(t);if(r){var S=dataService_getPrototypeOf(this).constructor;a=Reflect.construct(l,arguments,S)}else a=l.apply(this,arguments);return dataService_possibleConstructorReturn(this,a)}}function dataService_possibleConstructorReturn(t,r){return!r||"object"!==dataService_typeof(r)&&"function"!=typeof r?dataService_assertThisInitialized(t):r}function dataService_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dataService_getPrototypeOf(t){return(dataService_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ze=function(t){!function dataService_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&dataService_setPrototypeOf(t,r)}(LongTextV2DataService,t);var r=dataService_createSuper(LongTextV2DataService);function LongTextV2DataService(t,a){var l;return function dataService_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,LongTextV2DataService),l=r.call(this,t,a),Object(Le.a)(dataService_assertThisInitialized(l)),Object(ke.a)(dataService_assertThisInitialized(l)),l}return function dataService_createClass(t,r,a){return r&&dataService_defineProperties(t.prototype,r),a&&dataService_defineProperties(t,a),t}(LongTextV2DataService,[{key:"getInitialState",value:function getInitialState(){var t=_get(dataService_getPrototypeOf(LongTextV2DataService.prototype),"getInitialState",this).call(this),r=this.placeholder,a=this.browserSpellCheck,l=Object(Re.a)(a),O=Object(Re.b)(a),E=Object(Re.c)(a),L=this.responseValue,j=this.uiStyle,D=this.wordCount,q=this.wordCountExceeded,B=this.wordCountVisible,G=this.wordLimitVisibility,X=G.wordStatic,Z=G.wordLimit,$=this.wordMaxLength,Q=this.formattingOptions,ee=this.characterMap,te=this.disableAutoLink,ne=this.formulaEditorHorizontalLayout,re=this.formulaEditorSymbols,oe=this.formulaEditorTextBlocks,ie=this.formulaEditorNumberPad;return S.a.extend(t,{longTextV2:{wordCountExceeded:q,disableAutoLink:te,maxFileSize:this.maxFileSize,warningFileSize:this.warningFileSize,toolbar:{formattingOptions:Q,characterMap:ee,formulaEditorHorizontalLayout:ne,formulaEditorNumberPad:ie,formulaEditorSymbols:re,formulaEditorTextBlocks:oe},lrnEditor:{placeholder:r,spellCheck:a,autocapitalize:l,autocomplete:O,autocorrect:E,responseValue:L,uiStyle:j},footer:{wordCount:D,wordCountVisible:B,wordStaticVisible:X,wordLimitVisible:Z,wordMaxLength:$}}})}},{key:"getWordLimitVisibility",value:function getWordLimitVisibility(){return this.wordLimitVisibility}},{key:"getWordCountExceeded",value:function getWordCountExceeded(){return this.wordCountExceeded}},{key:"formatValue",value:function formatValue(t){return t=(t||"").replace(/<p[^>]*>\s?<\/p>/gi,"")}},{key:"wordLimitVisibility",get:function get(){var t,r,a=this.model,l=a.SHOW_WORD_LIMITS,S=a.getShowWordLimit();return S===l.ALWAYS||S===l.ON&&this.wordCountExceeded?(r=!0,t=!1):(r=!1,t=!0),{wordLimit:r,wordStatic:t}}},{key:"placeholder",get:function get(){return this.model.getPlaceholder()}},{key:"browserSpellCheck",get:function get(){return this.model.getBrowserSpellCheck()}},{key:"disableAutoLink",get:function get(){return this.model.disableAutoLink()}},{key:"formulaEditorHorizontalLayout",get:function get(){return!!this.question.horizontal_layout}},{key:"formulaEditorNumberPad",get:function get(){return this.question.numberPad}},{key:"formulaEditorSymbols",get:function get(){return this.question.symbols}},{key:"formulaEditorTextBlocks",get:function get(){return this.question.text_blocks}},{key:"responseValue",get:function get(){var t=this.getResponse();return S.a.getNested(t,"value")}},{key:"uiStyle",get:function get(){var t=S.a.extend({},this.model.getUIStyle());return t.minHeight=t.min_height||"",t.maxHeight=t.max_height||"",delete t.min_height,delete t.max_height,t}},{key:"wordCount",get:function get(){return this.model.getWordCount()}},{key:"wordCountExceeded",get:function get(){return this.model.wordCountExceeded()}},{key:"wordCountVisible",get:function get(){return this.model.getShowWordCount()}},{key:"wordMaxLength",get:function get(){return this.model.getMaxLength()}},{key:"formattingOptions",get:function get(){return this.model.getFormattingOptions()}}]),LongTextV2DataService}(Ae.a);ze.prototype.EXPOSED_METHODS=[].concat(function dataService_toConsumableArray(t){return function dataService_arrayWithoutHoles(t){if(Array.isArray(t))return dataService_arrayLikeToArray(t)}(t)||function dataService_iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function dataService_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return dataService_arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return dataService_arrayLikeToArray(t,r)}(t)||function dataService_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ze.prototype.EXPOSED_METHODS),["getWordLimitVisibility","getWordCountExceeded","formatValue"]);var je,De=ze,Ne=a(25),Fe=a(210);function reducer_defineProperty(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Ve=Object(Fe.a)("[\\p{L}\\p{N}]"),Ue=de.actionTypes,We=(reducer_defineProperty(je={},Ue.LONGTEXTV2_UPDATE_WORD_COUNT,(function(t,r){var a=t.footer,l=function getWordCount(t){if(!S.a.isString(t)||S.a.isEmpty(t))return 0;return t=t.replace(/( | )/," ").replace(/[\n\r]/g," ").replace(/&nbsp;/g," ").replace(/<\/p>/g," ").replace(/<\/blockquote>/g," ").replace(/<\/li>/g," ").replace(/<\/div>/g," ").replace(/<br>/g," ").replace(/<br \/>/g," ").replace(/<.*?>/g,""),S.a.reduce(t.split(/\s+/),(function(t,r){return r.length>0&&Ve.test(r)?t+1:t}),0)}(r.value);return{footer:S.a.extend({},a,{wordCount:l})}})),reducer_defineProperty(je,Ue.LONGTEXTV2_UPDATE_WORD_COUNT_EXCEEDED,(function(t,r){return{wordCountExceeded:r.value}})),reducer_defineProperty(je,Ue.LONGTEXTV2_UPDATE_WORD_LIMIT_VISIBILITY,(function(t,r){var a=t.footer,l=r.value;return{footer:S.a.extend({},a,{wordStaticVisible:l.wordStatic,wordLimitVisible:l.wordLimit})}})),reducer_defineProperty(je,Ue.LONGTEXTV2_DISABLE_EDITOR,(function(t,r){return{disabled:r.value}})),je);var qe=Object(Ne.a)(We,{imageUrl:null,error:null});r.a=O.a.extend({maskable:!1,ViewComponent:Me,DataService:De,getReducers:function getReducers(){var t=O.a.prototype.getReducers.apply(this,arguments);return S.a.extend(t,{longTextV2:qe})}})},282:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(14),E=a.n(O),L=a(158);r.a={getShuffleOption:function getShuffleOption(){return this.shuffleOption||(this.shuffleOption=new L.a(this)),this.shuffleOption},usingPossibleGroupingResponses:function usingPossibleGroupingResponses(){return!!this.get("question").group_possible_responses},getPossibleResponseGroups:function getPossibleResponseGroups(){var t=this.getShuffleOption(),r=S.a.map(this.get("question").possible_response_groups,(function(r){return{title:r.title,responses:t.getOrderedData(r.responses)}}));return S.a.each(r,(function(t){S.a.isString(t.title)?t.title=E.a.stripHTML(E.a.createImageDescriptions(t.title),!0):t.title=""})),r},getPossibleResponseGroupResponses:function getPossibleResponseGroupResponses(){var t,r;return t=this.getPossibleResponseGroups(),S.a.isArray(t)&&t.length&&(r=[],S.a.each(t,(function(t,a){S.a.each(t.responses,(function(t){r.push({value:t,groupIndex:a})}))}))),r},getPossibleResponses:function getPossibleResponses(){var t=this.getShuffleOption().getOrderedData(this.get("question").possible_responses);return S.a.map(t,(function(t){return{value:t}}))}}},305:function(t,r,a){var l,S;l=[a(1)],void 0===(S=function(t){"use strict";var r={};return{publish:function(a,l){r[a]&&t.each(r[a],(function(){this&&this.apply(t,l||[])}))},subscribe:function(t,a){return r[t]||(r[t]=[]),r[t].push(a),[t,a]},unsubscribe:function(a){var l=a[0];r[l]&&t.each(r[l],(function(t){this==a[1]&&r[l].splice(t,1)}))},reset:function(){r={}}}}.apply(r,l))||(t.exports=S)},308:function(t,r,a){"use strict";var l=a(0),S=a.n(l),O=a(275),E=a(276),L=a.n(E),j=a(208);function FormulaScorer(t,r){S.a.isObject(r)&&S.a.isNumber(r.mathcoreTimeoutDuration)?L.a.setTimeoutDuration(r.mathcoreTimeoutDuration):L.a.setTimeoutDuration(5e3),this._initialize(t,(function(t,r){return j.a.useMathCore(t)?L.a.evaluateVerbose(j.a.processSpec(t),r):j.a.validate(t,r)}))}FormulaScorer.prototype=new O.a,r.a=FormulaScorer},309:function(t,r,a){"use strict";var l,S=a(5),O=a.n(S),E=a(0),L=a.n(E),j=a(1),D=a.n(j),q=a(210),B=a(7),G=a.n(B),X=a(263),Z=a.n(X),$=a(14),Q=a.n($),ee=["bold","italic","underline","unorderedList"],te=Z.a,ne=/<!--([\s\S]*?)-->/g,re=/<p>/gi,oe=/<\/p>/gi,ie=/<\/?(em|strong|u|sup|sub)[^>]*>/gi,ae=/<\/?(br|li|ol|ul|span)[^>]*>/gi,se=/<\/?(div)[^>]*>/gi,le=/<(div)><\/(div)>/gi,ce=/<(div|p)><br><\/(div|p)>/gi,ue=/<br>(^<\/br>)/gi,pe=/&nbsp;/g,de=/src=\"data:image\/([a-zA-Z]*);base64,([^\"]*)\"/,fe=/<img .*?>/g,he=Object(q.a)("[\\p{L}\\p{N}]"),me=D()(document);r.a=function editor(t){L.a.extend(this,O.a.Events);var r,a,S,E,j,q,B,X,Z,$,ge,ye,_e=!1,be=!1,ve=[],we=[];function getContent(){return"ie"!==G.a.browser||9!==G.a.version&&10!==G.a.version?cleanHTML(j.html()):j.html().replace(/<p>/g,"").replace(/<\/p>/g,"<br>")}function cleanHTML(t){return t=function cleanTagsThatCauseIssuesWhenPasting(t){return t=(t=(t=t.replace(ce,"<br></br>")).replace(le,"<br></br>")).replace(ue,"<br></br>"),de.test(t)&&(t=t.replace(fe,"")),t}(t),t=(t=Q.a.sanitizeHTML(t)).replace(ne,""),"ie"===G.a.browser&&9===G.a.version||(t=t.replace(oe,"<br></br>")),t=t.replace(re,"")}function getWordCount(t){return t=function cleanHTMLForWordCount(t){return t=(t=(t=(t=t.replace(ie,"")).replace(ae," ")).replace(se," ")).replace(pe," ")}(t),L.a.reduce(t.split(/\s+/),(function(t,r){return r.length>0&&he.test(r)?t+1:t}),0)}function updateToolbar(){L.a.each(ve,(function(t){t.updateUI()}))}this.getTbContainer=function(){return ye};var Ce=function Command(t){this.execute=function(){"subscript"!==t&&"superscript"!==t||this.queryState()||L.a.each(["subscript","superscript"],(function(t){Oe[t]&&Oe[t].command.queryState()&&document.execCommand(t,!1,null)})),document.execCommand(t,!1,null),_e=!0},this.queryState=function(){return document.queryCommandState(t)},this.setButton=function(t){this.button=t}};function InsertListCommand(t){var r=t?"insertOrderedList":"insertUnorderedList",a="ie"===G.a.browser||"edge"===G.a.browser;this.execute=function(){!function handleInsertListDependingOnBrowser(t,r){var a;j.focus(),t&&(a=D()(document.createElement("p")),j.append(a));document.execCommand(r,!1,null),t&&a.remove()}(a,r),_e=!0},this.queryState=function(){return document.queryCommandState(r)},this.setButton=function(t){this.button=t}}function CharacterMapCommand(r){L.a.isArray(r)||(r=t.labels.characterMapCharacters),this.execute=function(){var a=this;if(be)removeCharMap();else{var l=D()(te({characters:r,labels:t.labels})).hide().appendTo(this.button),S=this.button.position().left,O=ye.width()-(S+this.button.outerWidth()),E=Math.abs(-l.width()/2+this.button.outerWidth()),L=function destroyCharacterMap(){a.button.removeClass("lrn_active"),removeCharMap()};E>S&&(E=S),l.width()/2>O&&(E+=l.width()/2-O),l.css("left",-E+"px").fadeIn("fast",(function(){me.off("click.charactermap").on("click.charactermap",L)})),l.find(".lrn_characterbutton").first().focus(),be=!0,D()(".lrn_toolbar .lrn_charactermap .lrn_characterbutton",j.parents(".lrn_texteditor")).on("mousedown",(function(t){t.preventDefault()}))}},this.queryState=function(){return be},this.setButton=function(t){this.button=t}}var Se=function ToggleCommandButtonController(r,S,O,E){var L,q=D()("<li></li>").addClass("lrn_btn");q.html(r.content),q.attr({unselectable:"on",title:r.title,"aria-label":r.title,tabindex:0,role:"button","data-button-index":O}),D()(q).children().attr("unselectable","on"),q.on("mousedown",(function(t){t.preventDefault&&t.preventDefault()})),a||(q.on("click",(function(t){j.is(":focus")||j.focus(),r.command.execute(),updateToolbar()})),q.on("keydown",(function(a){13!==a.which&&32!==a.which||(a.preventDefault(),j.is(":focus")||j.focus(),r.title===t.labels.characterMapTitle&&(l=!0),r.command.execute(),updateToolbar()),37===a.which&&(a.preventDefault(),L=(O+E-1)%E,S.find('li[data-button-index="'+L+'"]').first().focus()),39===a.which&&(a.preventDefault(),L=(O+1)%E,S.find('li[data-button-index="'+L+'"]').first().focus())})),q.on("keyup",(function(t){32===t.which&&t.preventDefault()}))),q.appendTo(S),r.command.setButton(q),this.getQueryState=function(){return r.command.queryState()},this.updateUI=function(){r.command.queryState()?(q.addClass("lrn_active"),q.attr({"aria-pressed":"true"})):(q.removeClass("lrn_active"),q.attr({"aria-pressed":"false"}))}};function removeCharMap(){if(be&&!l){var t=D()(".lrn_toolbar .lrn_charactermap",j.parents(".lrn_texteditor"));t.finish().fadeOut((function(){t.remove()})),be=!1,me.off("click.charactermap")}l=!1}function updateContentAndWordCount(){_e&&(_e=!1,S=getContent(),E=getWordCount(S),function checkWordCount(){Z.html(E),E>r?("on-limit"===q&&$.addClass("lrn_hide"),"off"!==q&&X.removeClass("lrn_hide"),B.addClass("lrn_wordcount_warning_label"),j.addClass("lrn_wordcount_warning")):("on-limit"===q&&($.removeClass("lrn_hide"),X.addClass("lrn_hide")),B.removeClass("lrn_wordcount_warning_label"),j.removeClass("lrn_wordcount_warning"))}())}function charLimitExceeded(){return E>1e4}function insertTextAtCursor(t){charLimitExceeded()||(document.getSelection?document.getSelection().getRangeAt(0).insertNode(document.createTextNode(t)):document.selection?document.selection.createRange().pasteHTML(t):document.execCommand("InsertHTML",!1,t))}var Oe={bold:{command:new Ce("bold"),content:"<strong>"+t.labels.editorBoldIcon+'</strong> <span class="sr-only">'+t.labels.editorBoldTitle+"</span>",title:t.labels.editorBoldTitle,block:!1},italic:{command:new Ce("italic"),content:"<em>"+t.labels.editorItalicsIcon+'</em> <span class="sr-only">'+t.labels.editorItalicsTitle+"</span>",title:t.labels.editorItalicsTitle,block:!1},underline:{command:new Ce("underline"),content:"<u>"+t.labels.editorUnderlineIcon+'</u> <span class="sr-only">'+t.labels.editorUnderlineTitle+"</span>",title:t.labels.editorUnderlineTitle,block:!1},removeFormat:{command:new Ce("removeFormat"),content:'<i class="lrn_icon lrn-icon-remove-format"></i> <span class="sr-only">'+t.labels.editorRemoveFormatTitle+"</span>",title:t.labels.editorRemoveFormatTitle,block:!1},unorderedList:{command:new InsertListCommand,content:'<i class="lrn_icon lrn-icon-list-bulleted"></i> <span class="sr-only">'+t.labels.editorBulletdListTitle+"</span>",title:t.labels.editorBulletdListTitle,block:!0},orderedList:{command:new InsertListCommand(!0),content:'<i class="lrn_icon lrn-icon-list-numbered"></i> <span class="sr-only">'+t.labels.editorNumberedListTitle+"</span>",title:t.labels.editorNumberedListTitle,block:!0},superscript:{command:new Ce("superscript"),content:'<i class="lrn_icon lrn-icon-superscript"></i> <span class="sr-only">'+t.labels.editorSuperscriptTitle+"</span>",title:t.labels.editorSuperscriptTitle,block:!1},subscript:{command:new Ce("subscript"),content:'<i class="lrn_icon lrn-icon-subscript"></i> <span class="sr-only"> <span class="sr-only">'+t.labels.editorSubscriptTitle+"</span>",title:t.labels.editorSubscriptTitle,block:!1}};this.makeEditor=function(l){var O,E,Q,te,ne,re,oe,ie,ae,se=this,le=l.el,ce=l.showCharacterMap,ue=l.spellCheck,pe=l.characterMapIcon,de=l.placeholder,fe=l.wordsLimit,he=l.shouldInsertToolbar,me=this.normalizeFormattingOptions(l.formattingOptions);switch(a=l.readOnly,r=l.maxWordLength,this.commandDefinitions=Oe,L.a.isUndefined(he)&&(he=!0),L.a.isArray(me)||(me=ee),O=L.a.map(me,(function(t){return Oe[t]})),ce&&(Oe.characterMap={command:new CharacterMapCommand(ce),content:pe+'<span class="sr-only">'+t.labels.characterMapTitle+"</span>",title:t.labels.characterMapTitle},O.push(Oe.characterMap)),(j=D()(le)).addClass("lrn_editor_area"),j.wrap('<div class="lrn_response_input_wrapper" />'),a?j.wrap('<div class="lrn_texteditor lrn_editor_disabled" />'):(j.wrap('<div class="lrn_texteditor" />'),j.attr("contentEditable","true"),L.a.isBoolean(ue)&&j.attr("spellcheck",ue.toString()),"ie"===G.a.browser&&9===G.a.version&&0!==j.html().indexOf("<p>")&&j.html("<p>"+j.html().replace(/<br>/g,"</p><p>")+"</p>")),B=D()('<span class="lrn_length_indicator" />'),ge=D()('<span class="lrn_toolbar_right" />').append(B),E=D()('<ul class="lrn_toolbar_left lrn_clearfix"></ul>'),ye=D()('<div class="lrn-toolbar-wrapper" />').append(D()('<div class="lrn_toolbar" />').append(E).append(ge)),he&&j.parent().prepend(ye),L.a.each(O,(function(t,r){!0===t.block&&we.push(t),Q=new Se(t,E,r,O.length),ve.push(Q)})),q=fe,te=!1,fe){case"always":te=!1;break;case"on-limit":case"off":te=!0}if(Z=D()('<span class="lrn_word_count" />').html("0"),$=D()('<span class="lrn_static_words'+(!0===te?"":" lrn_hide")+'"> '+t.labels.word+"</span>"),X=D()('<span class="lrn_word_limit'+(!0===te?" lrn_hide":"")+'"> / '+r+" "+t.labels.wordLength+"</span>"),B.append(Z,$,X),a||L.a.isEmpty(de)||(ne=D()('<span class="lrn_placeholder" />').text(de),re=D()('<div class="lrn_input_with_placeholder" />'),oe=function togglePlaceholder(){var t=j.text();t&&t.length>0?ne.hide():ne.show()},j.wrap(re).before(ne),j.on("focus blur keydown keyup",oe),ne.on("click",(function(t){j.focus()})),oe()),!a){j.on("blur",(function(){triggerChange(),se.trigger("blur")})),j.on("focus",(function(){se.trigger("focus")})),j.on("touchend",(function(){window.focus()})),j.on("keyup mouseup",(function(){removeCharMap(),updateToolbar(),triggerChange()})),"ie"!==G.a.browser?j.on("keyup mouseup",(function(){this.lastChild&&"br"===this.lastChild.nodeName.toLowerCase()||this.appendChild(document.createElement("br"))})):G.a.browser<9&&j.on("keyup mouseup",(function(){var t,r;j.is(":empty")&&(t=document.createElement("p"),j.append(t),(r=document.body.createTextRange()).moveToElementText(t),r.select())})),ie=L.a.throttle((function(){updateContentAndWordCount(),triggerChange()}),300),_e=!0,updateContentAndWordCount(),j.on("keyup",ie),j.on("keyup",(function(t){_e=!0,se.trigger("keyup"),triggerChange()})),j.on("paste",(function(t){charLimitExceeded()&&t.preventDefault(),L.a.defer((function(){var t,r,a,l;window.getSelection?(t=window.getSelection().getRangeAt(0),(r=document.createElement("caret")).innerHTML="-",t.insertNode(r),j.html(getContent()),r=document.getElementsByTagName("caret")[0],(t=window.getSelection().rangeCount>0?window.getSelection().getRangeAt(0):document.createRange()).setStartBefore(r),t.setEndBefore(r),(a=window.getSelection()).rangeCount>0&&a.removeAllRanges(),a.addRange(t),r.parentNode.removeChild(r)):document.selection?((t=document.selection.createRange()).pasteHTML("<span id=lrneditorcaret>-</span>"),l=(l=cleanHTML(l=(l=j.html()).replace(/<span id=lrneditorcaret>-<\/span>/i,"<caret>-</caret>"))).replace(/<caret>-<\/caret>/i,"<span id=lrneditorcaret>-</span>"),j.html(l),r=document.getElementById("lrneditorcaret"),(t=document.selection.createRange()).moveToElementText(r),t.select(),r.parentNode.removeChild(r)):j.html(cleanHTML(j.html())),_e=!0,ie()}))})),j.on("keydown",(function(t){if(t.ctrlKey||t.metaKey){var r;switch(t.which){case 66:r=Oe.bold;break;case 73:r=Oe.italic;break;case 85:r=Oe.underline;break;default:return}r.command.execute(),t.preventDefault(),updateToolbar(),triggerChange()}})),j.on("keypress",(function(t){t.which>31&&t.which<127&&charLimitExceeded()&&t.preventDefault(),triggerChange()}));j.parents(".lrn_texteditor").on("click",".lrn_charactermap .lrn_characterbutton",(function clickListener(t){insertTextAtCursor(D()(t.target).text()),j.trigger("keyup"),triggerChange()})),j.parents(".lrn_texteditor").on("keydown",".lrn_charactermap .lrn_characterbutton",(function keyListener(t){var r=D()(t.target).data("character-btn-index");13!==t.which&&32!==t.which||insertTextAtCursor(D()(t.target).text()),37===t.which&&(r=(r+ce.length-1)%ce.length,t.preventDefault(),j.parents(".lrn_texteditor").find('.lrn_charactermap .lrn_characterbutton[data-character-btn-index="'+r+'"]').first().focus()),39===t.which&&(r=(r+1)%ce.length,t.preventDefault(),j.parents(".lrn_texteditor").find('.lrn_charactermap .lrn_characterbutton[data-character-btn-index="'+r+'"]').first().focus())})),j.parents(".lrn_texteditor").on("mousedown",".lrn_charactermap",(function mousedownListener(t){t.preventDefault(),triggerChange()}))}function triggerChange(){S!==ae&&(se.trigger("change"),ae=S)}ae=S},this.getContentAndWordCount=function(){return updateContentAndWordCount(),{content:S,wordCount:E}},this.focus=function(){j.focus()},this.isEmpty=function(){return!this.getContentAndWordCount().wordCount},this.normalizeFormattingOptions=function(t){if(L.a.isArray(t))return L.a.filter(L.a.uniq(t),(function(t){return!!t}))}}},310:function(t,r,a){"use strict";a.d(r,"a",(function(){return l}));var l={recursionDepthHigh:13,recursionDepthLow:8};r.b={keepMouseEventHandlers:function keepMouseEventHandlers(t){t.hasMouseHandlers||t.addMouseEventHandlers()}}},312:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn_cloze_response_container">'+(null==(__t="clozeassociation"==displayLogic.questiontype?'<div class="lrn_response_input_wrapper lrn-response-validate-wrapper">':"")?"":__t)+(null==(__t="imageclozeassociation"==displayLogic.questiontype?'<div class="lrn_response_input_wrapper lrn_response_input_wrapper_left lrn-response-validate-wrapper">':"")?"":__t)+'<div class="lrn_response_innerbody '+(null==(__t="imageclozeassociation"!=displayLogic.questiontype&&"clozeassociation"!=displayLogic.questiontype?"lrn-response-validate-wrapper":"")?"":__t)+'">',_.isUndefined(displayLogic.possibilityListPosition)||"top"!==displayLogic.possibilityListPosition&&"left"!==displayLogic.possibilityListPosition||(__p+="",displayLogic.extraContentHTML&&(__p+=""+(null==(__t=displayLogic.extraContentHTML)?"":__t)),__p+=""),__p+="",_.isUndefined(displayLogic.possibilityListPosition)||"left"!==displayLogic.possibilityListPosition&&"right"!==displayLogic.possibilityListPosition||(__p+='<div class="lrn_response_input_position">'),__p+='<div class="lrn_response_input lrn_response_math'+(null==(__t=displayLogic.hasBoostedFont?" lrn_response_font_boost":"")?"":__t)+'" aria-label="'+(null==(__t=displayLogic.questionText)?"":_.escape(__t))+'">'+(null==(__t=displayLogic.processedTemplate)?"":__t)+"</div>",_.isUndefined(displayLogic.possibilityListPosition)||"left"!==displayLogic.possibilityListPosition&&"right"!==displayLogic.possibilityListPosition||(__p+="</div>"),__p+="",(_.isUndefined(displayLogic.possibilityListPosition)||_.isNull(displayLogic.possibilityListPosition)||"bottom"===displayLogic.possibilityListPosition||"right"===displayLogic.possibilityListPosition)&&(__p+="",displayLogic.extraContentHTML&&(__p+=""+(null==(__t=displayLogic.extraContentHTML)?"":__t)),__p+=""),__p+="</div>"+(null==(__t="imageclozeassociation"==displayLogic.questiontype||"clozeassociation"==displayLogic.questiontype?"</div>":"")?"":__t)+'</div><div class="lrn_correctAnswers lrn_hide"><span>'+(null==(__t=labels.correctAnswers)?"":__t)+':</span><ul class="lrn_correctAnswerList"></ul></div>',displayLogic.showValidationButton&&(__p+='<button type="button" '+(null==(__t=displayLogic.readOnly?'disabled="disabled"':"")?"":__t)+' class="lrn_btn lrn_validate"><span>'+(null==(__t=displayLogic.multipleResponses?labels.checkAnswers:labels.checkAnswer)?"":__t)+"</span></button>"),__p+="";return __p}},316:function(t,r,a){"use strict";t.exports=a(245)},317:function(t,r,a){"use strict";var l,S,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};S=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];var l=document.createElement("input");return"object"===O(r[0])&&(!0===r[0].multiple&&l.setAttribute("multiple",""),void 0!==r[0].accept&&l.setAttribute("accept",r[0].accept)),l.setAttribute("type","file"),l.style.display="none",l.setAttribute("id","hidden-file"),document.body.appendChild(l),new Promise((function(t){l.addEventListener("change",(function(){t(l.files);var a=r[r.length-1];"function"==typeof a&&a(l.files),document.body.removeChild(l)}));var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),l.dispatchEvent(a)}))},void 0===(l=function(){return S}.call(r,a,r,t))||(t.exports=l)},330:function(t,r,a){"use strict";a.d(r,"d",(function(){return define})),a.d(r,"b",(function(){return addLocalDependency})),a.d(r,"a",(function(){return addAsyncDependency}));var l=a(3);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function safeGet(t,r){return r.split(".").reduce((function(t,r){return t&&t[r]}),t)}function isFunction(t){return"function"==typeof t}function loadDep(t,r){if(j.shim[t])return function loadByShim(t,r){var a=j.shim[t];return _require(a.deps||[],(function(){return loadScript(t).then(a.exportsFn||function(){return a.init&&a.init()||safeGet(window,a.exports)})}),null,r)}(t,r);var a=function defer(){var t={};return t.promise=new l.default((function(r,a){t.resolve=r,t.reject=a})),t}();return a.name=t,a.path=r,function invokeLater(t,r){function cleanup(){q=null}D=D.then((function(){return q=t,r()})).then(cleanup,cleanup)}(a,(function(){return loadScript(t).then((function(){setTimeout(a.resolve,100)})).catch((function(){a.reject(new Error('Error while loading module "'+t+'"'))}))})),a.promise}function loadScript(t){return new l.default((function(r,a){var l=_require2.load(null,t,toUrl(t,!0));l.onerror=a,l.onload=r}))}var S=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,O=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g;function _require(t,r,a,S){var O=S.slice(-1)[0];return new l.default((function(r,a){l.default.all(t.map((function(t){if(S.indexOf(t)>-1)return l.default.reject(new Error("Circular dependency: "+S.concat(t).join(" -> ")));var r=S.concat(t);return B[t]?B[t](O):(t.indexOf("!")>-1&&(E[t]=function loadWithPlugin(t,r){var a=t.indexOf("!"),S=t.substr(0,a);return t=t.substr(a+1),_require([S],(function(a){return new l.default((function(l,S){function localRequire(){if(!O)return _require2.apply(null,arguments)}Object.keys(_require2).forEach((function(t){localRequire[t]=_require2[t]}));var O=!1;l.error=S,l.fromText=function(t,a){a||(a=t);var E=q;q={name:t,resolve:l,reject:S,path:r},new Function(a)(),q=E,O=!0},a.load(t,localRequire,l,j)}))}),null,r)}(t,r)),L[t]?E[t]=l.default.resolve().then((function(){return _require.apply(null,L[t].concat([r]))})):E[t]||(G[t]?E[t]=G[t]():E[t]=loadDep(t,r)),E[t])}))).then(r,a)})).then((function(t){if(isFunction(r)){var a=r.apply(null,t);return O&&safeGet(E[O],"module.exports")||a}return r}),(function(t){return isFunction(a)&&a(t),_require2.onError(t),l.default.reject(t)}))}function _require2(t,r,a){return _require(t,r,a,[])}var E,L,j,D,q,B={require:function require(t){return _require2},module:function module(t){var module=E[t];if(!module)throw new Error('Module "module" should be required only by modules');return module.module=module.module||{id:t,config:function config(){return j.config[t]||{}}}},exports:function exports(t){return B.module(t).exports={}}};function toUrl(t,r){var a=Object.keys(j.bundles).filter((function(r){return j.bundles[r].indexOf(t)>-1}))[0];return a?_require2.toUrl(a):(j.paths[t]&&(t=j.paths[t]),/^([\w\+\.\-]+:)?\//.test(t)||(t=j.baseUrl+t),r&&t.indexOf(".js")<0&&(t+=".js"),j.urlArgs&&(t+="?"+j.urlArgs),t)}function define(t,r,a){"string"!=typeof t&&(a=r,r=t,t=null),Array.isArray(r)||(a=r,r=[]);var l=q;if(null===t&&!l)throw new Error("Unexpected define!");if(0===r.length&&a.length>0){var E=function wrapCommonJS(t,r){var a=[];return r.toString().replace(S,"").replace(O,(function(t,r){a.push(r)})),{deps:a,factory:function factory(){var l=arguments,S=a.reduce((function(t,r,a){return t[r]=l[a],t}),{});return r((function localRequire(t){if(!S[t])throw new Error('Module "'+a+'" has not been loaded yet');return S[t]}),B.module(t),B.exports(t))}}}(t||l.name,a);r=E.deps,a=E.factory}if(null===t||l&&l.name===t){var j=_require(r,a,l.reject,l.path);l.resolve(j)}else L[t]=[r,a,null]}function addLocalDependency(t,r){E[t]||(E[t]=r)}_require2.resetContext=function(){j={urlArgs:"",baseUrl:"./",paths:{},shim:{},bundles:{},config:{}},E={},L={},D=l.default.resolve(),q=null},_require2.config=function(t){j=function deepmerge(t,r){var a=Array.isArray(r),l=a&&[]||{};return a?(t=t||[],l=l.concat(t),r.forEach((function(r,a){void 0===l[a]?l[a]=r:"object"===_typeof(r)?l[a]=deepmerge(t[a],r):-1===t.indexOf(r)&&l.push(r)}))):(t&&"object"===_typeof(t)&&Object.keys(t).forEach((function(r){l[r]=t[r]})),Object.keys(r).forEach((function(a){"object"===_typeof(r[a])&&r[a]&&t[a]?l[a]=deepmerge(t[a],r[a]):l[a]=r[a]}))),l}(j,t)},_require2.load=function(t,r,a){var l=document.createElement("script");return l.src=a,l.async=!0,document.getElementsByTagName("body")[0].appendChild(l),l},_require2.toUrl=function(t){return toUrl(t,!1)},_require2.specified=function(t){return E.hasOwnProperty(t)},_require2.onError=function(t){console.error(t)},_require2.resetContext();var G={};function addAsyncDependency(t,r){G[t]||(G[t]=r)}r.c=_require2},334:function(t,r,a){"use strict";a.d(r,"a",(function(){return j}));var l=a(131);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}var S=[],O=new MutationObserver((function onMutation(){L||(L=!0,requestAnimationFrame((function(){L=!1,S.forEach((function(t){return t.checkVisibility()}))})))})),E=new Set,L=!1,j=function(){function VisibilityChangeObserver(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,VisibilityChangeObserver),this.isActive=!1,this.isVisible=!1,this.element=t,this.onVisibilityChange=r}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(VisibilityChangeObserver,[{key:"start",value:function start(){this.isActive||(this.isActive=!0,this.isVisible=l.b.isElementVisible(this.element),S.push(this),observeElementAndAncestors(this.element))}},{key:"stop",value:function stop(){this.isActive&&(this.isActive=!1,S.splice(S.indexOf(this),1),function resetMutationObserver(){O.disconnect(),E.clear(),S.forEach((function(t){return observeElementAndAncestors(t.element)})),E.forEach((function(t){return observeElement(t)}))}())}},{key:"checkVisibility",value:function checkVisibility(){if(this.isActive){var t=l.b.isElementVisible(this.element);this.isVisible!==t&&(this.isVisible=t,this.onVisibilityChange(t))}}}]),VisibilityChangeObserver}();function observeElementAndAncestors(t){for(;t&&!E.has(t);)observeElement(t),E.add(t),t=t.parentElement}function observeElement(t){O.observe(t,{attributes:!0,attributeFilter:["id","style","class"]})}},397:function(t,r,a){"use strict";a.d(r,"a",(function(){return getFullScreenElement}));a(1),a(7);function getFullScreenElement(){for(var t=["fullscreenElement","webkitFullscreenElement","msFullscreenElement","mozFullScreenElement"],r=0;r<t.length;r++){var a=document[t[r]];if(a)return a}return null}},404:function(t,r,a){"use strict";var l=a(5),S=a.n(l),O=a(0),E=a.n(O),L=(a(1),"stopped"),j="running",D="paused";r.a=S.a.View.extend({state:L,currentLength:void 0,length:5,direction:"down",template:null,showMinutes:!1,initialize:function initialize(){this.template=this.options.labels.counterTemplate,this.options.hasOwnProperty("length")&&(this.length=this.options.length),this.options.hasOwnProperty("direction")&&(this.direction=this.options.direction),this.options.hasOwnProperty("template")&&(this.template=this.options.template),this.options.hasOwnProperty("show_minutes")&&(this.showMinutes=this.options.show_minutes),this.resetCurrentLength(),this.render()},render:function render(){return this.$el.html(this.template.replace("{num}",'<span class="lrn_counterNumber"></span>')),this.counterNumber=this.$(".lrn_counterNumber"),this.setCounterDisplay(this.currentLength),this},counter:function counter(t){this.currentLength=t,this.setCounterDisplay(this.currentLength),"up"===this.direction&&t<this.length||"down"===this.direction&&t>0?this.timerId=E.a.delay(E.a.bind(this.counter,this),1e3,"up"===this.direction?t+1:t-1):(this.timerId=null,this.resetCurrentLength(),this.trigger("complete"))},setCounterDisplay:function setCounterDisplay(t){var r,a,l;this.showMinutes?(a=String(Math.floor(this.currentLength/60)),l=String(this.currentLength%60),r=(a=a.length>1?a:"0"+a)+":"+(l=l.length>1?l:"0"+l)):r=this.currentLength,this.counterNumber.html(r)},begin:function begin(){this.trigger("begin"),this.counter(this.currentLength),this.state=j},pause:function pause(){clearTimeout(this.timerId),this.timerId=null,this.state=D},stop:function stop(){clearTimeout(this.timerId),this.timerId=null,this.resetCurrentLength(),this.state=L},resetCurrentLength:function resetCurrentLength(){this.currentLength="up"===this.direction?0:this.length},isRunning:function isRunning(){return this.state===j},isStopped:function isStopped(){return this.state===L},isPaused:function isPaused(){return this.state===D}})},502:function(t,r,a){var l;void 0===(l=function(){var t=function(){var r,a,l,S,O,E,L="undefined",j="object",D="Shockwave Flash",q="application/x-shockwave-flash",B="SWFObjectExprInst",G="onreadystatechange",X=window,Z=document,$=navigator,Q=!1,ee=[],te=[],ne=[],re=[],oe=!1,ie=!1,ae=!0,se=!1,le=function(){var t=typeof Z.getElementById!=L&&typeof Z.getElementsByTagName!=L&&typeof Z.createElement!=L,r=$.userAgent.toLowerCase(),a=$.platform.toLowerCase(),l=/win/.test(a||r),S=/mac/.test(a||r),O=!!/webkit/.test(r)&&parseFloat(r.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),E="Microsoft Internet Explorer"===$.appName,B=[0,0,0],G=null;if(typeof $.plugins!=L&&typeof $.plugins[D]==j)(G=$.plugins[D].description)&&typeof $.mimeTypes!=L&&$.mimeTypes[q]&&$.mimeTypes[q].enabledPlugin&&(Q=!0,E=!1,G=G.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),B[0]=n(G.replace(/^(.*)\..*$/,"$1")),B[1]=n(G.replace(/^.*\.(.*)\s.*$/,"$1")),B[2]=/[a-zA-Z]/.test(G)?n(G.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof X.ActiveXObject!=L)try{var ee=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");ee&&(G=ee.GetVariable("$version"))&&(E=!0,B=[n((G=G.split(" ")[1].split(","))[0]),n(G[1]),n(G[2])])}catch(t){}return{w3:t,pv:B,wk:O,ie:E,win:l,mac:S}}();le.w3&&((typeof Z.readyState!=L&&("complete"===Z.readyState||"interactive"===Z.readyState)||typeof Z.readyState==L&&(Z.getElementsByTagName("body")[0]||Z.body))&&f(),oe||(typeof Z.addEventListener!=L&&Z.addEventListener("DOMContentLoaded",f,!1),le.ie&&(Z.attachEvent(G,(function aa(){"complete"==Z.readyState&&(Z.detachEvent(G,aa),f())})),X==top&&function ac(){if(!oe){try{Z.documentElement.doScroll("left")}catch(t){return void setTimeout(ac,0)}f()}}()),le.wk&&function ab(){oe||(/loaded|complete/.test(Z.readyState)?f():setTimeout(ab,0))}()));function f(){if(!oe&&document.getElementsByTagName("body")[0]){try{var t,r=C("span");r.style.display="none",(t=Z.getElementsByTagName("body")[0].appendChild(r)).parentNode.removeChild(t),t=null,r=null}catch(t){return}oe=!0;for(var a=ee.length,l=0;l<a;l++)ee[l]()}}function M(t){oe?t():ee[ee.length]=t}function H(){var t=te.length;if(t>0)for(var r=0;r<t;r++){var a=te[r].id,l=te[r].callbackFn,S={success:!1,id:a};if(le.pv[0]>0){var O=c(a);if(O)if(!F(te[r].swfVersion)||le.wk&&le.wk<312)if(te[r].expressInstall&&A()){var E={};E.data=te[r].expressInstall,E.width=O.getAttribute("width")||"0",E.height=O.getAttribute("height")||"0",O.getAttribute("class")&&(E.styleclass=O.getAttribute("class")),O.getAttribute("align")&&(E.align=O.getAttribute("align"));for(var j={},D=O.getElementsByTagName("param"),q=D.length,B=0;B<q;B++)"movie"!=D[B].getAttribute("name").toLowerCase()&&(j[D[B].getAttribute("name")]=D[B].getAttribute("value"));R(E,j,a,l)}else b(O),l&&l(S);else w(a,!0),l&&(S.success=!0,S.ref=z(a),S.id=a,l(S))}else if(w(a,!0),l){var G=z(a);G&&typeof G.SetVariable!=L&&(S.success=!0,S.ref=G,S.id=G.id),l(S)}}}function z(t){var r=null,a=c(t);return a&&"OBJECT"===a.nodeName.toUpperCase()&&(r=typeof a.SetVariable!==L?a:a.getElementsByTagName(j)[0]||a),r}function A(){return!ie&&F("6.0.65")&&(le.win||le.mac)&&!(le.wk&&le.wk<312)}function R(t,O,E,j){var D=c(E);if(E=W(E),ie=!0,l=j||null,S={success:!1,id:E},D){"OBJECT"==D.nodeName.toUpperCase()?(r=J(D),a=null):(r=D,a=E),t.id=B,(typeof t.width==L||!/%$/.test(t.width)&&n(t.width)<310)&&(t.width="310"),(typeof t.height==L||!/%$/.test(t.height)&&n(t.height)<137)&&(t.height="137");var q=le.ie?"ActiveX":"PlugIn",G="MMredirectURL="+encodeURIComponent(X.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+q+"&MMdoctitle="+encodeURIComponent(Z.title.slice(0,47)+" - Flash Player Installation");if(typeof O.flashvars!=L?O.flashvars+="&"+G:O.flashvars=G,le.ie&&4!=D.readyState){var $=C("div");E+="SWFObjectNew",$.setAttribute("id",E),D.parentNode.insertBefore($,D),D.style.display="none",y(D)}u(t,O,E)}}function b(t){if(le.ie&&4!=t.readyState){t.style.display="none";var r=C("div");t.parentNode.insertBefore(r,t),r.parentNode.replaceChild(J(t),r),y(t)}else t.parentNode.replaceChild(J(t),t)}function J(t){var r=C("div");if(le.win&&le.ie)r.innerHTML=t.innerHTML;else{var a=t.getElementsByTagName(j)[0];if(a){var l=a.childNodes;if(l)for(var S=l.length,O=0;O<S;O++)1==l[O].nodeType&&"PARAM"==l[O].nodeName||8==l[O].nodeType||r.appendChild(l[O].cloneNode(!0))}}return r}function u(t,r,a){var l,S=c(a);if(a=W(a),le.wk&&le.wk<312)return l;if(S){var O,E,D,B=le.ie?C("div"):C(j);for(D in typeof t.id==L&&(t.id=a),r)r.hasOwnProperty(D)&&"movie"!==D.toLowerCase()&&e(B,D,r[D]);for(O in le.ie&&(B=function k(t,r){var a=C("div");return a.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+r+"</object>",a.firstChild}(t.data,B.innerHTML)),t)t.hasOwnProperty(O)&&("styleclass"===(E=O.toLowerCase())?B.setAttribute("class",t[O]):"classid"!==E&&"data"!==E&&B.setAttribute(O,t[O]));le.ie?ne[ne.length]=t.id:(B.setAttribute("type",q),B.setAttribute("data",t.data)),S.parentNode.replaceChild(B,S),l=B}return l}function e(t,r,a){var l=C("param");l.setAttribute("name",r),l.setAttribute("value",a),t.appendChild(l)}function y(t){var r=c(t);r&&"OBJECT"==r.nodeName.toUpperCase()&&(le.ie?(r.style.display="none",function aa(){if(4==r.readyState){for(var t in r)"function"==typeof r[t]&&(r[t]=null);r.parentNode.removeChild(r)}else setTimeout(aa,10)}()):r.parentNode.removeChild(r))}function U(t){return t&&t.nodeType&&1===t.nodeType}function W(t){return U(t)?t.id:t}function c(t){if(U(t))return t;var r=null;try{r=Z.getElementById(t)}catch(t){}return r}function C(t){return Z.createElement(t)}function n(t){return parseInt(t,10)}function F(t){t+="";var r=le.pv,a=t.split(".");return a[0]=n(a[0]),a[1]=n(a[1])||0,a[2]=n(a[2])||0,r[0]>a[0]||r[0]==a[0]&&r[1]>a[1]||r[0]==a[0]&&r[1]==a[1]&&r[2]>=a[2]}function v(t,r,a,l){var S=Z.getElementsByTagName("head")[0];if(S){var j="string"==typeof a?a:"screen";if(l&&(O=null,E=null),!O||E!=j){var D=C("style");D.setAttribute("type","text/css"),D.setAttribute("media",j),O=S.appendChild(D),le.ie&&typeof Z.styleSheets!=L&&Z.styleSheets.length>0&&(O=Z.styleSheets[Z.styleSheets.length-1]),E=j}O&&(typeof O.addRule!=L?O.addRule(t,r):typeof Z.createTextNode!=L&&O.appendChild(Z.createTextNode(t+" {"+r+"}")))}}function w(t,r){if(ae){var a=r?"visible":"hidden",l=c(t);oe&&l?l.style.visibility=a:"string"==typeof t&&v("#"+t,"visibility:"+a)}}function N(t){return null!=/[\\\"<>\.;]/.exec(t)&&typeof encodeURIComponent!=L?encodeURIComponent(t):t}ee[0]=function(){Q?function Y(){var t=Z.getElementsByTagName("body")[0],r=C(j);r.setAttribute("style","visibility: hidden;"),r.setAttribute("type",q);var a=t.appendChild(r);if(a){var l=0;!function ab(){if(typeof a.GetVariable!=L)try{var S=a.GetVariable("$version");S&&(S=S.split(" ")[1].split(","),le.pv=[n(S[0]),n(S[1]),n(S[2])])}catch(t){le.pv=[8,0,0]}else if(l<10)return l++,void setTimeout(ab,10);t.removeChild(r),a=null,H()}()}else H()}():H()};le.ie&&window.attachEvent("onunload",(function(){for(var r=re.length,a=0;a<r;a++)re[a][0].detachEvent(re[a][1],re[a][2]);for(var l=ne.length,S=0;S<l;S++)y(ne[S]);for(var O in le)le[O]=null;for(var E in le=null,t)t[E]=null;t=null}));return{registerObject:function(t,r,a,l){if(le.w3&&t&&r){var S={};S.id=t,S.swfVersion=r,S.expressInstall=a,S.callbackFn=l,te[te.length]=S,w(t,!1)}else l&&l({success:!1,id:t})},getObjectById:function(t){if(le.w3)return z(t)},embedSWF:function(t,r,a,l,S,O,E,D,q,B){var G=W(r),X={success:!1,id:G};le.w3&&!(le.wk&&le.wk<312)&&t&&r&&a&&l&&S?(w(G,!1),M((function(){a+="",l+="";var Z={};if(q&&typeof q===j)for(var $ in q)Z[$]=q[$];Z.data=t,Z.width=a,Z.height=l;var Q={};if(D&&typeof D===j)for(var ee in D)Q[ee]=D[ee];if(E&&typeof E===j)for(var te in E)if(E.hasOwnProperty(te)){var ne=se?encodeURIComponent(te):te,re=se?encodeURIComponent(E[te]):E[te];typeof Q.flashvars!=L?Q.flashvars+="&"+ne+"="+re:Q.flashvars=ne+"="+re}if(F(S)){var oe=u(Z,Q,r);Z.id==G&&w(G,!0),X.success=!0,X.ref=oe,X.id=oe.id}else{if(O&&A())return Z.data=O,void R(Z,Q,r,B);w(G,!0)}B&&B(X)}))):B&&B(X)},switchOffAutoHideShow:function(){ae=!1},enableUriEncoding:function(t){se=typeof t===L||t},ua:le,getFlashPlayerVersion:function(){return{major:le.pv[0],minor:le.pv[1],release:le.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(t,r,a){return le.w3?u(t,r,a):void 0},showExpressInstall:function(t,r,a,l){le.w3&&A()&&R(t,r,a,l)},removeSWF:function(t){le.w3&&y(t)},createCSS:function(t,r,a,l){le.w3&&v(t,r,a,l)},addDomLoadEvent:M,addLoadEvent:function s(t){if(typeof X.addEventListener!=L)X.addEventListener("load",t,!1);else if(typeof Z.addEventListener!=L)Z.addEventListener("load",t,!1);else if(typeof X.attachEvent!=L)!function g(t,r,a){t.attachEvent(r,a),re[re.length]=[t,r,a]}(X,"onload",t);else if("function"==typeof X.onload){var r=X.onload;X.onload=function(){r(),t()}}else X.onload=t},getQueryParamValue:function(t){var r=Z.location.search||Z.location.hash;if(r){if(/\?/.test(r)&&(r=r.split("?")[1]),null==t)return N(r);for(var a=r.split("&"),l=0;l<a.length;l++)if(a[l].substring(0,a[l].indexOf("="))==t)return N(a[l].substring(a[l].indexOf("=")+1))}return""},expressInstallCallback:function(){if(ie){var t=c(B);t&&r&&(t.parentNode.replaceChild(r,t),a&&(w(a,!0),le.ie&&(r.style.display="block")),l&&l(S)),ie=!1}},version:"2.3"}}();return t}.call(r,a,r,t))||(t.exports=l)},533:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",proper?(__p+='<div class="'+(null==(__t=fractionClass)?"":__t)+'">',integer&&(__p+='<span class="'+(null==(__t=fractionClass)?"":__t)+'-integer">'+(null==(__t=integer)?"":__t)+"</span>"),__p+='<span class="'+(null==(__t=fractionClass)?"":__t)+'-proper-fraction">'+(null==(__t=proper)?"":__t)+"</span></div>"):__p+=""+(null==(__t=integer)?"":__t),__p+="";return __p}},570:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div ",htmlId&&(__p+='id="'+(null==(__t=htmlId)?"":__t)+'" '),__p+='class="lrn lrn_widget lrn_feature lrn_'+(null==(__t=featureType)?"":__t)+" "+(null==(__t=extraClasses)?"":__t)+'">'+(null==(__t=featureContent)?"":__t)+"</div>";return __p}}}]);
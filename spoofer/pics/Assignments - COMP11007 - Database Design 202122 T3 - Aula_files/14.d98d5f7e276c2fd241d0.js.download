(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1606:function(e,t,n){"use strict";var r=n(39),a=n(40);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=(0,r(n(41)).default)(i.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.default=o},1617:function(e,t,n){"use strict";var r=n(39),a=n(40);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=(0,r(n(41)).default)(i.createElement("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"}),"Reply");t.default=o},1801:function(e,t,n){"use strict";var r=n(39),a=n(40);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=(0,r(n(41)).default)(i.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Create");t.default=o},1958:function(e,t,n){e.exports=n.p+"6dd443ff28b2e082f707f574bada92ad.png"},1959:function(e,t,n){"use strict";var r=n(39),a=n(40);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=(0,r(n(41)).default)(i.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");t.default=o},1960:function(e,t,n){e.exports=n.p+"0f1611905133482d6034323bd8e4eb67.png"},1961:function(e,t,n){"use strict";var r=n(39),a=n(40);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=(0,r(n(41)).default)(i.createElement("path",{d:"M8 10H5V7H3v3H0v2h3v3h2v-3h3v-2zm10 1c1.66 0 2.99-1.34 2.99-3S19.66 5 18 5c-.32 0-.63.05-.91.14.57.81.9 1.79.9 2.86s-.34 2.04-.9 2.86c.28.09.59.14.91.14zm-5 0c1.66 0 2.99-1.34 2.99-3S14.66 5 13 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm6.62 2.16c.83.73 1.38 1.66 1.38 2.84v2h3v-2c0-1.54-2.37-2.49-4.38-2.84zM13 13c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z"}),"GroupAdd");t.default=o},1962:function(e,t,n){"use strict";var r=n(39),a=n(40);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=(0,r(n(41)).default)(i.createElement("path",{d:"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"ExitToApp");t.default=o},1998:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),i=n(4),o=n.n(i),s=n(5),c=n.n(s),l=n(9),u=n.n(l),d=n(8),p=n.n(d),f=n(12),g=n.n(f),h=n(2),m=n.n(h),b=n(7),v=n.n(b),y=n(6),x=n.n(y),E=n(35),k=n(164),C=n(63),R=n(126),O=n(330),j=n(249),w=n(327),M=n(26),S=n.n(M),I=n(43),P=n.n(I),T=n(53),q=n.n(T),z=n(52),A=n.n(z),N=n(51),B=n.n(N),D=n(58),F=n.n(D),G=n(60),L=n.n(G),U=n(42),W=n.n(U),V=n(1),H=n.n(V),Z=n(0),_=n.n(Z),J=n(1589),K=n(561),$=n(1575),Q=n(15),X=n(579),Y=n(1606),ee=n.n(Y),te=n(334),ne=n.n(te),re=n(1961),ae=n.n(re),ie=n(1801),oe=n.n(ie),se=n(1962),ce=n.n(se),le=n(575),ue=n.n(le),de=n(1757),pe=n.n(de),fe=n(16),ge=n(45),he=n.n(ge),me=n(1583),be=n(79),ve=n(196),ye=n(250),xe=n.n(ye),Ee=n(114);function ke(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):ke(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var Re=(new xe.a).prefix({wrapper:{padding:"24px",color:"black"},table:{marginTop:20,maxHeight:250,marginBottom:50},infoWrapper:{display:"flex"},labelsWrapper:{marginLeft:15},title:{fontSize:18,color:"black"},addParticipantWrapper:{height:80,display:"flex",alignItems:"center"},addParticipantButton:{fontFamily:Q.b.font.family.workSans,fontSize:14,fontWeight:Q.b.font.weight.regular,margin:"22px 0",boxShadow:"none",textTransform:"none",letterSpacing:.43,backgroundColor:"#fff",color:Q.b.color.purple3,border:"1px solid rgba(0, 0, 0, 0.38)"},participantAutocomplete:{marginTop:40},subtitle:Ce(Ce({},Ee.a.light),{},{fontSize:14}),participants:{fontSize:16,color:"black",marginTop:50,marginBottom:10},groupNameField:{width:"calc(100% - 30px)",fontSize:16}}),Oe=n(290),je=n(574),we=n(559),Me={zindex:2500},Se=Object(we.a)(Object(je.a)(["open"]))((function(e){var t=e.changeGroupName,n=e.group,r=e.handleClose,a=e.icon,i=e.isChangingGroupName,o=e.open,s=e.participants,c=e.title,l=Object(Z.useState)(""),u=he()(l,2),d=u[0],p=u[1],f=function(){r()};return _.a.createElement(Oe.e,{id:"rename-conversation",open:o,onClose:f,maxWidth:"md",style:Me},_.a.createElement(Oe.d,{id:"rename-conversation-dialogtitle",onClose:f},"Rename conversation"),_.a.createElement(Oe.c,null,_.a.createElement("div",{style:Re.wrapper},_.a.createElement("div",{style:Re.infoWrapper},s.length>2&&a(30),_.a.createElement("span",{style:Re.labelsWrapper},_.a.createElement("div",{style:Re.title},c),_.a.createElement("span",{style:Re.subtitle},"".concat(s.length," participants")))),_.a.createElement("div",{style:Re.participantAutocomplete},_.a.createElement(me.a,{helperText:be.R,label:be.S,"aria-label":be.S,onChange:function(e){p(e.target.value)},style:ve.a.groupNameField})))),_.a.createElement(Oe.b,{primary:{label:be.j,onClick:function(){d&&t(d,n.objectId).then(f).catch(f)},loading:i,disabled:0===d.length},secondary:{label:"Cancel",onClick:f}}))})),Ie=n(14),Pe=n(577),Te=Object(Ie.b)(Pe.a,{target:"e1lupqmx0"})();function qe(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):qe(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var Ae={changeGroupName:function(e){return C.b.renameConversation(e)},handleClose:C.b.closeRenameGroup},Ne=Object(E.b)((function(e,t){return{open:e.inboxv2.renameGroupOpened,isChangingGroupName:e.inboxv2.renamingConversation,group:t.conversation,participants:x()(t.conversation.participants).map((function(t){return e.data.users[t]})).filter((function(e){return!!e})),title:C.c.conversationTitle(e,t.conversation.id),icon:function(){return _.a.createElement(Te,t)}}}),Ae,(function(e,t,n){return ze(ze(ze(ze({},n),e),t),{},{handleClose:function(){t.handleClose.apply(t,arguments),n.onClose()}})}))(Se),Be=n(138),De=n.n(Be),Fe=n(1601),Ge=n(1616),Le=n(558),Ue=function(e){return void 0===e},We=function(e){return function(t){return function(n){return function(e,t){return-1===e.map((function(e){return t[e]})).findIndex(Ue)}(e,n)?_.a.createElement(t,n):null}}},Ve=H.a.shape({});Ve.children=H.a.arrayOf(Ve);var He=H.a.shape({title:H.a.string,description:H.a.string,image:H.a.string,icon:H.a.string,category:H.a.string}),Ze=H.a.objectOf(H.a.shape({type:H.a.string.isRequired,url:H.a.string,data:He,error:H.a.string})),_e=H.a.shape({entities:Ze}),Je=H.a.shape({value:H.a.arrayOf(Ve),context:_e}),Ke=n(1727),$e=function(e){var t=e.onReturn,n=e.editorState,r=e.editorConfig,a=e.onChange,i=e.isSubmitting,o=e.setSubmittingState;return _.a.createElement(Ke.a,{editorState:n,config:r,onReturn:t,onChange:a,isSubmitting:i,setSubmittingState:o,type:"inbox"})};$e.propTypes={onReturn:H.a.func.isRequired,onChange:H.a.func.isRequired,editorState:Je.isRequired,editorConfig:H.a.shape({filesUrl:H.a.string,apiUrl:H.a.string,sessionToken:H.a.string}).isRequired,isSubmitting:H.a.bool.isRequired,setSubmittingState:H.a.func.isRequired};var Qe=_.a.memo($e),Xe=Object(Ie.b)("div",{target:"e1facv4r0"})("width:100%;box-sizing:border-box;padding:0 ",Q.b.spacing.xLarge,";"),Ye=Object(Ie.b)("div",{target:"e1facv4r1"})("display:flex;flex:1;align-items:center;justify-content:center;"),et=Object(Ie.b)(oe.a,{target:"e1facv4r2"})("margin-right:16px;");function tt(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):tt(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}function rt(e){var t=function(){if("undefined"==typeof Reflect||!S.a)return!1;if(S.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(S()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W()(e);if(t){var a=W()(this).constructor;n=S()(r,arguments,a)}else n=r.apply(this,arguments);return L()(this,n)}}var at=function(e){F()(n,e);var t=rt(n);function n(e){var r;return q()(this,n),(r=t.call(this,e)).state={editorState:Fe.e,isSubmitting:!1},r.onReturn=r.onReturn.bind(B()(r)),r.onClick=r.onClick.bind(B()(r)),r.setEditorState=r.setEditorState.bind(B()(r)),r.setSubmittingState=r.setSubmittingState.bind(B()(r)),r}return A()(n,[{key:"componentDidMount",value:function(){var e=this.props.message,t=JSON.parse(e.content),n=Object(Ge.isAulaEditorState)(t)?t:Object(Fe.f)(t);this.setState((function(e){return nt(nt({},e),{},{editorState:n})}))}},{key:"setSubmittingState",value:function(e){this.setState((function(t){return nt(nt({},t),{},{isSubmitting:e})}))}},{key:"onClick",value:function(){var e=this.state.editorState;Object(Fe.k)(e)&&(Object(Fe.j)(e)||Object(Fe.l)(e)?this.setSubmittingState(!0):this.onReturn(e))}},{key:"onReturn",value:function(){var e=this.props,t=e.save,n=e.close,r=this.state,a=r.editorState,i=r.isSubmitting;!Object(Fe.k)(a)||Object(Fe.l)(a)||Object(Fe.j)(a)||i||(t(De()(a)),n())}},{key:"setEditorState",value:function(e){this.setState((function(t){return nt(nt({},t),{},{editorState:e})}))}},{key:"render",value:function(){var e=this.props,t=e.close,n=e.saving,r=e.editorConfig,a=this.state,i=a.editorState,o=a.isSubmitting;return _.a.createElement(Oe.e,{id:"edit-message-modal",open:!0,onClose:t,maxWidth:"md",style:{zIndex:1400},disableEnforceFocus:!0},_.a.createElement(Oe.d,{id:"edit-message-modal-dialogtitle",onClose:t},_.a.createElement(Ye,null,_.a.createElement(et,null),be.K)),_.a.createElement(Oe.c,null,_.a.createElement(Xe,null,_.a.createElement(Qe,{editorConfig:r,editorState:i,onChange:this.setEditorState,onReturn:this.onReturn,isSubmitting:o,setSubmittingState:this.setSubmittingState}))),_.a.createElement(Oe.b,{primary:{label:be.m,loading:n,disabled:n||!Object(Fe.k)(i)||Object(Fe.l)(i)||Object(Fe.j)(i),onClick:this.onClick},secondary:{label:"Cancel",onClick:t}}))}}]),n}(_.a.Component);at.propTypes={close:H.a.func.isRequired,message:Le.c,save:H.a.func.isRequired,saving:H.a.bool,editorConfig:H.a.shape({filesUrl:H.a.string,apiUrl:H.a.string,sessionToken:H.a.string}).isRequired},at.defaultProps={message:void 0,saving:!1};var it=Object(we.a)(We(["message"]))(at);function ot(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):ot(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var ct={save:C.b.editMessage,close:C.b.closeEditMessage},lt=Object(E.b)((function(e){return{message:e.data.inboxv2.messages[e.inboxv2.currentlyEditedMessageId],saving:e.inboxv2.editingMessage,user:e.user.user}}),ct,(function(e,t,n){return st(st(st(st({},n),e),t),{},{close:function(){t.close.apply(t,arguments),n.onClose()}})}))(it),ut=n(1560),dt=n(578),pt=n(293),ft=n(85);function gt(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):gt(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var mt=(new xe.a).prefix({avatar:{marginRight:20,flexShrink:0},userCell:{display:"flex",flexAlign:"horizontal",marginBottom:20},nameButtonsContainer:{width:"100%",marginRight:30,display:"flex",alignItems:"center",justifyContent:"space-between"},name:ht(ht({},Ee.a.light),{},{color:"black",margin:0,fontSize:16,width:300}),instructor:{color:Q.b.color.pink,paddingLeft:15,fontSize:14},buttonsContainer:{width:250,display:"flex",float:"left",justifyContent:"space-between"},button:{marginRight:45,cursor:"pointer",fontSize:"30px",display:"flex"},toggle:{marginLeft:30,display:"inline-block",width:45}}),bt=n(557),vt=Object(bt.a)({svg:function(){return _.a.createElement(_.a.Fragment,null,_.a.createElement("path",{d:"M15.163 31.722l-0.037-0.009c-0.086-0.021-0.17-0.039-0.255-0.045-1.997-0.131-3.857-0.616-5.528-1.442-4.832-2.39-7.798-6.268-8.817-11.531-0.080-0.411-0.129-0.842-0.178-1.259-0.023-0.194-0.045-0.388-0.071-0.581v-1.696l0.011-0.050c0.021-0.088 0.039-0.177 0.045-0.266 0.134-1.977 0.614-3.817 1.427-5.469 2.383-4.847 6.266-7.825 11.54-8.848 0.411-0.079 0.844-0.13 1.262-0.179 0.195-0.023 0.389-0.045 0.584-0.071h1.691l0.038 0.009c0.084 0.021 0.17 0.040 0.255 0.044 1.997 0.13 3.855 0.617 5.528 1.443 4.832 2.39 7.798 6.268 8.817 11.53 0.078 0.412 0.13 0.845 0.178 1.263 0.023 0.193 0.046 0.386 0.070 0.578v1.695l-0.011 0.051c-0.020 0.088-0.038 0.177-0.045 0.267-0.134 1.974-0.614 3.815-1.426 5.468-2.384 4.847-6.265 7.823-11.54 8.847-0.412 0.079-0.843 0.13-1.262 0.18-0.195 0.022-0.389 0.045-0.582 0.070h-1.693zM15.995 1.504c-7.968 0-14.468 6.489-14.492 14.464-0.012 3.862 1.49 7.502 4.226 10.251 2.741 2.752 6.383 4.271 10.254 4.277 7.988 0.001 14.489-6.488 14.514-14.464 0.009-3.862-1.491-7.503-4.227-10.251-2.741-2.753-6.383-4.272-10.255-4.278h-0.020z"}),_.a.createElement("path",{d:"M9.2 16.462c-0.525 0-0.671-0.175-0.74-0.327-0.073-0.159-0.053-0.32 0.056-0.454 0.118-0.145 0.319-0.23 0.553-0.232 0.398-0.003 0.797-0.004 1.194-0.004l12.72 0.003c0.412 0.001 0.678 0.178 0.694 0.465 0.018 0.291-0.2 0.51-0.542 0.543-0.051 0.006-0.102 0.006-0.152 0.006h-13.783z"}))},displayName:"Remove",viewBox:"0 0 32 32"});function yt(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):yt(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}function Et(e){var t=function(){if("undefined"==typeof Reflect||!S.a)return!1;if(S.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(S()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W()(e);if(t){var a=W()(this).constructor;n=S()(r,arguments,a)}else n=r.apply(this,arguments);return L()(this,n)}}var kt=function(e){F()(n,e);var t=Et(n);function n(e){var r;return q()(this,n),(r=t.call(this,e)).state={buttonHover:!1,loading:!1},r.handleAdd=r.handleAdd.bind(B()(r)),r}return A()(n,[{key:"handleAdd",value:function(){var e=this;this.setState({loading:!0}),this.props.onAddParticipant(this.props.user).then((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;return _.a.createElement("div",{key:this.props.user.objectId,style:mt.userCell},_.a.createElement(pt.a,{user:this.props.user,size:36,style:mt.avatar,isInstructor:this.props.isInstructor}),_.a.createElement("span",{style:mt.nameButtonsContainer},_.a.createElement("span",{style:mt.name},"".concat(this.props.user.firstName," ").concat(this.props.user.lastName)),!this.props.hideAdd&&_.a.createElement(dt.a,{type:"primary",loading:this.state.loading,onClick:this.handleAdd},"Add"),!this.props.hideRemove&&_.a.createElement(X.a,{title:"Remove",space:2,position:"top",stay:!1},_.a.createElement(vt,{tabIndex:"0","aria-label":"Remove participant",role:"button",style:xt(xt({},mt.button),{},{color:this.state.buttonHover?"black":Q.b.color.grayDark}),onClick:this.props.onRemoveParticipant,onKeyDown:function(t){t.keyCode===ft.d&&e.props.onRemoveParticipant()}}))))}}]),n}(_.a.Component);kt.propTypes={user:H.a.object.isRequired,isInstructor:H.a.bool,hideAdd:H.a.bool,hideRemove:H.a.bool,onAddParticipant:H.a.func,onRemoveParticipant:H.a.func},kt.defaultProps={onAddParticipant:function(){},onRemoveParticipant:function(){}};var Ct=kt,Rt=n(867);function Ot(e){var t=function(){if("undefined"==typeof Reflect||!S.a)return!1;if(S.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(S()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W()(e);if(t){var a=W()(this).constructor;n=S()(r,arguments,a)}else n=r.apply(this,arguments);return L()(this,n)}}var jt=function(e){F()(n,e);var t=Ot(n);function n(e){var r;return q()(this,n),(r=t.call(this,e)).state={confirmDialogOpen:!1,confirmDialogText:"",confirmDialogAction:void 0,addingParticipants:!1,newParticipants:[],loading:!1,newGroupName:void 0},r.handleRemoveParticipant=r.handleRemoveParticipant.bind(B()(r)),r.handleOpenConfirmDialog=r.handleOpenConfirmDialog.bind(B()(r)),r.handleCloseConfirmDialog=r.handleCloseConfirmDialog.bind(B()(r)),r.handleConfirmDialog=r.handleConfirmDialog.bind(B()(r)),r.handleChangeGroupName=r.handleChangeGroupName.bind(B()(r)),r.addGroupName=r.addGroupName.bind(B()(r)),r}return A()(n,[{key:"componentDidMount",value:function(){this.props.addParticipantsFirst&&this.setState({addingParticipants:!0})}},{key:"handleOpenConfirmDialog",value:function(){this.setState({confirmDialogOpen:!0})}},{key:"handleCloseConfirmDialog",value:function(){this.state.confirmDialogOpen?this.setState({confirmDialogOpen:!1,confirmDialogAction:void 0,loading:!1,addingParticipants:!1}):this.setState({addingParticipants:!1})}},{key:"handleConfirmDialog",value:function(){var e=this,t=this.state,n=t.addingParticipants,r=t.newParticipants,a=t.newGroupName,i=t.confirmDialogAction,o=this.props,s=o.addParticipants,c=o.groupId,l=o.changeGroupName,u=o.removeParticipant;n?(this.setState({loading:!0}),s(r.map((function(e){return e.objectId})),c).then((function(){a?l(a,c).then((function(){e.setState({loading:!1,addingParticipants:!1,newParticipants:[]})})):e.setState({loading:!1,addingParticipants:!1,newParticipants:[]})})).catch((function(){e.setState({loading:!1,addingParticipants:!1,newParticipants:[]})}))):i&&(this.setState({loading:!0}),u(i.participantId,c).then((function(){e.handleCloseConfirmDialog()})).catch((function(){e.handleCloseConfirmDialog()})))}},{key:"handleRemoveParticipant",value:function(e){this.setState({confirmDialogText:"Are you sure you want to remove ".concat(e.firstName,"\n      ").concat(e.lastName," from the conversation?"),confirmDialogAction:{type:"remove",buttonText:"Remove",participantId:e.objectId}}),this.handleOpenConfirmDialog()}},{key:"handleAddParticipant",value:function(e){var t=this.props,n=t.addParticipants,r=t.groupId;return n([e.id],r)}},{key:"handleChangeGroupName",value:function(e){var t=e.target.value;this.setState({newGroupName:t})}},{key:"addGroupName",value:function(){return _.a.createElement("div",null,_.a.createElement(me.a,{hintText:be.R,floatingLabelText:"Group Name",onChange:this.handleChangeGroupName,style:Re.groupNameField}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleClose,r=t.groupName,a=t.boundToSpaceGroup,i=t.open,o=t.participants,s=t.icon,c=t.title,l=t.classRoomId,u=t.userId,d=t.conversation.educatorOnly,p=this.state,f=p.loading,g=p.confirmDialogAction,h=p.newParticipants,m=p.newGroupName,b=p.addingParticipants,v=p.confirmDialogOpen,y=p.confirmDialogText,x=a||d?null:_.a.createElement(ut.a,{variant:"contained","aria-label":be.e,style:Re.addParticipantButton,onClick:function(){return e.setState({addingParticipants:!0})}},be.e);return _.a.createElement(_.a.Fragment,null,_.a.createElement(Oe.e,{id:"conversation-view-participants",open:i,onClose:n,maxWidth:"md",style:{zIndex:1600}},_.a.createElement(Oe.d,{id:"conversation-view-participants-dialogtitle",onClose:n},b?"Add participants":"Conversation participants"),_.a.createElement(Oe.c,null,_.a.createElement("div",{style:Re.wrapper},_.a.createElement("div",{style:Re.infoWrapper},o.length>2&&s(30),_.a.createElement("span",{style:Re.labelsWrapper},_.a.createElement("div",{style:Re.title},c),_.a.createElement("span",{style:Re.subtitle},!b&&"".concat(o.length," participants")))),b&&_.a.createElement("div",{style:Re.participantAutocomplete},_.a.createElement(Rt.a,{onChange:function(t){return e.setState({newParticipants:t})},classRoomId:l,blockList:o.map((function(e){return e.objectId}))})),!b&&_.a.createElement(_.a.Fragment,null,x,_.a.createElement("div",{style:Re.table},o.filter((function(e){return e.objectId!==u})).map((function(t){return _.a.createElement(Ct,{user:t,key:t.objectId,hideRemove:a||d||2===o.length,hideAdd:!0,onRemoveParticipant:function(){return e.handleRemoveParticipant(t)}})})))),h.length>0&&"-"===r&&this.addGroupName())),b?_.a.createElement(Oe.b,{primary:{label:g?g.buttonText:be.d,disabled:h.length>0&&!m&&"-"===r,onClick:this.handleConfirmDialog,loading:f},secondary:{label:be.g,onClick:function(){e.setState({addingParticipants:!1}),e.handleCloseConfirmDialog(),n()},disabled:f}}):null),_.a.createElement(Oe.a,{id:"confirm-remove-participant",title:"Remove participant",message:y,open:v,onClose:this.handleCloseConfirmDialog,action:{label:"Remove",onClick:this.handleConfirmDialog,danger:!0,disabled:f,loading:f}}))}}]),n}(_.a.Component);jt.propTypes={addParticipants:H.a.func.isRequired,addParticipantsFirst:H.a.bool,changeGroupName:H.a.func.isRequired,classRoomId:H.a.string.isRequired,groupId:H.a.string.isRequired,groupName:H.a.string.isRequired,icon:H.a.func.isRequired,participants:H.a.array.isRequired,removeParticipant:H.a.func.isRequired,userId:H.a.string.isRequired,title:H.a.string.isRequired,handleClose:H.a.func.isRequired,open:H.a.bool.isRequired,boundToSpaceGroup:H.a.bool.isRequired,conversation:H.a.shape({educatorOnly:H.a.bool})},jt.defaultProps={addParticipantsFirst:!1,conversation:{}};var wt=Object(we.a)(Object(je.a)(["open"]))(jt);function Mt(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):Mt(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var It=function(e){return e.stopPropagation()},Pt=function(e,t){return"".concat(e.firstName," ").concat(e.lastName)<"".concat(t.firstName," ").concat(t.lastName)?-1:1},Tt={addParticipants:function(e){return C.b.addParticipants(e)},changeGroupName:function(e){return C.b.renameConversation(e)},handleClose:C.b.closeViewParticipants,removeParticipant:function(e){return C.b.removeParticipant(e)}},qt=Object(E.b)((function(e,t){var n=C.c.conversationTitle(e,t.conversation.id);return{addParticipantsFirst:e.inboxv2.addParticipantOpened,classRoomId:e.classRoom.current,groupId:t.conversation.id,groupName:n,icon:function(){return _.a.createElement(Te,t)},open:e.inboxv2.viewParticipantsOpened,onClick:It,participants:x()(t.conversation.participants).map((function(t){return e.data.users[t]})).filter((function(e){return!!e})).sort(Pt),title:n,userId:e.user.userId,boundToSpaceGroup:!!t.conversation.boundToSpaceGroup}}),Tt,(function(e,t,n){return St(St(St(St({},n),e),t),{},{handleClose:function(){t.handleClose.apply(t,arguments),n.onClose()}})}))(wt),zt=function(e){var t=e.open,n=e.onClose,r=e.onConfirm,a=e.loading;return _.a.createElement(Oe.a,{id:"leave-group-conversation",title:be.M,message:be.L,open:t,onClose:n,action:{label:be.F,onClick:r,danger:!0,loading:a},maxWidth:"sm"})},At=n(1593),Nt=n(20),Bt=n.n(Nt),Dt=n(81),Ft=n(317),Gt=n(24),Lt=function(e,t,n,r){var a,i,o,s,c=n?r[n-1]:void 0,l=c&&c.writer===t.writer,u=c&&(a=6e4,i=c.createdAt,o=t.createdAt,s=new Date(i).getTime(),new Date(o).getTime()-s<a),d=c&&c.editedAt||t.editedAt;return c&&l&&u&&!d?e[e.length-1].messages.push(t.id):e.push({author:t.writer,createdAt:t.createdAt,messages:[t.id]}),e},Ut=function(e){return e.reduce(Lt,[])},Wt=n(536),Vt=n(839),Ht=n.n(Vt),Zt=function(e,t,n){return"second"===t?"Just now":"".concat(e," ").concat(t).concat(e>1?"s":""," ").concat(n)},_t=_.a.memo((function(e){var t=e.date;return _.a.createElement(Ht.a,{date:t,minPeriod:60,formatter:Zt,title:new Date(t).toLocaleString("en-GB")})})),Jt=n(1617),Kt=n.n(Jt),$t=n(529),Qt=n.n($t),Xt=n(556),Yt=Object(Ie.b)("div",{target:"ess2ap40"})("display:flex;flex-direction:row;position:absolute;right:23px;bottom:calc(100% - 12px);transition:opacity 200ms;z-index:150;box-sizing:border-box;opacity:",(function(e){return e.isFocusing?1:0}),";&:hover{opacity:1;}"),en=Object(Ie.b)(K.a,{target:"ess2ap41"})("color:",Q.b.color.grey11,";padding:3px;color:",Q.b.color.grey11,";background-color:",Q.b.color.white,";display:inline-block;transition:opacity 0.2s ease 0s;margin-left:8px;box-shadow:rgba(0,0,0,0.3) 0px 0px 4px 0px;"),tn=Object(Ie.b)(Xt.a,{target:"ess2ap42"})("color:",Q.b.color.grey11,";"),nn=function(e){var t=e.messageId,n=e.editMessage,r=e.replyToMessage,a=e.openEmojiPicker,i=Object(Z.useState)(!1),o=he()(i,2),s=o[0],c=o[1];return _.a.createElement(Yt,{isFocusing:s,onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}},_.a.createElement(X.a,{title:"React to message",position:"top"},_.a.createElement("div",{role:"presentation"},_.a.createElement(en,{onClick:function(e){a({messageId:t,anchor:e.currentTarget})},label:"reply",type:"secondary",size:"small",icon:tn,buttonAttributes:{tabIndex:-1}}))),_.a.createElement(X.a,{title:"Reply to message",position:"top"},_.a.createElement("div",{role:"presentation"},_.a.createElement(en,{onClick:r,label:"reply",icon:Kt.a,type:"secondary",size:"small",buttonAttributes:{tabIndex:-1}}))),n&&_.a.createElement(X.a,{title:"Edit message",position:"top"},_.a.createElement("div",{role:"presentation"},_.a.createElement(en,{type:"secondary",size:"small",label:"edit",onClick:n,icon:Qt.a,buttonAttributes:{tabIndex:-1}}))))};nn.propTypes={messageId:H.a.string.isRequired,editMessage:H.a.func,replyToMessage:H.a.func.isRequired,openEmojiPicker:H.a.func.isRequired},nn.defaultProps={editMessage:null};var rn=_.a.memo(nn),an=n(1668),on=function(e){var t=e.content,n=e.messageId;return _.a.createElement(an.a,{uniqueId:n,rawEditorState:JSON.parse(t)})};on.propTypes={content:H.a.string.isRequired,messageId:H.a.string.isRequired};var sn=on,cn=Object(E.b)((function(e,t){return{content:C.c.message(e,t.messageId).content}}))(sn),ln=n(1723),un=Object(Ie.b)("div",{target:"e1kgdrrz0"})("flex-grow:1;opacity:",(function(e){return n=(t=e).pending,r=t.failed,n||r?"0.56":"1";var t,n,r}),";color:",(function(e){return n=(t=e).pending,t.failed?Q.b.color.red:n?Q.b.color.grayDark:"inherit";var t,n}),";margin-left:5px;width:calc(100% - 105px);padding-right:112px;box-sizing:border-box;.RichEditor-editor{margin-bottom:0 !important;}"),dn=Object(Ie.b)("div",{target:"e1kgdrrz1"})("display:flex;flex-direction:row;position:relative;margin-left:-25px;margin-right:-56px;background-color:",(function(e){return e.highlighted?Q.b.color.grayLight:"none"}),";transition:background-color 0.3s;&:hover{background-color:",Q.b.color.grayLight,";transition:background-color 0s;",Yt,"{opacity:1;}}"),pn=n(1667),fn=Object(Ie.b)("div",{target:"eg8kpaf0"})("display:flex;padding-left:53px;flex-direction:row;margin-top:",(function(e){return e.firstMessage?"7px":"14px"}),";margin-bottom:14px;cursor:pointer;"),gn=Object(Ie.b)("div",{target:"eg8kpaf1"})("border-left:2px solid ",Q.b.color.mediumBlue,";margin-bottom:-5px;margin-top:-5px;padding-right:12px;"),hn=Object(Ie.b)("div",{target:"eg8kpaf2"})("display:flex;flex-direction:column;width:100%;"),mn=Object(Ie.b)("div",{target:"eg8kpaf3"})("font-style:normal;font-weight:normal;font-size:14px;line-height:16px;color:",Q.b.color.black,";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-top:4px;"),bn=Object(Ie.b)("div",{target:"eg8kpaf4"})("color:",Q.b.color.mediumBlue,";font-size:smaller;font-weight:bold;"),vn=function(e){var t=e.author,n=e.content,r=e.firstMessage,a=e.createdAt,i=e.getUser,o=e.shouldFetchUser,s=e.onClick;Object(Z.useEffect)((function(){o&&i()}),[o]);var c=t||{firstName:"",lastName:""},l=Object(Z.useState)(null),u=he()(l,2),d=u[0],p=u[1];return Object(Z.useEffect)((function(){p(Object(pn.a)({content:n})[0])}),[n]),_.a.createElement(fn,{role:"button",onClick:s,firstMessage:r},_.a.createElement(gn,null),_.a.createElement(hn,null,_.a.createElement(bn,null,c.firstName," ",c.lastName),_.a.createElement(mn,null,d||_.a.createElement("span",{role:"img","aria-label":"msg"},"💬 Message - ",_.a.createElement(_t,{date:a})))))};vn.propTypes={firstMessage:H.a.bool,shouldFetchUser:H.a.bool.isRequired,author:H.a.shape({}).isRequired,content:H.a.string.isRequired,getUser:H.a.func.isRequired,createdAt:H.a.string,onClick:H.a.func.isRequired},vn.defaultProps={firstMessage:!1,createdAt:null};var yn=vn,xn=n(1669),En=Object(E.b)((function(e,t){var n=Object(w.c)(e,t.writer);return{author:n,shouldFetchUser:!Object(w.a)(e,t.writer)&&!n}}),(function(e,t){return{getUser:function(){return e(Object(xn.a)(t.writer))}}}))(yn),kn=function(e){var t,n=e.currentUserId,r=e.messageId,a=e.openEditMessage,i=e.replyToMessage,o=e.writerId,s=e.failed,c=e.repliedMessage,l=e.firstMessage,u=e.toggleReaction,d=e.openEmojiPicker,p=e.closeEmojiPicker,f=e.onRepliedMessageClicked,g=e.highlighted;return _.a.createElement(dn,{highlighted:g},_.a.createElement(un,{pending:(t=r,t.startsWith("local.")),failed:s},c&&_.a.createElement(En,P()({firstMessage:l,onClick:function(){return f(c.id)}},c)),_.a.createElement(cn,{messageId:r}),_.a.createElement(ln.a,{itemId:r,toggleReaction:u,hideWhenNoReactions:!0,style:{paddingTop:8,paddingLeft:53},openEmojiPicker:function(){return d({messageId:r})},closeEmojiPicker:p})),_.a.createElement(rn,{messageId:r,editMessage:n===o?a:void 0,replyToMessage:i,toggleReaction:u,openEmojiPicker:d}))};kn.propTypes={createdAt:H.a.string.isRequired,currentUserId:H.a.string.isRequired,messageId:H.a.string.isRequired,openEditMessage:H.a.func.isRequired,replyToMessage:H.a.func.isRequired,updatedAt:H.a.string,writerId:H.a.string.isRequired,failed:H.a.bool,firstMessage:H.a.bool,repliedMessage:H.a.shape({createdAt:H.a.string,content:H.a.string.isRequired,id:H.a.string.isRequired,writer:H.a.string.isRequired}),toggleReaction:H.a.func.isRequired,openEmojiPicker:H.a.func.isRequired,closeEmojiPicker:H.a.func.isRequired,onRepliedMessageClicked:H.a.func.isRequired,highlighted:H.a.bool.isRequired},kn.defaultProps={updatedAt:void 0,failed:!1,repliedMessage:null,firstMessage:!1};var Cn=_.a.memo(kn),Rn=Object(E.b)((function(e,t){var n=C.c.message(e,t.messageId),r=n.content,a=n.createdAt,i=n.updatedAt,o=n.writer,s=n.failed,c=n.repliedMessage;return{content:r,createdAt:a,currentUserId:Gt.currentUserId(e),updatedAt:i,writerId:o,failed:s,repliedMessage:c,highlighted:C.c.isMessageHighlighted(e,t.messageId)}}),(function(e,t){return{openEditMessage:function(){return e(C.b.openEditMessage(t.messageId))},replyToMessage:function(){return e(C.b.replyToMessage(t.messageId))},toggleReaction:function(n){var r=n.emojiName;return e(O.b.toggleReaction({itemId:t.messageId,itemType:"UBInboxMessage",emojiName:r}))}}}))(Cn),On=Object(Ie.b)("div",{target:"eogbgkt0"})("position:relative;flex-shrink:0;overflow:visible;margin-bottom:",Q.b.spacing.xLarge,";padding-right:",Q.b.spacing.xxxGiant,";padding-left:",Q.b.spacing.xLarge,";"),jn=Object(Ie.b)("span",{target:"eogbgkt1"})("font-size:",Q.b.font.size.copy,";font-weight:",Q.b.font.weight.regular,";color:",Q.b.color.grey11,";margin-left:",Q.b.spacing.xSmall,";"),wn=Object(Ie.b)("div",{target:"eogbgkt2"})("flex-shrink:0;padding-top:",Q.b.spacing.xSmall,";"),Mn=Object(Ie.b)("div",{target:"eogbgkt3"})("flex-shrink:0;display:flex;flex-direction:row;align-items:center;"),Sn=n(1765),In=n(560),Pn=Object(E.b)((function(e,t){var n=Object(w.c)(e,t.authorId)||{firstName:"",lastName:""},r=n.avatar,a=n.firstName,i=n.lastName,o="".concat(a," ").concat(i);return{correlationId:t.authorId,online:Object(Gt.currentUserId)(e)!==t.authorId&&Object(In.a)(e,t.authorId),name:o,title:o,avatar:r,size:t.size}}))(Sn.a),Tn=function(e){var t=e.id,n=e.author,r=e.createdAt,a=e.edited,i=e.messages,o=e.openEmojiPicker,s=e.closeEmojiPicker,c=e.onRepliedMessageClicked;return _.a.createElement(On,{id:t,"data-testid":"message"},_.a.createElement(Mn,null,_.a.createElement(Pn,{authorId:n,collapsed:!0,subtitle:_.a.createElement(_t,{date:r}),size:"small"}),a&&_.a.createElement(jn,null,"(Edited)")),_.a.createElement(wn,null,i.map((function(e,t){return _.a.createElement(Rn,{key:"message:".concat(e),messageId:e,firstMessage:0===t,openEmojiPicker:o,closeEmojiPicker:s,onRepliedMessageClicked:c})}))))};Tn.propTypes={id:H.a.string.isRequired,author:H.a.string.isRequired,createdAt:H.a.string.isRequired,edited:H.a.bool.isRequired,messages:H.a.arrayOf(H.a.string).isRequired,openEmojiPicker:H.a.func.isRequired,closeEmojiPicker:H.a.func.isRequired,onRepliedMessageClicked:H.a.func.isRequired};var qn=_.a.memo(Tn),zn=Object(E.b)((function(e,t){return{edited:!!C.c.message(e,t.messages[0]).editedAt}}))(qn),An=Object(Ie.b)("div",{target:"e9wq8ko0"})("position:relative;height:",Q.b.spacing.xLarge,";padding-bottom:",Q.b.spacing.xLarge,";margin-left:",Q.b.spacing.xLarge,";margin-right:",Q.b.spacing.xLarge,";"),Nn=Object(Ie.b)("div",{target:"e9wq8ko1"})("height:",Q.b.spacing.small,";border-bottom:dashed 2px ",Q.b.color.gray,";box-sizing:border-box;"),Bn=Object(Ie.b)("p",{target:"e9wq8ko2"})("position:absolute;top:0;width:100%;height:100%;text-align:center;margin:0;"),Dn=Object(Ie.b)("span",{target:"e9wq8ko3"})("font-size:",Q.b.font.size.small,";background-color:",Q.b.color.white,";padding:0 ",Q.b.spacing.medium,";color:",Q.b.color.grey11,";"),Fn=function(){return _.a.createElement(An,null,_.a.createElement(Nn,null),_.a.createElement(Bn,null,_.a.createElement(Dn,null,be.D)))},Gn=n(1958),Ln=n.n(Gn),Un=Object(Ie.b)("div",{target:"ee8nnst0"})("height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:auto;text-align:center;"),Wn=Object(Ie.b)("p",{target:"ee8nnst1"})("font-family:inherit;font-size:",Q.b.font.size.large,";font-weight:",Q.b.font.weight.medium,";color:",Q.b.color.black,";line-height:24px;margin-top:0;margin-bottom:0;"),Vn=Object(Ie.b)(Wn,{target:"ee8nnst2"})("color:",Q.b.color.grey11,";"),Hn=Object(Ie.b)("img",{target:"ee8nnst3"})("margin-top:",Q.b.spacing.medium,";"),Zn=function(){return _.a.createElement(Un,{"data-testid":"dm-without-message"},_.a.createElement(Wn,null,be.O),_.a.createElement(Vn,null,be.N),_.a.createElement(Hn,{src:Ln.a,alt:"no student",width:260,height:260}))},_n=Object(Ie.b)("p",{target:"e19nyefu0"})("flex-shrink:0;display:block;margin:0;font-size:",Q.b.font.size.copy,";color:",Q.b.color.grayDark,";padding:0 0 ",Q.b.spacing.xSmall," ",Q.b.spacing.xxxLarge,";margin-bottom:15px;line-height:",Q.b.spacing.large,";height:",Q.b.spacing.xLarge,";"),Jn=function(e){var t=e.typing,n=e.label;return _.a.createElement(_n,{typing:t},n)};Jn.propTypes={typing:H.a.bool.isRequired,label:H.a.string.isRequired};var Kn=_.a.memo(Jn),$n=function(e){switch(e.length){case 0:return"";case 1:return"".concat(e[0].firstName," is typing...");default:return"Someone is typing..."}},Qn=Object(E.b)((function(e){var t=C.c.currentConversationId(e),n=C.c.typersForConversation(e,t).map((function(t){return w.c(e,t)})).filter((function(e){return!!e}));return{typing:!!n.length,label:$n(n)}}))(Kn),Xn=n(1959),Yn=n.n(Xn),er=n(106),tr=n(18),nr=n(11),rr=n(23),ar=n(27),ir=n(423),or=n(38),sr=Z.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.color,o=void 0===i?"default":i,s=e.component,c=void 0===s?"button":s,l=e.disabled,u=void 0!==l&&l,d=e.disableFocusRipple,p=void 0!==d&&d,f=e.focusVisibleClassName,g=e.size,h=void 0===g?"large":g,m=e.variant,b=void 0===m?"circular":m,v=Object(tr.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return Z.createElement(ir.a,Object(nr.a)({className:Object(rr.default)(r.root,a,"large"!==h&&r["size".concat(Object(or.a)(h))],u&&r.disabled,"extended"===b&&r.extended,{primary:r.primary,secondary:r.secondary,inherit:r.colorInherit}[o]),component:c,disabled:u,focusRipple:!p,focusVisibleClassName:Object(rr.default)(r.focusVisible,f),ref:t},v),Z.createElement("span",{className:r.label},n))})),cr=Object(ar.a)((function(e){return{root:Object(nr.a)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(sr);const lr=({type:e},t)=>"primary"===e?(e=>`\n  content: '';  \n  position: absolute;\n  display: block;\n  top: 0;\n  right: 0;\n  left: 0;\n  border-radius: ${Q.b.borderRadius.extraLarge};;\n  background-color: rgba(255,255,255,${e});\n  height: 100%;\n`)(t):(e=>`\n  content: '';  \n  position: absolute;\n  display: block;\n  top: 0;\n  right: 0;\n  left: 0;\n  border-radius: ${Q.b.borderRadius.extraLarge};;\n  background-color: rgba(0,0,0,${e});\n  height: 100%;\n`)(t);var ur=Object(er.a)(cr,{target:"e110ivi40",label:"StyledBaseFab"})((e=>(({type:e})=>{const t=Q.b.fab[e],{backgroundColor:n,width:r,height:a,color:i}=t;return`\n  background-color: ${n};\n  width: ${r};\n  height: ${a};\n  color: ${i};\n  `})(e))," box-shadow:0px 6px 10px rgba(0,0,0,0.14),0px 1px 18px rgba(0,0,0,0.12),0px 3px 5px rgba(0,0,0,0.2);:hover{background-color:",(e=>Q.b.fab[e.type].backgroundColor),";::after{",(e=>lr(e,Q.b.opacity.alpha4)),"}}:focus{background-color:",(e=>Q.b.fab[e.type].backgroundColor),";::after{",(e=>lr(e,Q.b.opacity.alpha12))," box-shadow:0px 8px 10px rgba(0,0,0,0.14),0px 3px 14px rgba(0,0,0,0.12),0px 5px 5px rgba(0,0,0,0.2);}:active{background-color:",(e=>Q.b.fab[e.type].backgroundColor),";::after{",(e=>lr(e,Q.b.opacity.alpha100)),"}box-shadow:0px 6px 10px rgba(0,0,0,0.14),0px 1px 18px rgba(0,0,0,0.12),0px 3px 5px rgba(0,0,0,0.2);}"),dr=n(503),pr=n(10);const fr=({type:e,children:t,onClick:n})=>Object(pr.e)(ur,{role:"button",type:e,onClick:n,onKeyDown:e=>e.keyCode===dr.a&&n(e),"aria-label":"Fab"},t);fr.defaultProps={type:"secondary",children:[],onClick:void 0},fr.propTypes={type:H.a.oneOf(["primary","secondary"]),children:H.a.node,onClick:H.a.func};var gr=_.a.memo(fr),hr=Object(Ie.b)("div",{target:"efthhcb0"})("position:absolute;z-index:151;right:16px;bottom:16px;height:42px;width:42px;"),mr=Object(Ie.b)("div",{target:"efthhcb1"})("position:relative;"),br=function(e){var t=e.onClick,n=e.visible;return _.a.createElement(mr,null,n&&_.a.createElement(hr,null,_.a.createElement(gr,{"aria-label":"Jump to bottom",onClick:t},_.a.createElement(Yn.a,null))))};br.propTypes={visible:H.a.bool.isRequired,onClick:H.a.func.isRequired};var vr=br;function yr(e){var t=function(){if("undefined"==typeof Reflect||!S.a)return!1;if(S.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(S()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W()(e);if(t){var a=W()(this).constructor;n=S()(r,arguments,a)}else n=r.apply(this,arguments);return L()(this,n)}}var xr=function(e){return"group:".concat(e.messages[0])},Er=function(e){F()(o,e);var t,n,r,a,i=yr(o);function o(e){var t;return q()(this,o),(t=i.call(this,e)).state={fromBottom:0,moreThanOneScreenUp:!1},t.infinite=null,t.onScroll=t.onScroll.bind(B()(t)),t.onWriteZoneResize=t.onWriteZoneResize.bind(B()(t)),t.setInfinite=t.setInfinite.bind(B()(t)),t.scrollFromBottom=t.scrollFromBottom.bind(B()(t)),t.scrollToBottom=t.scrollToBottom.bind(B()(t)),t.onRepliedMessageClicked=t.onRepliedMessageClicked.bind(B()(t)),t.onJumpToBottom=t.onJumpToBottom.bind(B()(t)),t}return A()(o,[{key:"componentDidMount",value:function(){var e=this.props.currentMessageId;e?this.loadAndScrollToMessage(e):(this.scrollToBottom(),this.optionallySetConversationRead(),this.props.shouldFetchOnMount&&this.fetchInitial())}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.conversationLoaded,r=t.conversationId,a=t.latestMessageDate,i=t.shouldFetchOnMount;if(n){var o=0===this.state.fromBottom,s=e.conversationId!==r,c=o&&a!==e.latestMessageDate;(s||c)&&this.scrollToBottom(),i&&s&&this.fetchInitial(),this.optionallySetConversationRead()}}},{key:"onWriteZoneResize",value:function(){this.scrollFromBottom()}},{key:"onScroll",value:function(e){var t=e.scrollHeight,n=e.clientHeight,r=t-n-e.scrollTop,a=r>n;this.setState({fromBottom:r,moreThanOneScreenUp:a})}},{key:"onRepliedMessageClicked",value:(a=g()(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadAndScrollToMessage(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"onJumpToBottom",value:(r=g()(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.hasNewerMessages,r=t.fetchInitial,!n){e.next=4;break}return e.next=4,r();case 4:this.scrollToBottom();case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setInfinite",value:function(e){this.infinite=e}},{key:"loadAndScrollToMessage",value:(n=g()(v.a.mark((function e(t){var n,r,a,i,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.fetchMessagesAroundMessageId,a=n.highlightMessage,e.next=3,r(t);case 3:i=this.props.groups,o=i.find((function(e){return e.messages.includes(t)})),(s=o&&document.getElementById(xr(o)))&&(a(t),this.scrollIntoView(s));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"scrollIntoView",value:function(e){var t=this.infinite.getScrollValues(),n=t.scrollTop,r=n+t.clientHeight,a=e.offsetTop;a+e.clientHeight<=r&&a>=n||this.infinite.scrollTop(a)}},{key:"optionallySetConversationRead",value:function(){var e=this.props,t=e.conversationCreatedAt,n=e.featSetConversationUnreadEnabled,r=e.isUnread,a=e.latestMessageIsOwn,i=e.latestMessageDate,o=e.setConversationRead,s=e.hasNewerMessages;n?r&&o(i||t):!r||a||s||o(i)}},{key:"scrollFromBottom",value:function(){if(this.infinite){var e=this.state.fromBottom,t=this.infinite.getScrollValues(),n=t.scrollHeight,r=t.clientHeight;this.infinite.scrollTop(n-r-e)}}},{key:"scrollToBottom",value:function(){this.infinite&&(this.infinite.scrollToBottom(),this.setState({fromBottom:0}))}},{key:"fetchInitial",value:(t=g()(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.fetchInitial,e.next=3,t();case 3:this.scrollToBottom();case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,n=t.hasOlderMessages,r=t.hasNewerMessages,a=t.emptyConversation,i=t.fetchingMessages,o=t.fetchPrevious,s=t.fetchNext,c=t.openEmojiPicker,l=t.closeEmojiPicker,u=t.groups,d=this.state.moreThanOneScreenUp;return a?_.a.createElement(Zn,null):_.a.createElement(_.a.Fragment,null,_.a.createElement(Wt.a,{ref:this.setInfinite,reversed:!0,items:u,keyExtractor:xr,renderItem:function(t){return _.a.createElement(zn,{author:t.author,createdAt:t.createdAt,messages:t.messages,openEmojiPicker:c,closeEmojiPicker:l,onRepliedMessageClicked:e.onRepliedMessageClicked})},renderListStart:function(){return _.a.createElement(Fn,null)},renderEmptyList:function(){return _.a.createElement(Zn,null)},renderFooter:function(){return _.a.createElement(Qn,null)},hasPrevious:n,loadPrevious:o,hasNext:r,loadNext:s,loading:i,onScroll:this.onScroll,scrollDebounceMs:0,viewStyle:{paddingLeft:0,paddingTop:24,paddingBottom:0,paddingRight:0},resetScrollOnMount:!1}),_.a.createElement(vr,{visible:!i&&(r||d),onClick:this.onJumpToBottom}))}}]),o}(_.a.PureComponent);Er.propTypes={groups:H.a.array.isRequired,hasOlderMessages:H.a.bool,hasNewerMessages:H.a.bool,conversationCreatedAt:H.a.string.isRequired,conversationId:H.a.string.isRequired,conversationLoaded:H.a.bool.isRequired,emptyConversation:H.a.bool.isRequired,featSetConversationUnreadEnabled:H.a.bool,fetchingMessages:H.a.bool,fetchInitial:H.a.func.isRequired,fetchPrevious:H.a.func.isRequired,fetchNext:H.a.func.isRequired,isUnread:H.a.bool.isRequired,latestMessageDate:H.a.string,latestMessageIsOwn:H.a.bool,setConversationRead:H.a.func.isRequired,shouldFetchOnMount:H.a.bool,openEmojiPicker:H.a.func.isRequired,closeEmojiPicker:H.a.func.isRequired,fetchMessagesAroundMessageId:H.a.func.isRequired,highlightMessage:H.a.func.isRequired,currentMessageId:H.a.string},Er.defaultProps={hasOlderMessages:!0,hasNewerMessages:!0,featSetConversationUnreadEnabled:!1,fetchingMessages:!1,latestMessageDate:void 0,latestMessageIsOwn:!1,shouldFetchOnMount:!1,currentMessageId:null};var kr=Er;function Cr(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):Cr(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var Or=function(e){return(e||{}).id},jr=Object(Dt.b)(Ft.a,(function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(Or(e[n])!==Or(t[n]))return!1;return!0}))(Object(Dt.a)(C.c.inboxData,C.c.currentConversationId,(function(e,t){var n={data:{inboxv2:e}};return(C.c.conversationMessages(n,t)||[]).map((function(e){return C.c.message(n,e)}))})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}}((function(e){var t=e.reduce((function(e,t){return e[t.id.startsWith("local.")?"pending":"saved"].push(t),e}),{saved:[],pending:[]}),n=t.saved,r=t.pending;return[].concat(Bt()(n),Bt()(r))}),Ut,(function(e){return e}))),wr={fetchInitial:function(){return C.b.fetchMessages({replace:!0})},fetchPrevious:function(e){return C.b.fetchMessages({before:e})},fetchNext:function(e){return C.b.fetchMessages({after:e})},setConversationRead:function(e){return C.b.setConversationRead(e)},fetchMessagesAroundMessageId:function(e){return C.b.fetchMessages({aroundMessageId:e,replace:!0})},highlightMessage:function(e){return C.b.highlightMessage(e)}},Mr=Object(E.b)((function(e){var t=C.c.currentConversationId(e),n=C.c.currentConversationMessageId(e),r=C.c.conversation(e,t),a=C.c.hasOlderMessages(e,t),i=C.c.hasNewerMessages(e,t),o=C.c.fetchingMessagesForConversation(e,t),s=e.inboxv2.initialFetchDone[t],c=C.c.conversationLatestMessageDate(e,t),l=!o&&(i||!s),u=Gt.currentUserId(e),d="on"===Gt.currentUserFeatures(e).FEAT_SET_CONVERSATION_UNREAD;return{currentMessageId:n,hasOlderMessages:a,hasNewerMessages:i,conversationCreatedAt:r.createdAt,conversationLoaded:!!C.c.currentConversation(e),conversationId:t,emptyConversation:!C.c.conversationLatestMessage(e,t),featSetConversationUnreadEnabled:d,fetchingMessages:o,isUnread:d?C.c.isConversationUnreadByEvenIfEmpty(e,t,u):C.c.isConversationUnreadBy(e,t,u),oldestMessageDate:C.c.oldestLoadedMessage(e,t),newestLoadedMessageDate:C.c.newestLoadedMessage(e,t),latestMessageDate:c,latestMessageIsOwn:C.c.conversationLatestMessageIsOwn(e,t),shouldFetchOnMount:l,groups:jr(e)}}),wr,(function(e,t,n){var r=Rr(Rr(Rr(Rr({},n),e),t),{},{fetchPrevious:function(){return t.fetchPrevious(e.oldestMessageDate)},fetchNext:function(){return t.fetchNext(e.newestLoadedMessageDate)}});return delete r.oldestMessageDate,r}),{forwardRef:!0})(kr),Sr=Object(Ie.b)(Mr,{target:"erfk9la0"})("position:unset;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;"),Ir=Object(Ie.b)("div",{target:"erfk9la1"})("flex-shrink:0;min-height:64px;border-top:1px solid #efefef;box-sizing:border-box;padding-left:",Q.b.spacing.xLarge,";width:100%;"),Pr=Object(Ie.b)("div",{target:"erfk9la2"})("display:flex;"),Tr=Object(Ie.b)("div",{target:"erfk9la3"})("flex-shrink:none;"),qr=Object(Ie.b)("div",{target:"erfk9la4"})("display:flex;flex-direction:column;height:inherit;"),zr=Object(Ie.b)(At.a,{target:"erfk9la5"})("position:absolute !important;"),Ar=Object(Ie.b)("div",{target:"erfk9la6"})("position:relative;display:flex;flex-direction:column;justify-content:flex-end;width:100%;height:100%;"),Nr=Object(Ie.b)("div",{target:"erfk9la7"})("flex-shrink:none;"),Br=(Q.b.spacing.small,Q.b.color.grayLight,Q.b.color.designSystem.purple70,Q.b.color.designSystem.purple70,Q.b.color.designSystem.purple70,n(50)),Dr=n.n(Br),Fr=n(1544),Gr=Object(E.b)((function(e,t){var n=t.userId,r=e.data.users[n]||{objectId:n};return{name:r.firstName,src:r.avatar,size:"small",online:Object(In.a)(e,n),colourSeed:n}}),(function(){return{}}))(Fr.a),Lr=Object(Ie.b)("div",{target:"e1j6bdkn0"})("padding-left:8px;height:24px;"),Ur=function(e){var t=e.name,n=e.participantId;return _.a.createElement(Lr,null,_.a.createElement(X.a,{title:t,position:"bottom"},_.a.createElement("div",null,_.a.createElement(Gr,{"aria-hidden":"false",userId:n}))))};Ur.propTypes={name:H.a.string,participantId:H.a.string.isRequired},Ur.defaultProps={name:""};var Wr=Ur,Vr=Object(E.b)((function(e,t){var n=t.participantId,r=e.data.users[n];return{name:r?"".concat(r.firstName," ").concat(r.lastName):""}}),(function(){return{}}))(Wr),Hr=Object(Ie.b)("div",{target:"e1imi7ep0"})("display:flex;align-items:center;"),Zr=Object(Ie.b)("button",{target:"e1imi7ep1"})("font:inherit;font-size:",Q.b.font.size.copy,";background:none;border:0;margin:0;padding:0;outline:0;margin-left:8px;color:",Q.b.color.purple,";cursor:pointer;"),_r=Object(Ie.b)("div",{target:"evjlrpw0"})("border-radius:",Q.b.borderRadius.medium,";background-color:",Q.b.color.grayDark,";width:24px;height:24px;margin-left:8px;opacity:",(function(e){return e.opacity}),";"),Jr=function(){return _.a.createElement(_.a.Fragment,null,_.a.createElement(_r,{opacity:".4"}),_.a.createElement(_r,{opacity:".6"}),_.a.createElement(_r,{opacity:".8"}))};function Kr(e){var t=function(){if("undefined"==typeof Reflect||!S.a)return!1;if(S.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(S()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W()(e);if(t){var a=W()(this).constructor;n=S()(r,arguments,a)}else n=r.apply(this,arguments);return L()(this,n)}}var $r=function(e){return _.a.createElement(Vr,{key:e,participantId:e})},Qr=function(e){F()(n,e);var t=Kr(n);function n(){return q()(this,n),t.apply(this,arguments)}return A()(n,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"componentDidUpdate",value:function(){this.props.fetchUsers()}},{key:"render",value:function(){if(!this.props.isGroupConversation)return null;if(this.props.isFetchingUsers)return _.a.createElement(Hr,null,_.a.createElement(Jr,null));var e,t,n,r,a=(e=9,t=6,function(n){return n.length>e?[n.slice(0,t),n.slice(t)]:[n,[]]})(this.props.otherParticipantsIds),i=he()(a,2),o=i[0],s=i[1].length;return _.a.createElement(Hr,{"data-testid":"conversation-participants"},o.map($r),(n=s,r=this.props.openViewParticipants,n>0?_.a.createElement(X.a,{title:be.P,position:"bottom"},_.a.createElement(Zr,{onClick:r},"+",n," ",n>1?"others":"other")):null))}}]),n}(_.a.PureComponent);Qr.propTypes={fetchUsers:H.a.func.isRequired,isFetchingUsers:H.a.bool.isRequired,isGroupConversation:H.a.bool.isRequired,openViewParticipants:H.a.func.isRequired,otherParticipantsIds:H.a.arrayOf(H.a.string).isRequired};var Xr=Qr,Yr=["usersToFetch"];function ea(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):ea(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var na=function(){return null},ra=Object(E.b)((function(e){var t=w.d(e),n=w.b(e),r=C.c.currentConversationId(e),a=C.c.otherParticipantsIdsInConversation(e,r),i=a.filter(function(e,t){return function(n){return!e[n]&&void 0===t[n]}}(t,n));return{isFetchingUsers:!!a.filter(function(e,t){return function(n){return!e[n]&&!1!==t[n]}}(t,n)).length,isGroupConversation:C.c.isGroupConversation(e,r),otherParticipantsIds:a,usersToFetch:i}}),(function(e){return{fetchUsers:function(t){return e(xn.b(t))}}}),(function(e,t,n){var r=e.usersToFetch;return ta(ta(ta(ta({},Dr()(e,Yr)),t),n),{},{fetchUsers:r.length?function(){return t.fetchUsers(r)}:na})}))(Xr),aa=n(192),ia=n(49),oa=n.n(ia),sa=n(1698),ca=n(121),la=Object(ca.a)(Z.createElement("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"}),"Reply"),ua=Object(ca.a)(Z.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),da=Object(Ie.b)("div",{target:"e1rxuv720"})("display:flex;align-items:center;border-bottom:1px solid rgb(239,239,239);padding-bottom:9px;"),pa=Object(Ie.b)("div",{target:"e1rxuv721"})("display:flex;flex-direction:column;justify-content:center;flex:1;width:100%;"),fa=Object(Ie.b)("div",{target:"e1rxuv722"})("font-style:normal;font-weight:normal;font-size:14px;line-height:16px;color:",Q.b.color.black,";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-top:4px;"),ga=Object(Ie.b)("div",{target:"e1rxuv723"})("color:",Q.b.color.mediumBlue,";font-family:Work Sans;font-style:normal;font-weight:bold;font-size:14px;line-height:16px;"),ha=Object(Ie.b)("div",{target:"e1rxuv724"})("margin-top:10px;padding-left:25px;padding-right:30px;"),ma=Object(Ie.b)(la,{target:"e1rxuv725"})("color:",Q.b.color.mediumBlue,";padding-right:15px;height:24px;width:24px;"),ba=Object(Ie.b)(ua,{target:"e1rxuv726"})("color:",Q.b.color.purple3,";cursor:pointer;padding-right:15px;height:24px;width:24px;"),va=function(e){var t=e.content,n=e.author,r=e.dismissReply,a=Object(Z.useState)(null),i=he()(a,2),o=i[0],s=i[1];return Object(Z.useEffect)((function(){s(Object(pn.a)({content:t})[0])}),[t]),_.a.createElement(ha,null,_.a.createElement(da,null,_.a.createElement(ma,{color:"".concat(Q.b.color.mediumBlue)}),_.a.createElement(pa,null,_.a.createElement(ga,null,"".concat(n.firstName," ").concat(n.lastName)),_.a.createElement(fa,null,o)),_.a.createElement(ba,{color:Q.b.color.designSystem.purple70,onClick:r})))};va.propTypes={content:H.a.string.isRequired,author:H.a.shape({firstName:H.a.string.isRequired,lastName:H.a.string.isRequired}).isRequired,dismissReply:H.a.func.isRequired};var ya=va;function xa(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):xa(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var ka=Object(E.b)((function(e){var t=C.c.replyingToMessage(e),n=Object(w.c)(e,t.writer);return Ea(Ea({},t),{},{author:n})}),(function(e){return{dismissReply:function(){return e(C.b.dismissReplyToMessage())}}}))(ya),Ca=Object(Ie.b)("div",{target:"e1ro904a0"})("outline:none;"),Ra=Object(Ie.b)("div",{target:"e1ro904a1"})("padding:24px;max-height:60vh;overflow-y:auto;overflow-x:hidden;",(function(e){return e.readOnly?"opacity: 0.5;":""}));function Oa(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):Oa(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}function wa(e){var t=function(){if("undefined"==typeof Reflect||!S.a)return!1;if(S.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(S()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W()(e);if(t){var a=W()(this).constructor;n=S()(r,arguments,a)}else n=r.apply(this,arguments);return L()(this,n)}}var Ma=function(e){return new oa.a((function(t){return setTimeout(t,e)}))},Sa=function(e){return!e.value||1===e.value.length&&""===e.value[0].children[0].text},Ia=function(e){F()(o,e);var t,n,r,a,i=wa(o);function o(e){var t;return q()(this,o),(t=i.call(this,e)).editorRef=_.a.createRef(),t.editorWrapperRef=_.a.createRef(),t.state={refreshEditorKey:0,editorState:Fe.e,isSubmitting:!1},t.onChange=t.onChange.bind(B()(t)),t.onKeyDown=t.onKeyDown.bind(B()(t)),t.onReturn=t.onReturn.bind(B()(t)),t.focus=t.focus.bind(B()(t)),t.updateContent=t.updateContent.bind(B()(t)),t.clear=t.clear.bind(B()(t)),t.loadContentAndFocusEditor=t.loadContentAndFocusEditor.bind(B()(t)),t.clearAndFocusEditor=t.clearAndFocusEditor.bind(B()(t)),t.setSubmittingState=t.setSubmittingState.bind(B()(t)),t}return A()(o,[{key:"componentDidMount",value:function(){var e=this.props.onHeightChange;this.loadContentAndFocusEditor(),this.ob=new sa.a(e),this.ob.observe(this.editorWrapperRef.current)}},{key:"componentDidUpdate",value:(a=g()(v.a.mark((function e(t){var n,r,a,i,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.conversationId,i=r.reply,o=t.conversationId!==a,s=i!==t.reply||(null==i?void 0:i.id)!==(null===(n=t.reply)||void 0===n?void 0:n.id),o&&(this.updateContent(t.conversationId),this.loadContentAndFocusEditor()),!s){e.next=7;break}return e.next=7,this.focus();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e=this.props.conversationId;this.updateContent(e),this.ob.unobserve(this.editorWrapperRef.current)}},{key:"setSubmittingState",value:function(e){this.setState((function(t){return ja(ja({},t),{},{isSubmitting:e})}))}},{key:"onChange",value:function(e,t){var n=this.props,r=n.sendTyping;t===n.conversationId&&(this.setState((function(t){return ja(ja({},t),{},{editorState:e})})),Sa(e)&&r())}},{key:"onKeyDown",value:function(e){var t=e.keyCode,n=this.props.onEdit,r=this.state.editorState;t===ft.h&&Sa(r)&&n()}},{key:"onReturn",value:function(e,t){var n=this.props,r=n.onReturn,a=n.onMessageSubmit;this.state.isSubmitting||(r(e,t),a(),this.clearAndFocusEditor())}},{key:"clear",value:function(){var e=this.state.refreshEditorKey;this.setState({refreshEditorKey:e+1,editorState:Fe.e})}},{key:"updateContent",value:function(e){var t=this.state.editorState,n=Sa(t)?void 0:t,r=this.props.updateContent;r(e,n)}},{key:"clearAndFocusEditor",value:(r=g()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clear(),e.next=3,this.focus();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadContentAndFocusEditor",value:(n=g()(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.content,n=this.state.refreshEditorKey,t?this.setState({refreshEditorKey:n+1,editorState:t}):this.clear(),e.next=5,this.focus();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"focus",value:(t=g()(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ma(50);case 2:t=this.editorRef.current?this.editorRef.current:{},(n=t.focus)&&n();case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.reply,r=e.htmlAttributes,a=e.editorConfig,i=e.conversationId,o=this.state,s=o.refreshEditorKey,c=o.editorState,l=o.isSubmitting;return _.a.createElement(Ca,P()({role:"textbox",onKeyDown:this.onKeyDown,tabIndex:-1},r),n&&_.a.createElement(ka,null),_.a.createElement(Ra,null,_.a.createElement("div",{ref:this.editorWrapperRef},_.a.createElement(Ke.a,{ref:this.editorRef,config:a,editorState:c,key:s,placeholder:t,type:"inbox",onChange:this.onChange,onReturn:this.onReturn,isSubmitting:l,setSubmittingState:this.setSubmittingState,conversationId:i}))))}}]),o}(_.a.PureComponent);Ia.propTypes={conversationId:H.a.string.isRequired,onEdit:H.a.func.isRequired,onHeightChange:H.a.func.isRequired,onMessageSubmit:H.a.func.isRequired,onReturn:H.a.func.isRequired,placeholder:H.a.string.isRequired,sendTyping:H.a.func.isRequired,content:H.a.shape({}),updateContent:H.a.func.isRequired,reply:H.a.shape({id:H.a.string.isRequired}),htmlAttributes:H.a.shape({}),editorConfig:H.a.shape({filesUrl:H.a.string,apiUrl:H.a.string,sessionToken:H.a.string}).isRequired},Ia.defaultProps={content:Fe.e,reply:null,htmlAttributes:{}};var Pa=Ia,Ta=["latestOwnMessageId"],qa=["onEdit","sendTyping"];function za(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):za(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var Na=function(){return null},Ba=Object(Ft.a)(C.c.currentConversationId),Da=Object(Ft.a)(C.c.messages),Fa=Object(Ft.a)((function(e){var t=Ba(e);return C.c.conversationMessages(e,t)})),Ga=Object(Ft.a)((function(e){var t=Ba(e);return C.c.conversationDraft(e,t)})),La=Object(Ft.a)((function(e){return C.c.replyingToMessage(e)})),Ua=Object(Dt.a)(Da,Fa,Gt.currentUserId,(function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=n.length-1;a>=0;a-=1)if((e=t[n[a]])&&e.writer===r)return e.id;return null})),Wa=Object(Ft.a)((function(e){var t=Ba(e),n=C.c.recipientId(e,t);return w.c(e,n)})),Va=Object(Dt.a)(Ba,Ua,Wa,Ga,La,(function(e,t,n,r,a){return{conversationId:e,latestOwnMessageId:t,placeholder:n?"Message ".concat(n.firstName,"..."):"Write a message...",reply:a,content:r}})),Ha=Object(E.b)(Va,(function(e){return{onEdit:function(t){return e(C.b.openEditMessage(t))},onReturn:function(t,n){return e(C.b.sendMessage(t,n))},sendTyping:function(t){return e(aa.e(t))},updateContent:function(t,n){return e(C.b.updateMessageDraft(t,n))}}}),(function(e,t,n){var r=e.latestOwnMessageId,a=Dr()(e,Ta),i=t.onEdit,o=t.sendTyping,s=Dr()(t,qa);return Aa(Aa(Aa(Aa({},a),s),n),{},{onEdit:r?function(){return i(r)}:Na,sendTyping:function(){return o(a.conversationId)}})}),{forwardRef:!0})(Pa),Za=n(1960),_a=n.n(Za),Ja=Object(Ie.b)("img",{target:"ebb244q0"})("width:24px;height:24px;"),Ka=function(e){var t=e.description,n=e.launchMeeting,r=e.launchingMeeting;return _.a.createElement(X.a,{title:t,position:"bottom"},_.a.createElement(dt.a,{onClick:n,loading:r,type:"text"},_.a.createElement(Ja,{src:_a.a,alt:"BigBlueButton"})))};Ka.propTypes={description:H.a.string.isRequired,launchMeeting:H.a.func.isRequired,launchingMeeting:H.a.bool.isRequired};var $a=Ka,Qa=n(576),Xa=n(271),Ya=function(e){var t=e.id,n=e.context;return function(){var e=g()(v.a.mark((function e(r,a){var i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Qa.c.isFetchingJoinUrl(a())){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r(Qa.b.fetchJoinUrl({id:t,context:n}));case 4:(i=e.sent)?window.open(i,"_blank"):r(Xa.b.showToast({emoji:"🤔",message:"Oops! We failed to launch the BigBlueButton session"}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},ei=Object(E.b)((function(e,t){return{launchingMeeting:Qa.c.isFetchingJoinUrl(e),description:Qa.c.description(e,t)}}),(function(e,t){var n=t.id,r=t.context;return{launchMeeting:function(){return e(Ya({id:n,context:r}))}}}))($a),ti=n(573),ni=n(1659),ri=n(268),ai=n(145),ii=Object(Ie.b)("div",{target:"e1cc1c4l0"})("display:flex;gap:6px;color:",Q.b.color.designSystem.blackOpacity60,";font-size:",Q.b.font.size.copy,";font-weight:",Q.b.font.weight.regular,";"),oi=Object(Ie.b)("div",{target:"e1cc1c4l1"})("font-size:",Q.b.font.size.headline,";color:",Q.b.color.designSystem.blackOpacity87,";font-weight:",Q.b.font.weight.semiBold,";"),si=function(e){var t=e.title,n=e.status;return _.a.createElement(_.a.Fragment,null,_.a.createElement(oi,null,t),n?_.a.createElement(ii,null,_.a.createElement(ri.a,{emoji:ai.a.getFromShortName(n.emojiName)}),n.text):null)};si.propTypes={title:H.a.string.isRequired,status:Le.d},si.defaultProps={status:null};var ci=si;function li(e){var t=function(){if("undefined"==typeof Reflect||!S.a)return!1;if(S.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(S()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W()(e);if(t){var a=W()(this).constructor;n=S()(r,arguments,a)}else n=r.apply(this,arguments);return L()(this,n)}}var ui={backgroundColor:"rgba(0, 0, 0, 0.8)",position:"absolute",top:0,left:0,width:"100%",height:"100%"},di=[{getLabel:function(){return be.J},getHandler:function(e){return e.openViewParticipants},key:"openViewParticipants",getIcon:function(){return ne.a},visible:function(e){return!!e.conversation.isGroup},disabled:function(){return!1}},{getLabel:function(){return be.E},getHandler:function(e){return e.openAddParticipant},key:"openAddParticipants",getIcon:function(){return ae.a},visible:function(e){var t=e.conversation;return!!t.isGroup&&!t.boundToSpaceGroup},disabled:function(e){return!!e.conversation.educatorOnly},disabledToolTip:"Educator only conversation"},{getLabel:function(){return be.H},getHandler:function(e){return e.openRenameGroup},key:"openRenameGroup",getIcon:function(){return oe.a},visible:function(e){var t=e.conversation;return!!t.isGroup&&!t.boundToSpaceGroup&&!t.educatorOnly},disabled:function(){return!1}},{getLabel:function(e){return e.conversationMuted?be.I:be.G},getHandler:function(e){return e.toggleMuteConversation},key:"muteUnmute",getIcon:function(e){return e.conversationMuted?pe.a:ue.a},visible:function(){return!0},disabled:function(){return!1}},{getLabel:function(){return be.F},getHandler:function(e){return e.openLeaveGroup},key:"openLeaveGroup",getIcon:function(){return ce.a},visible:function(e){var t=e.conversation;return!!t.isGroup&&!t.boundToSpaceGroup&&!t.educatorOnly},disabled:function(){return!1}}],pi=function(e){F()(a,e);var t,n,r=li(a);function a(e){var t;q()(this,a),(t=r.call(this,e)).state={emojiPickerAnchor:null,emojiPickerOpenForMessageId:null},t.messageTable=null,t.writeZone=null,t.conversationModalId="conversation-panel",t.closeLeaveGroup=t.closeLeaveGroup.bind(B()(t)),t.focusWriteZone=t.focusWriteZone.bind(B()(t)),t.onWriteZoneResize=t.onWriteZoneResize.bind(B()(t)),t.onMessageSubmit=t.onMessageSubmit.bind(B()(t)),t.setMessageTable=t.setMessageTable.bind(B()(t)),t.setWriteZone=t.setWriteZone.bind(B()(t)),t.openEmojiPicker=t.openEmojiPicker.bind(B()(t)),t.closeEmojiPicker=t.closeEmojiPicker.bind(B()(t)),t.selectEmoji=t.selectEmoji.bind(B()(t)),t.onJumpToBottom=t.onJumpToBottom.bind(B()(t)),t.onFocusWindow=t.onFocusWindow.bind(B()(t));var n=t.props.sessionToken;return t.editorConfig={sessionToken:n,filesUrl:Object(fe.x)(),apiUrl:Object(fe.d)()},t}return A()(a,[{key:"componentDidMount",value:(n=g()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("focus",this.onFocusWindow);case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){window.removeEventListener("focus",this.onFocusWindow)}},{key:"onFocusWindow",value:function(){this.focusWriteZone()}},{key:"onMessageSubmit",value:function(){this.messageTable.scrollToBottom()}},{key:"onWriteZoneResize",value:function(){this.messageTable&&this.messageTable.onWriteZoneResize()}},{key:"onJumpToBottom",value:(t=g()(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.fetchMessages,e.next=3,t();case 3:this.messageTable.scrollToBottom();case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setMessageTable",value:function(e){this.messageTable=e}},{key:"setWriteZone",value:function(e){this.writeZone=e}},{key:"closeLeaveGroup",value:function(){var e=this.props.closeLeaveGroup;e(),this.focusWriteZone()}},{key:"focusWriteZone",value:function(){this.writeZone&&this.writeZone.focus()}},{key:"openEmojiPicker",value:function(e){var t=e.messageId,n=e.anchor;this.setState({emojiPickerOpenForMessageId:t,emojiPickerAnchor:n})}},{key:"closeEmojiPicker",value:function(){this.setState({emojiPickerOpenForMessageId:null,emojiPickerAnchor:null})}},{key:"selectEmoji",value:function(e){(0,this.props.toggleReaction)({itemId:this.state.emojiPickerOpenForMessageId,emojiName:e.short_name})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.groupId,a=n.closeModal,i=n.open,o=n.title,s=n.status,c=n.conversation,l=n.currentUser,u=n.openViewParticipants,d=n.leavingConversation,p=n.leaveGroupOpened,f=n.leaveConversation,g=n.isBBBEnabled,h=this.state.emojiPickerAnchor,m=g?_.a.createElement(ei,{id:r,context:"conversations"}):null,b=_.a.createElement(Z.Fragment,null,_.a.createElement(Tr,null,_.a.createElement(Pr,null,m,_.a.createElement(ra,{conversation:c,currentUser:l,openViewParticipants:u}))),_.a.createElement(Nr,{id:"menu_".concat(c.id)},0===(e=di.filter((function(e){return e.visible(t.props)}))).length?null:_.a.createElement(J.a,{ariaLabelledby:"menu_".concat(c.id),renderTarget:function(e){var t=e.handleTargetClick;return _.a.createElement("div",null,_.a.createElement(K.a,{icon:ee.a,size:"small",type:"secondary",id:"conversation-menu-button",label:"Conversation menu",onClick:t}))},onSelect:function(e){return(0,e.item)()},renderChildren:function(n){var r=n.getItemProps;return e.map((function(e){var n=e.getLabel,a=e.getHandler,i=e.key,o=e.getIcon,s=e.disabled,c=e.disabledToolTip,l=o(t.props),u=s(t.props),d=_.a.createElement($.a,P()({key:"action:".concat(i),size:"medium",disabled:u,leftDecoration:_.a.createElement(l,{style:{color:Q.b.color.grey11}}),primaryText:n(t.props)},r({item:a(t.props),onClick:function(e){return e.stopPropagation()}})));return u&&c?_.a.createElement(X.a,{title:c},d):d}))},anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"}})));return _.a.createElement("div",null,_.a.createElement(zr,{keepMounted:!0,size:"fullscreen",id:this.conversationModalId,container:function(){return document.getElementById("content-container")},open:i,BackdropProps:{style:ui},onBackdropClick:a,disableEnforceFocus:!0,onClose:a,onKeyDown:function(e){e.keyCode===ft.e&&a(),Object(ni.a)(e,document.getElementById(t.conversationModalId))},headerData:{children:b,icon:_.a.createElement(Pe.a,{conversationId:c.id}),title:_.a.createElement(ci,{title:o,status:s}),iconSize:"small",hint:c.educatorOnly?"Only educators are in this conversation":null},"data-testid":"dm-modal"},_.a.createElement(qr,null,_.a.createElement(Ar,{tabIndex:-1},_.a.createElement(Sr,{innerRef:t.setMessageTable,openEmojiPicker:t.openEmojiPicker,closeEmojiPicker:t.closeEmojiPicker}),_.a.createElement(Ir,null,_.a.createElement(Ha,{editorConfig:t.editorConfig,ref:t.setWriteZone,onHeightChange:t.onWriteZoneResize,onMessageSubmit:t.onMessageSubmit,htmlAttributes:{"data-testid":"dm-message-textbox"}}))))),_.a.createElement(qt,{conversation:c,currentUser:l,onClose:this.focusWriteZone}),_.a.createElement(Ne,{conversation:c,currentUser:l,onClose:this.focusWriteZone,title:o}),_.a.createElement(zt,{loading:d,open:p,onClose:this.closeLeaveGroup,onConfirm:f}),_.a.createElement(lt,{editorConfig:this.editorConfig,conversation:c,onClose:this.focusWriteZone}),_.a.createElement(ti.b,{id:"conversations-emoji-picker",anchorEl:h,show:!!h,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},onClose:this.closeEmojiPicker,onSelect:this.selectEmoji}))}}]),a}(_.a.PureComponent);pi.propTypes={groupId:H.a.string.isRequired,closeLeaveGroup:H.a.func.isRequired,closeModal:H.a.func.isRequired,conversation:Le.a.isRequired,currentUser:Le.e.isRequired,leaveConversation:H.a.func.isRequired,leavingConversation:H.a.bool,leaveGroupOpened:H.a.bool,open:H.a.bool,openAddParticipant:H.a.func.isRequired,openLeaveGroup:H.a.func.isRequired,openRenameGroup:H.a.func.isRequired,openViewParticipants:H.a.func.isRequired,title:H.a.string.isRequired,status:Le.d,isBBBEnabled:H.a.bool.isRequired,toggleReaction:H.a.func.isRequired,fetchMessages:H.a.func.isRequired,conversationMuted:H.a.bool.isRequired,toggleMuteConversation:H.a.func.isRequired,sessionToken:H.a.string.isRequired},pi.defaultProps={open:!1,status:null,leaveGroupOpened:!1,leavingConversation:!1};var fi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}}(We(["conversation","currentUser"]))(pi);function gi(e,t){var n=x()(e);if(a.a){var r=a()(e);t&&(r=r.filter((function(t){return o()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):c.a?u()(e,c()(n)):gi(Object(n)).forEach((function(t){p()(e,t,o()(n,t))}))}return e}var mi=function(e){return e.query.inbox};t.default=Object(k.withLDConsumer)()(Object(E.b)((function(){return function(e,t){var n=t.location,r=t.flags,a=mi(n),i=e.data.inboxv2.conversations[a],o=e.user.user,s=r.ftUserStatusEnabled202107?function(e,t,n){var r=x()(t).filter((function(e){return e!==n.objectId}));if(1===r.length){var a=Object(w.c)(e,r[0]);return null==a?void 0:a.status}return null}(e,i.participants,o):null;return{groupId:a,currentUser:o,conversation:i,leaveGroupOpened:e.inboxv2.leaveGroupOpened,leavingConversation:e.inboxv2.leavingConversation,open:!!a&&!0,renameGroupOpened:e.inboxv2.renameGroupOpened,title:C.c.conversationTitle(e,a),status:s,isBBBEnabled:Object(j.b)(e)&&Object(j.c)(e),conversationMuted:R.c.isConversationMuted(e,a),sessionToken:o.sessionToken}}}),(function(e,t){return{openAddParticipant:function(){return e(C.b.openViewParticipants(!0))},closeLeaveGroup:function(){return e(C.b.closeLeaveGroup())},openLeaveGroup:function(){return e(C.b.openLeaveGroup())},openRenameGroup:function(){return e(C.b.openRenameGroup())},openViewParticipants:function(){return e(C.b.openViewParticipants())},leaveConversation:function(){return e(C.b.leaveConversation())},toggleReaction:function(t){var n=t.itemId,r=t.emojiName;return e(O.b.toggleReaction({itemId:n,itemType:"UBInboxMessage",emojiName:r}))},fetchMessages:function(){return e(C.b.fetchMessages({replace:!0}))},toggleMuteConversation:function(){var n=mi(t.location);return e(R.b.toggleMuteConversation(n))}}}),(function(e,t,n){return hi(hi(hi(hi({},e),t),n),{},{leaveConversation:(r=g()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leaveConversation();case 2:t.closeLeaveGroup(),n.closeModal();case 4:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})});var r}))(fi))}}]);
//# sourceMappingURL=14.d98d5f7e276c2fd241d0.js.map